import{d as x,u as I,a as P,r as F,b as D,c as _,o as U,e as $,f as u,n as V,g as s,w as r,h as k,i as c,E as p,p as q,j as M}from"./index.bc555423.js";import{_ as N}from"./_plugin-vue_export-helper.cdc0426e.js";const i=f=>(q("data-v-e8f0b3eb"),f=f(),M(),f),j={class:"login-container"},T={class:"login-card"},L=i(()=>u("div",{class:"game-info"},[u("h1",null,"\u6B22\u8FCE\u6765\u5230\u5854\u9632\u8054\u76DF"),u("p",null,"\u52A0\u5165\u6211\u4EEC\u7684\u793E\u533A\uFF0C\u63A2\u7D22\u6570\u767E\u6B3E\u7CBE\u5F69\u5173\u5361\uFF0C\u6311\u6218\u5168\u7403\u73A9\u5BB6\uFF0C\u8D62\u53D6\u4E30\u539A\u5956\u52B1\uFF01")],-1)),O={class:"auth-container"},G={class:"tabs"},H=i(()=>u("h2",null,"\u6B22\u8FCE\u56DE\u6765",-1)),J=i(()=>u("p",{class:"login-hint"},"\u8BF7\u8F93\u5165\u90AE\u7BB1\u767B\u5F55",-1)),K={class:"input-group"},Q=i(()=>u("i",{class:"fas fa-user"},null,-1)),W={class:"input-group"},X=i(()=>u("i",{class:"fas fa-lock"},null,-1)),Y={class:"switch-form"},Z={class:"tabs"},ee=i(()=>u("h2",null,"\u521B\u5EFA\u65B0\u8D26\u53F7",-1)),ue={class:"input-group"},se=i(()=>u("i",{class:"fas fa-envelope"},null,-1)),oe={class:"input-group"},le=i(()=>u("i",{class:"fas fa-lock"},null,-1)),ae={class:"input-group"},re=i(()=>u("i",{class:"fas fa-lock"},null,-1)),te={class:"switch-form"},ie=x({__name:"login",setup(f){const R=I(),w=P(),B=F(!1),m=F(!1),v=F(),C=F(),n=D({email:"",password:""}),a=D({email:"",password:"",confirmPassword:""}),S={email:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1",trigger:"blur"},{type:"email",message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"},{min:6,message:"\u5BC6\u7801\u957F\u5EA6\u81F3\u5C11\u4E3A6\u4F4D",trigger:"blur"}]},z={email:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1",trigger:"blur"},{type:"email",message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"},{min:6,message:"\u5BC6\u7801\u957F\u5EA6\u81F3\u5C11\u4E3A6\u4F4D",trigger:"blur"}],confirmPassword:[{required:!0,message:"\u8BF7\u786E\u8BA4\u5BC6\u7801",trigger:"blur"},{validator:(t,e,l)=>{e!==a.password?l(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4")):l()},trigger:"blur"}]},d=t=>{B.value=t==="register"},E=async()=>{var t;if(!!v.value)try{if(!await v.value.validate())return;m.value=!0;const l=await w.login(n.email,n.password);l.code===200?(p.success("\u767B\u5F55\u6210\u529F\uFF01"),R.push("/")):p.error(((t=l.data)==null?void 0:t.message)||"\u767B\u5F55\u5931\u8D25")}catch(e){p.error(e.message||"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}finally{m.value=!1}},b=async()=>{var t;if(!!C.value)try{if(!await C.value.validate())return;m.value=!0;const l=await w.register({email:a.email,password:a.password,displayName:a.email.split("@")[0]});l.code===200?(p.success("\u6CE8\u518C\u6210\u529F\uFF01"),setTimeout(()=>{d("login"),n.email=a.email,Object.assign(a,{email:"",password:"",confirmPassword:""})},1500)):p.error(((t=l.data)==null?void 0:t.message)||"\u6CE8\u518C\u5931\u8D25")}catch(e){p.error(e.message||"\u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}finally{m.value=!1}};return(t,e)=>{const l=_("el-input"),g=_("el-form-item"),h=_("el-button"),y=_("el-form"),A=_("el-link");return U(),$("div",j,[u("div",T,[L,u("div",O,[u("div",{class:V(["form-container",{hidden:B.value}])},[u("div",G,[u("div",{class:"tab active",onClick:e[0]||(e[0]=o=>d("login"))},"\u767B\u5F55"),u("div",{class:"tab",onClick:e[1]||(e[1]=o=>d("register"))},"\u6CE8\u518C")]),H,J,s(y,{onSubmit:k(E,["prevent"]),model:n,rules:S,ref_key:"loginFormRef",ref:v},{default:r(()=>[s(g,{prop:"email"},{default:r(()=>[u("div",K,[Q,s(l,{modelValue:n.email,"onUpdate:modelValue":e[2]||(e[2]=o=>n.email=o),placeholder:"\u90AE\u7BB1",type:"email",size:"large",clearable:""},null,8,["modelValue"])])]),_:1}),s(g,{prop:"password"},{default:r(()=>[u("div",W,[X,s(l,{modelValue:n.password,"onUpdate:modelValue":e[3]||(e[3]=o=>n.password=o),type:"password",placeholder:"\u5BC6\u7801",size:"large","show-password":"",clearable:""},null,8,["modelValue"])])]),_:1}),s(h,{type:"primary",size:"large",loading:m.value,onClick:E,class:"login-btn"},{default:r(()=>[c(" \u767B\u5F55 ")]),_:1},8,["loading"])]),_:1},8,["onSubmit","model"]),u("div",Y,[c(" \u8FD8\u6CA1\u6709\u8D26\u53F7? "),s(A,{type:"primary",onClick:e[4]||(e[4]=o=>d("register"))},{default:r(()=>[c("\u7ACB\u5373\u6CE8\u518C")]),_:1})])],2),u("div",{class:V(["form-container",{hidden:!B.value}])},[u("div",Z,[u("div",{class:"tab",onClick:e[5]||(e[5]=o=>d("login"))},"\u767B\u5F55"),u("div",{class:"tab active",onClick:e[6]||(e[6]=o=>d("register"))},"\u6CE8\u518C")]),ee,s(y,{onSubmit:k(b,["prevent"]),model:a,rules:z,ref_key:"registerFormRef",ref:C},{default:r(()=>[s(g,{prop:"email"},{default:r(()=>[u("div",ue,[se,s(l,{modelValue:a.email,"onUpdate:modelValue":e[7]||(e[7]=o=>a.email=o),placeholder:"\u7535\u5B50\u90AE\u7BB1",size:"large",clearable:""},null,8,["modelValue"])])]),_:1}),s(g,{prop:"password"},{default:r(()=>[u("div",oe,[le,s(l,{modelValue:a.password,"onUpdate:modelValue":e[8]||(e[8]=o=>a.password=o),type:"password",placeholder:"\u5BC6\u7801",size:"large","show-password":"",clearable:""},null,8,["modelValue"])])]),_:1}),s(g,{prop:"confirmPassword"},{default:r(()=>[u("div",ae,[re,s(l,{modelValue:a.confirmPassword,"onUpdate:modelValue":e[9]||(e[9]=o=>a.confirmPassword=o),type:"password",placeholder:"\u786E\u8BA4\u5BC6\u7801",size:"large","show-password":"",clearable:""},null,8,["modelValue"])])]),_:1}),s(h,{type:"primary",size:"large",loading:m.value,onClick:b,class:"register-btn"},{default:r(()=>[c(" \u6CE8\u518C\u8D26\u53F7 ")]),_:1},8,["loading"])]),_:1},8,["onSubmit","model"]),u("div",te,[c(" \u5DF2\u6709\u8D26\u53F7? "),s(A,{type:"primary",onClick:e[10]||(e[10]=o=>d("login"))},{default:r(()=>[c("\u7ACB\u5373\u767B\u5F55")]),_:1})])],2)])])])}}});const me=N(ie,[["__scopeId","data-v-e8f0b3eb"]]);export{me as default};
