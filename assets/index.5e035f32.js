import{b as $,a8 as ce,r as P,a9 as se,d as ue,z as ee,m as Ae,P as de,o as j,e as X,f as B,F as ge,q as fe,k as r,g as w,w as x,aa as U,t as q,h as Ie,Q as R,ab as O,i as H,v as Ce,E as b}from"./index.bc555423.js";import{o as Z,u as oe,l as te,_ as Ee}from"./source.4b31753f.js";import{a as ae,r as me}from"./format.4b9e5d75.js";import{_ as we}from"./_plugin-vue_export-helper.cdc0426e.js";const ne="data:image/png;base64,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",xe="data:image/png;base64,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";function Fe(u,n,t,o){var A;const i=ae;for(let a=0;a<i.length;a++){const g=u[n+i[a].addRow][t+i[a].addCol];if(g.v>0&&((A=g.i)==null?void 0:A[o])!==void 0)return{xy:a+1,row:n+i[a].addRow,col:t+i[a].addCol}}}function ve(u,n,t,o,i){var a;const A=ae;for(let g=0;g<A.length;g++){const I=u[n][t],N=n+A[g].addRow,K=t+A[g].addCol,d=(a=u[N])==null?void 0:a[K];let p=d&&I.i[o]&&I.i[o]+1===d.i[o];if(!p)for(let E=0;E<I.i.length&&E!==o;E++){const k=I.i[E]&&I.i[E]+1===d.i[E];k&&(p=k,o=E)}if((d==null?void 0:d.v)&&p)return{xy:g+1,flagIndex:o};if(i.row===N&&i.col===K)return{xy:"end",flagIndex:o}}}function Be(u,n,t,o){let i;switch(o){case 1:{i=u[n][--t].v;break}case 2:{i=u[--n][t].v;break}case 3:{i=u[n][++t].v;break}case 4:{i=u[++n][t].v;break}}return{value:i,row:n,col:t}}const Qe=["primary","success","warning","danger"],Y=["#409eff","#67c23a","#e6a23c","#f56c6c"],pe=4,re=(u,n=!0)=>{const t=Y[u],o=`<svg t="1696667356250" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2422" data-darkreader-inline-fill="" width="200" height="200">
  <path d="M246.4 682.9V173.3c-1.8-13 1.4-32.8 15.8-51.1 30.6-38.5 100.1-58 206.6-58 66.3 0 111.8 41.6 148.4 75 21.6 19.7 42 38.3 60.5 42.9 55.5 13.6 144.3-27.7 173.8-44.8l46.6-27-63.5 464.2-7.9 6.5c-3 2.5-74.5 60.9-158.7 40.7-31.5-7.6-60.6-19.7-88.7-31.5C542.1 574.7 507 560 474.1 560c-115.8 0-181.2 71.1-181.8 71.8l-45.9 51.1z m227.7-175.6c43.4 0 85.2 17.4 125.5 34.3 26.2 11 53.3 22.3 80.7 28.9 45 10.8 87.9-13.1 104.9-24.4l46.6-340.6c-44.2 19.1-112.1 41.2-166.8 27.7-31.6-7.8-56.8-30.8-83.5-55.1-33-30.1-67-61.2-112.9-61.2-117.8 0-153.7 25.3-163.7 36.2-5.6 6.1-6.4 10.9-6.4 12.8l1.4 3.7-1 1.5V559c37.4-24.4 96.7-51.7 175.2-51.7z m335.8 53.5h0.1-0.1zM298.3 165.1" fill="${t}" p-id="2423" data-darkreader-inline-fill="" style="--darkreader-inline-fill: ${t};"></path>
  <path d="M272.8 894c-14.5 0-26.3-11.8-26.3-26.3V177.2c0-14.5 11.8-26.3 26.3-26.3s26.3 11.8 26.3 26.3v690.5c0.1 14.5-11.7 26.3-26.3 26.3z" fill="${t}" p-id="2424" data-darkreader-inline-fill="" style="--darkreader-inline-fill: ${t};"></path>
  <path d="M278.3 959.8c-85.5 0-152.4-42.9-152.4-97.6s66.9-97.6 152.4-97.6 152.4 42.9 152.4 97.6-66.9 97.6-152.4 97.6z m0-142.5c-60.9 0-99.7 26.6-99.7 44.9s38.8 44.9 99.7 44.9 99.7-26.6 99.7-44.9-38.8-44.9-99.7-44.9z" fill="${t}" p-id="2425" data-darkreader-inline-fill="" style="--darkreader-inline-fill: ${t};"></path>
  </svg>`,i="data:image/svg+xml,"+encodeURIComponent(o);if(n){const A=new Image;return A.src=i,A}return i},z=[Z.floor],L={floor:[],terminal:void 0},e=$({canvasInfo:{w:1e3,h:600,rowNum:12,colNum:20,lineW:6.25,left:0,top:0},size:50,ctx:null,animationFrame:0,gridArr:ce(12,20,()=>({v:0,i:[]})),curFlagIndex:0,floorNumList:[0,0,0,0],newFloorNum:-1}),D=$([]),Q=P();function G(u,n){const{lineW:t}=e.canvasInfo;return{gridW:e.size-t,x:u*e.size+t/2,y:n*e.size+t/2}}function _({img:u,x:n,y:t,gridW:o,itemI:i}){e.ctx.drawImage(u,n,t,o,o);const A=i.reduce((a,g,I)=>(g!==void 0&&(a.length++,a.curFlagIndex=I),a),{length:0,curFlagIndex:0});if(!!A.length)switch(e.ctx.textAlign="center",e.ctx.textBaseline="middle",A.length){case 1:{e.ctx.fillStyle=Y[A.curFlagIndex],i.forEach(a=>{a!==void 0&&V({fontSize:o/1.5,x:n+o/2,y:t+o/2,text:a+""})});break}case 2:{let a=0;i.forEach((g,I)=>{g!==void 0&&(e.ctx.fillStyle=Y[I],V({fontSize:o/2,x:n+o*(a%2?3:1)/4,y:t+o/2,text:g+""}),a++)});break}case 3:{let a=0;i.forEach((g,I)=>{g!==void 0&&(e.ctx.fillStyle=Y[I],V({fontSize:o/2,x:n+o*(a?a===1?1:3:2)/4,y:t+o*(a?3:1)/4,text:g+""}),a++)});break}case 4:{let a=0;i.forEach((g,I)=>{g!==void 0&&(e.ctx.fillStyle=Y[I],V({fontSize:o/2,x:n+o*(a%2?3:1)/4,y:t+o*(a>1?3:1)/4,text:g+""}),a++)});break}}}function V({fontSize:u,x:n,y:t,text:o}){e.ctx.font=`${u}px \u5B8B\u4F53`,e.ctx.fillText(o,n,t)}function he(){const{colNum:u,rowNum:n,lineW:t}=e.canvasInfo,{w:o,h:i}=e.canvasInfo,A=e.size,a=e.ctx;a.lineWidth=t,a.strokeStyle="#ddeafb",a.strokeRect(t/2,t/2,o-t,i-t),a.fillStyle="#ddeafb";for(let g=1;g<u;g++)a.fillRect(A*g-t/2,t,t,i);for(let g=1;g<n;g++)a.fillRect(t,A*g-t/2,o,t);a.fillStyle="#b4d4fa",a.fillRect(A*(u/2)-t/2,t,t,i-t*2),a.fillRect(t,A*(n/2)-t/2,o-t*2,t)}function ke(){const{rowNum:u,colNum:n}=e.canvasInfo;for(let t=0;t<u;t++)for(let o=0;o<n;o++)if(e.gridArr[t][o].v>0){const{x:i,y:A,gridW:a}=G(o,t);_({img:L.floor[e.gridArr[t][o].v-1],itemI:e.gridArr[t][o].i,x:i,y:A,gridW:a})}}function De(){var u;D.forEach((n,t)=>{ie(n.row,n.col,t)}),(u=Q.value)!=null&&u.row&&le(Q.value.row,Q.value.col)}function ie(u,n,t){const{x:o,y:i,gridW:A}=G(n,u),a=re(t);a.onload=()=>{e.ctx.drawImage(a,o,i,A,A)}}function le(u,n){const{x:t,y:o,gridW:i}=G(n,u);e.ctx.drawImage(L.terminal,t,o,i,i)}const Me=()=>{const u=oe(),n=$({x:0,y:0,imgIndex:0,isDraw:!1,type:""});function t(d,p,E){switch(n.type=p,document.addEventListener("mousemove",i),p){case"floor":{n.imgIndex=E;break}case"eraser":{n.imgIndex=z.length;break}case"end":{n.imgIndex=z.length+1;break}case"oneselfAdd":case"oneselfMinus":case"nextAdd":{n.imgIndex=z.length+2;break}case"zeroing":{n.imgIndex=z.length+2;break}}n.x=d.clientX-e.size/4,n.y=d.clientY-e.size/4}function o(d){if(d.button===0){if(!N(d))return;n.isDraw=!0,a(d)}}function i(d){if(n.x=d.clientX-e.size/4,n.y=d.clientY-e.size/4,!!n.isDraw){if(!N(d)){K();return}a(d)}}function A(){switch(document.removeEventListener("mousemove",i),n.x=0,n.y=0,n.type){case"nextAdd":e.newFloorNum=-1}n.type=""}function a(d){const{left:p,top:E}=e.canvasInfo,k=e.size/u.ratio,m=Math.floor((d.clientY-E)/k),C=Math.floor((d.clientX-p)/k),l=e.gridArr[m][C],v=e.curFlagIndex;switch(n.type){case"floor":{if(l.v===-1||l.v>0&&l.i[e.curFlagIndex]!==void 0)return;const{x:f,y:c,gridW:s}=G(C,m);l.v=1,l.i[v]=e.floorNumList[v],e.floorNumList[v]++,_({img:L.floor[n.imgIndex],itemI:l.i,x:f,y:c,gridW:s});return}case"flag":{if(l.v||D.length>=pe)return;D.push({row:m,col:C}),e.curFlagIndex=D.length-1,l.v=-1,ie(m,C,e.curFlagIndex);return}case"end":{if(l.v)return;if(Q.value){const{x:f,y:c,gridW:s}=G(Q.value.col,Q.value.row);e.gridArr[Q.value.row][Q.value.col].v=0,e.ctx.clearRect(f,c,s,s)}Q.value={row:m,col:C},l.v=-2,le(m,C);return}case"eraser":{if(!l.v)return;const{x:f,y:c,gridW:s}=G(C,m);if(g(l.i[v],-1),l.v===-1){const F=D.findIndex(h=>h.row===m&&h.col===C);F!==-1&&D.splice(F,1)}else l.v===-2&&(Q.value=void 0);l.i.forEach((F,h)=>{F!==void 0&&(e.floorNumList[h]=Math.max(e.floorNumList[h]-1,0))}),e.ctx.clearRect(f,c,s,s),l.v=0,l.i=[];return}case"oneselfAdd":{I(l,l.i[v]+1,m,C);return}case"oneselfMinus":{I(l,l.i[v]-1,m,C);return}case"zeroing":{I(l,0,m,C);return}case"nextAdd":{if(l.v!==1||e.newFloorNum===l.i[v])return;e.newFloorNum<0?e.newFloorNum=l.i[v]:(e.newFloorNum++,l.i[v]=e.newFloorNum,I(l,l.i[v],m,C));return}}}function g(d,p,E=!0){const{rowNum:k,colNum:m}=e.canvasInfo,C=e.curFlagIndex;for(let l=0;l<k;l++)for(let v=0;v<m;v++){const f=e.gridArr[l][v],c=E?f.i[C]>=d:f.i[C]<=d;f.v>0&&c&&I(f,f.i[C]+p,l,v)}}function I(d,p,E,k){d.i[e.curFlagIndex]=me(p,0,e.floorNumList[e.curFlagIndex]);const{x:m,y:C,gridW:l}=G(k,E);e.ctx.clearRect(m,C,l,l),_({img:L.floor[d.v-1],itemI:d.i,x:m,y:C,gridW:l})}function N(d){const{left:p,top:E,w:k,h:m}=e.canvasInfo;return se({x:d.clientX,y:d.clientY},{x:p,y:E,w:k/u.ratio,h:m/u.ratio})}function K(){n.isDraw=!1}return{mouseImg:n,onClickDrag:t,onMouseFloorClick:o,onRightClick:A,onMouseUp:K}},ye={class:"createMap-area"},Se={class:"floorWrap"},Ne=["src","onMousedown"],Re={class:"right"},Ke=["src"],Oe=["src"],He=["src"],ze=["width","height"],Ge=["src"],Je=ue({__name:"index",setup(u){const n=oe(),t=P(),o=P(),{mouseImg:i,onClickDrag:A,onMouseFloorClick:a,onRightClick:g,onMouseUp:I}=Me(),N=ee(()=>{let f=e.curFlagIndex;return re(f>3?0:f,!1)}),K=ee(()=>i.type==="flag"?N.value:[...z,ne,Z.terminal,xe][i.imgIndex]);Ae(()=>{setTimeout(()=>{d()},10),window.addEventListener("resize",C)}),de(()=>{cancelAnimationFrame(e.animationFrame),window.removeEventListener("resize",C)});async function d(){e.ctx=o.value.getContext("2d"),l(),await p(),setTimeout(()=>{E()},0)}async function p(){L.floor=await Promise.all(z.map(f=>te(f))),L.terminal=await te(Z.terminal)}function E(){e.ctx.clearRect(0,0,e.canvasInfo.w,e.canvasInfo.h),he(),ke(),De()}function k(){e.newFloorNum=-1,e.curFlagIndex<D.length-1?e.curFlagIndex++:e.curFlagIndex=0}function m(){e.gridArr.forEach(f=>{f.forEach(c=>{c.v=0,c.i=[]})}),e.curFlagIndex=0,D.length=0,e.floorNumList=[0,0,0,0],Q.value=void 0,E()}const C=Ee.debounce(()=>{l(),setTimeout(()=>{E()},0)},100);function l(){var F,h,M,y,J,T,W,S;const f=((h=(F=t.value)==null?void 0:F.clientWidth)!=null?h:0)*n.ratio,c=((y=(M=t.value)==null?void 0:M.clientHeight)!=null?y:0)*n.ratio;e.canvasInfo.w=f,e.canvasInfo.h=c,e.canvasInfo.left=(T=(J=t.value)==null?void 0:J.offsetLeft)!=null?T:0,e.canvasInfo.top=(S=(W=t.value)==null?void 0:W.offsetTop)!=null?S:0,e.size=f/e.canvasInfo.colNum;const s=e.size/8;e.canvasInfo.lineW=s}function v(){if(!D.length)return b.warning("\u8BF7\u9009\u62E9\u65D7\u5B50\u4F5C\u4E3A\u654C\u4EBA\u8D77\u70B9~");if(!Q.value)return b.warning("\u8BF7\u9009\u62E9\u841D\u535C\u4F5C\u4E3A\u654C\u4EBA\u7EC8\u70B9~");const f={start:[],map:[],end:{x:Q.value.col,y:Q.value.row}};for(let c=0;c<D.length;c++){f.map.push({});let{row:s,col:F}=D[c];const h={x:F,y:s,x_y:1,num:0};let M=Fe(e.gridArr,s,F,c),y=M==null?void 0:M.xy;if(!M)return b.warning("\u65D7\u5B50\u9644\u8FD1\u6CA1\u6709\u5730\u677F~");s=M.row,F=M.col,h.x_y=y!=null?y:1;let J=1,T=c;for(;s!==Q.value.row||F!==Q.value.col;){const W=Be(e.gridArr,s,F,y);s=W.row,F=W.col;const S=ve(e.gridArr,s,F,T,Q.value);if(!S)return b.warning("\u8BF7\u5C06\u6240\u6709\u5730\u677F\u683C\u5B50\u76F8\u8FDE~");if(S.xy==="end")break;T=S.flagIndex,S.xy!==y&&(y=S.xy,f.map[c][J]=S.xy),J++}h.num=J,f.start.push(h)}console.log(f)}return(f,c)=>(j(),X("div",{class:"createMap",style:q({"--size":r(e).size/r(n).ratio+"px"})},[B("div",null,[B("div",ye,[B("div",Se,[(j(!0),X(ge,null,fe(r(z),(s,F)=>(j(),X("div",{key:F,class:"floor"},[B("img",{src:s,class:"floorImg",onMousedown:h=>r(A)(h,"floor",F)},null,40,Ne)]))),128))]),B("div",Re,[w(r(U),{class:"tools"},{default:x(()=>[w(r(U),{class:"toolsLeft"},{default:x(()=>[w(r(R),{content:"\u8D77\u70B9\u7684\u6807\u5FD7",placement:"top"},{default:x(()=>[B("div",{class:"iconWrap",onClick:c[0]||(c[0]=s=>r(A)(s,"flag"))},[B("img",{src:N.value,alt:"",class:"iconImg"},null,8,Ke)])]),_:1}),w(r(R),{content:"\u6E05\u9664\u67D0\u4E2A\u683C\u5B50",placement:"top"},{default:x(()=>[B("div",{class:"iconWrap",onClick:c[1]||(c[1]=s=>r(A)(s,"eraser"))},[B("img",{src:r(ne),alt:"",class:"iconImg"},null,8,Oe)])]),_:1}),w(r(R),{content:"\u7EC8\u70B9\u7684\u6807\u5FD7",placement:"top"},{default:x(()=>[B("div",{class:"iconWrap",onClick:c[2]||(c[2]=s=>r(A)(s,"end"))},[B("img",{src:r(Z).terminal,alt:"",class:"iconImg"},null,8,He)])]),_:1})]),_:1}),w(r(U),null,{default:x(()=>[w(r(R),{content:"\u5207\u6362\u63A5\u4E0B\u6765\u7684\u654C\u4EBA\u8DEF\u5F84\u7684\u7D22\u5F15",placement:"top"},{default:x(()=>[w(r(O),{type:r(Qe)[r(e).curFlagIndex],onClick:k},{default:x(()=>[H(" \u5F53\u524D\u7684\u8DEF\u5F84\u662F: "+Ce(r(e).curFlagIndex+1),1)]),_:1},8,["type"])]),_:1})]),_:1}),w(r(U),null,{default:x(()=>[w(r(R),{content:"\u4EE5\u8BE5\u683C\u4E3A\u7D22\u5F15\u8D77\u59CB\uFF0C\u79FB\u52A8\u4E3A\u540E\u9762\u7684\u683C\u5B50\u8D4B\u503C",placement:"top"},{default:x(()=>[w(r(O),{type:"primary",onClick:c[3]||(c[3]=s=>r(A)(s,"nextAdd"))},{default:x(()=>[H(" Next +1 ")]),_:1})]),_:1}),w(r(R),{content:"\u4F7F\u8BE5\u683C\u7D22\u5F15\u7F6E\u4E3A\u96F6",placement:"top"},{default:x(()=>[w(r(O),{size:"small",onClick:c[4]||(c[4]=s=>r(A)(s,"zeroing"))},{default:x(()=>[H(" \u7D22\u5F15\u7F6E 0 ")]),_:1})]),_:1}),w(r(R),{content:"\u4F7F\u8BE5\u683C\u7D22\u5F15\u52A0\u4E00",placement:"top"},{default:x(()=>[w(r(O),{size:"small",onClick:c[5]||(c[5]=s=>r(A)(s,"oneselfAdd"))},{default:x(()=>[H(" \u7D22\u5F15 +1 ")]),_:1})]),_:1}),w(r(R),{content:"\u4F7F\u8BE5\u683C\u7D22\u5F15\u51CF\u4E00",placement:"top"},{default:x(()=>[w(r(O),{size:"small",onClick:c[6]||(c[6]=s=>r(A)(s,"oneselfMinus"))},{default:x(()=>[H(" \u7D22\u5F15 -1 ")]),_:1})]),_:1})]),_:1})]),_:1}),B("div",{ref_key:"canvasWrapRef",ref:t,class:"createMap-canvasWrap"},[B("canvas",{ref_key:"canvasRef",ref:o,width:r(e).canvasInfo.w,height:r(e).canvasInfo.h,style:q({width:r(e).canvasInfo.w/r(n).ratio+"px",height:r(e).canvasInfo.h/r(n).ratio+"px"})},null,12,ze)],512)]),B("div",{class:"mouseImg",style:q({top:(r(i).y||-999)+"px",left:(r(i).x||-999)+"px"}),onMousedown:c[7]||(c[7]=(...s)=>r(a)&&r(a)(...s)),onMouseup:c[8]||(c[8]=(...s)=>r(I)&&r(I)(...s)),onContextmenu:c[9]||(c[9]=Ie((...s)=>r(g)&&r(g)(...s),["prevent"]))},[B("img",{src:K.value,class:"mouseImg-img"},null,8,Ge)],36)]),w(r(U),{class:"createMap-bottom"},{default:x(()=>[B("div",null,[w(r(O),{type:"danger",onClick:m},{default:x(()=>[H("\u6E05\u7A7A\u753B\u5E03")]),_:1})]),B("div",null,[w(r(O),{onClick:v},{default:x(()=>[H("\u5BFC\u51FA\u6570\u636E")]),_:1})])]),_:1})])],4))}});const Ye=we(Je,[["__scopeId","data-v-042d5975"]]);export{Ye as default};
