var D0=Object.defineProperty;var O0=(Xn,Tn,ce)=>Tn in Xn?D0(Xn,Tn,{enumerable:!0,configurable:!0,writable:!0,value:ce}):Xn[Tn]=ce;var Zt=(Xn,Tn,ce)=>(O0(Xn,typeof Tn!="symbol"?Tn+"":Tn,ce),ce);(function(){"use strict";const Xn="http://lhh.codeape.site";function Tn(a,o=!1){var i=[],f;o?f=new OffscreenCanvas(100,100):f=document.createElement("canvas");var g=null,m={},c=null,_=null,b=-1,A=null,S=0;class I{constructor(W){this.data=W,this.len=W.length,this.pos=0}readByte(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return this.data instanceof Uint8Array?this.data[this.pos++]:this.data.charCodeAt(this.pos++)&255}readBytes(W){let F=[];for(let le=0;le<W;le++)F.push(this.readByte());return F}read(W){let F="";for(let le=0;le<W;le++)F+=String.fromCharCode(this.readByte());return F}readUnsigned(){let W=this.readBytes(2);return(W[1]<<8)+W[0]}}function C(E){let W=[];for(let F=7;F>=0;F--)W.push(!!(E&1<<F));return W}function O(E){return E.reduce(function(W,F){return W*2+F},0)}function G(E,W){let F=0;function le(Xe){let gn=0;for(let Fe=0;Fe<Xe;Fe++)W.charCodeAt(F>>3)&1<<(F&7)&&(gn|=1<<Fe),F++;return gn}let _e=[],de=1<<E,J=de+1,Le=E+1,xe=[];function hn(){xe=[],Le=E+1;for(let Xe=0;Xe<de;Xe++)xe[Xe]=[Xe];xe[de]=[],xe[J]=null}let Ee=null,Me=null;for(;;){if(Me=Ee,Ee=le(Le),Ee===de){hn();continue}if(Ee===J)break;if(Ee<xe.length)Me!==de&&xe.push(xe[Me].concat(xe[Ee][0]));else{if(Ee!==xe.length)throw new Error("Invalid LZW code.");xe.push(xe[Me].concat(xe[Me][0]))}_e.push.apply(_e,xe[Ee]),xe.length===1<<Le&&Le<12&&Le++}return _e}function V(){let E=null,W="";do E=c.readByte(),W+=c.read(E);while(E!==0);return W}function ee(E){g||(g=f.getContext("2d"));const W=i.length,F=E.lctFlag?E.lct:m.gct;W>0&&(_===3?b!==null&&b>-1?g.putImageData(i[b].data,0,0):g.clearRect(0,0,f.width,f.height):b=W-1,_===2&&g.clearRect(0,0,f.width,f.height));let le=g.getImageData(E.leftPos,E.topPos,E.width,E.height);E.pixels.forEach(function(_e,de){_e!==A&&(le.data[de*4+0]=F[_e][0],le.data[de*4+1]=F[_e][1],le.data[de*4+2]=F[_e][2],le.data[de*4+3]=255)}),g.putImageData(le,E.leftPos,E.topPos)}function ze(E){if(!g)return;var W;o?W=new OffscreenCanvas(m.width,m.height):W=document.createElement("canvas");var F=W.getContext("2d");const le=g.getImageData(0,0,m.width,m.height);F.putImageData(le,0,0),i.push({delay:E,img:W})}function ue(E){function W(J){c.readByte();var Le=C(c.readByte());J.reserved=Le.splice(0,3),J.disposalMethod=O(Le.splice(0,3)),_=J.disposalMethod,J.userInput=Le.shift(),J.transparencyGiven=Le.shift(),J.delayTime=c.readUnsigned(),S=J.delayTime,J.transparencyIndex=c.readByte(),J.terminator=c.readByte(),ze(J.delayTime),A=J.transparencyGiven?J.transparencyIndex:null}function F(J){J.comment=V()}function le(J){c.readByte(),J.ptHeader=c.readBytes(12),J.ptData=V()}function _e(J){var Le=function(hn){c.readByte(),hn.unknown=c.readByte(),hn.iterations=c.readUnsigned(),hn.terminator=c.readByte()};function xe(hn){hn.appData=V()}switch(c.readByte(),J.identifier=c.read(8),J.authCode=c.read(3),J.identifier){case"NETSCAPE":Le(J);break;default:xe(J);break}}function de(J){J.data=V()}switch(E.label=c.readByte(),E.label){case 249:E.extType="gce",W(E);break;case 254:E.extType="com",F(E);break;case 1:E.extType="pte",le(E);break;case 255:E.extType="app",_e(E);break;default:E.extType="unknown",de(E);break}}function Ie(E){function W(_e,de){let J=new Array(_e.length);const Le=_e.length/de;function xe(Fe,nr){const hi=_e.slice(nr*de,(nr+1)*de);J.splice.apply(J,[Fe*de,de].concat(hi))}const hn=[0,4,2,1],Ee=[8,8,4,2];let Me=0;for(var Xe=0;Xe<4;Xe++)for(var gn=hn[Xe];gn<Le;gn+=Ee[Xe])xe(gn,Me),Me++;return J}E.leftPos=c.readUnsigned(),E.topPos=c.readUnsigned(),E.width=c.readUnsigned(),E.height=c.readUnsigned();let F=C(c.readByte());E.lctFlag=F.shift(),E.interlaced=F.shift(),E.sorted=F.shift(),E.reserved=F.splice(0,2),E.lctSize=O(F.splice(0,3)),E.lctFlag&&(E.lct=Ye(1<<E.lctSize+1)),E.lzwMinCodeSize=c.readByte();const le=V();E.pixels=G(E.lzwMinCodeSize,le),E.interlaced&&(E.pixels=W(E.pixels,E.width)),ee(E)}function Ye(E){let W=[];for(let F=0;F<E;F++)W.push(c.readBytes(3));return W}function Ue(){if(m.sig=c.read(3),m.ver=c.read(3),m.sig!=="GIF")throw new Error("Not a GIF file.");m.width=c.readUnsigned(),m.height=c.readUnsigned();let E=C(c.readByte());m.gctFlag=E.shift(),m.colorRes=O(E.splice(0,3)),m.sorted=E.shift(),m.gctSize=O(E.splice(0,3)),m.bgColor=c.readByte(),m.pixelAspectRatio=c.readByte(),m.gctFlag&&(m.gct=Ye(1<<m.gctSize+1)),f.width=m.width,f.height=m.height,g=f.getContext("2d"),o||(f.style.width=m.width+"px",f.style.height=m.height+"px"),g.setTransform(1,0,0,1,0,0)}function xn(){return new Promise(E=>{W();function W(){let F={};switch(F.sentinel=c.readByte(),String.fromCharCode(F.sentinel)){case"!":F.type="ext",ue(F);break;case",":F.type="img",Ie(F);break;case";":F.type="eof",ze(S),E(i.slice(1,i.length));break;default:throw new Error("Unknown block: 0x"+F.sentinel.toString(16))}F.type!=="eof"&&setTimeout(W,0)}})}return new Promise((E,W)=>{const F=new XMLHttpRequest;F.open("GET",a,!0),"overrideMimeType"in F?F.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in F?F.responseType="arraybuffer":F.setRequestHeader("Accept-Charset","x-user-defined"),F.onload=function(le){this.status!=200&&doLoadError("xhr - response"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));let _e=this.response;_e.toString().indexOf("ArrayBuffer")>0&&(_e=new Uint8Array(_e)),c=new I(_e),Ue(),xn().then(de=>{E(de)})},F.onerror=function(le){console.log("\u6446\u70C2 error",le)},F.send()})}const ce=(a,o="legendTD")=>`${Xn}/${o?o+"/":""}${a}`;function Jt(a){return new Promise((o,i)=>{try{fetch(a).then(f=>f.blob()).then(f=>{createImageBitmap(f).then(g=>{o(g)})})}catch(f){console.log("loadImageWorker-error: ",f),i(f)}})}function Xr(a,o=!1){return new Promise((i,f)=>{Tn(a,o).then(g=>{i(g)}).catch(g=>{console.log("gifToStaticImg-error: ",g),f(g)})})}const pe=a=>ce(a,"zombies"),Zr={"zombie-flag":{name:"zombie-flag",w:1.5,h:1.5,curSpeed:.03,speed:.03,reward:50,hp:{cur:10,sum:10},imgType:"gif",imgSource:pe("zombie_0_move.gif"),isForward:!0,isFlip:!1},"zombie-1":{name:"zombie-1",w:1.5,h:1.5,curSpeed:.03,speed:.03,reward:10,hp:{cur:10,sum:10},imgType:"gif",imgSource:pe("zombie_1_move.gif"),isForward:!0,isFlip:!1},"zombie-2":{name:"zombie-2",w:1.5,h:1.5,curSpeed:.03,speed:.03,reward:15,hp:{cur:25,sum:25},imgType:"gif",imgSource:pe("zombie_2_move.gif"),isForward:!0,isFlip:!1},"zombie-3":{name:"zombie-3",w:1.5,h:1.5,curSpeed:.03,speed:.03,reward:20,hp:{cur:40,sum:40},imgType:"gif",imgSource:pe("zombie_3_move.gif"),isForward:!0,isFlip:!1},"iron-gate":{name:"iron-gate",w:1.5,h:1.5,curSpeed:.04,speed:.04,reward:30,hp:{cur:60,sum:60},imgType:"gif",imgSource:pe("zombie_4_move.gif"),isForward:!0,isFlip:!1},rugby:{name:"rugby",w:1.7,h:1.7,curSpeed:.06,speed:.06,reward:40,hp:{cur:120,sum:120},imgType:"gif",imgSource:pe("zombie_5_move.gif"),isForward:!0,isFlip:!1},newspaper:{name:"newspaper",w:1.7,h:1.7,curSpeed:.06,speed:.06,reward:-100,hp:{cur:30,sum:30},imgType:"gif",imgSource:pe("zombie_6_move.gif"),isForward:!0,isFlip:!1},"zombie-dance":{name:"zombie-dance",w:1.7,h:1.7,curSpeed:.04,speed:.04,reward:80,hp:{cur:350,sum:350},skill:{time:8e3},audioKey:"pvz-dance",imgType:"gif",imgSource:pe("zombie_7_move.gif"),isForward:!0,isFlip:!1},"pole-vault":{name:"pole-vault",w:2,h:1.7,curSpeed:.08,speed:.08,reward:30,hp:{cur:30,sum:30},imgType:"gif",imgSource:pe("zombie_8_move.gif"),isForward:!0,isFlip:!1},"ice-car":{name:"ice-car",w:1.8,h:1.8,curSpeed:.04,speed:.04,reward:110,hp:{cur:200,sum:200},imgType:"gif",imgSource:pe("zombie_9_move.gif"),isForward:!0,isFlip:!1,audioKey:"ice-car-frozen",skill:{time:6e3,r:3,keepTime:3e3,animation:{cur:120,sum:120}}},afu:{name:"afu",w:1.8,h:1.8,curSpeed:.03,speed:.03,reward:80,hp:{cur:500,sum:500},imgType:"png",imgSource:pe("afu.png"),isForward:!1,isFlip:!0},fulisha:{name:"fulisha",w:1.8,h:1.8,curSpeed:.03,speed:.03,reward:150,hp:{cur:800,sum:800},imgType:"png",imgSource:pe("fulisha.png"),isForward:!0,isFlip:!1,skill:{time:6e3},audioKey:"pvz-little"},"dance-little":{name:"dance-little",w:1.5,h:1.5,curSpeed:.04,speed:.04,reward:5,hp:{cur:15,sum:15},imgType:"gif",imgSource:pe("zombie_10_move.gif"),isForward:!0,isFlip:!1},"zombie-little":{name:"zombie-little",w:1.5,h:1.5,curSpeed:.06,speed:.06,reward:5,hp:{cur:10,sum:10},imgType:"gif",imgSource:pe("zombie_11_move.gif"),isForward:!0,isFlip:!1},kunkun:{name:"kunkun",w:1.8,h:1.8,curSpeed:.04,speed:.04,reward:160,hp:{cur:800,sum:800},imgType:"gif",imgSource:pe("kunkun.gif"),isForward:!1,isFlip:!1,skill:{time:1e4},audioKey:"kunkun"},rabbish:{name:"rabbish",w:1.8,h:1.8,curSpeed:.04,speed:.04,reward:50,hp:{cur:300,sum:300},imgType:"gif",imgSource:pe("rabbish_1.gif"),isForward:!1,isFlip:!0},"rabbish-2":{name:"rabbish-2",w:1.8,h:1.8,curSpeed:.04,speed:.04,reward:100,hp:{cur:400,sum:400},imgType:"gif",imgSource:pe("rabbish_2.gif"),isForward:!1,isFlip:!0,skill:{time:3e3,r:2,animation:{cur:80,sum:80}}},godzilla:{name:"godzilla",w:1.8,h:1.8,curSpeed:.03,speed:.03,reward:200,hp:{cur:400,sum:400},audioKey:"godzilla-fire",imgType:"png",imgSource:pe("godzilla.png"),isForward:!1,isFlip:!0,skill:{time:6e3,animation:{cur:60,sum:60},damage:4}},"zombie-boom":{name:"zombie-boom",w:1.5,h:1.5,curSpeed:.03,speed:.03,reward:80,hp:{cur:160,sum:160},audioKey:"pvz-boom",imgType:"gif",imgSource:pe("zombie-boom.gif"),dieImg:pe("zombie-boom-skill2.gif"),isForward:!0,isFlip:!1,skill:{time:3e3,r:2,animation:{cur:120,sum:120},damage:10,img:pe("zombie-boom-skill.gif"),audioKeys:["zombie-boom-countdown","zombie-boom-scream","zombie-boom-boom"]}}},Ms=10,Oa=["#0066a1","#49ca00","#409756","#eedf96","#f8d501","#cb732a","#e5a4ac","#be3f41","#e047db","#c0c0cb","#eaeaea"],Fa={start:ce("start.jpg"),terminal:ce("terminal.png"),floor:ce("floor-tile.png"),goldCoin:ce("gold-coin.png"),snow:ce("snow.png"),snowPoison:ce("snow-poison.png"),snowVertigo:ce("snow-vertigo1.png"),poison:ce("poison.png"),star:ce("star.png"),moon:ce("moon.png"),sun:ce("sun.png"),returnBlood:ce("return-blood.png"),frozen:ce("frozen.png"),building:ce("add.png"),sunGif:ce("Sun.gif")},j=a=>ce(a,"tower"),Jr={icestar:{name:"icestar",money:200,saleMoney:100,r:3,damage:1,hp:{cur:10,sum:10},targetNum:1,rate:900,speed:.12,slow:{num:2,time:5e3,type:"slow"},bSize:{w:.6,h:.6},audioKey:"slow-star",img:j("tower_slow.png"),bulletImg:j("bullet-star.png")},fengche:{name:"fengche",money:500,saleMoney:250,r:3.6,damage:2,hp:{cur:10,sum:10},targetNum:1,rate:1e3,speed:.14,bSize:{w:1,h:1},isThrough:!0,audioKey:"fengche",img:j("fengche.png"),bulletImg:j("bullet-fengche.png")},nanqiang:{name:"nanqiang",money:400,saleMoney:200,r:4,damage:3,hp:{cur:10,sum:10},targetNum:3,rate:1e3,speed:.14,bSize:{w:.4,h:.4},audioKey:"nanqiang",img:j("nanqiang.png"),bulletImg:j("bullet1.png"),cover:j("nanqiang-cover.png")},ejiate:{name:"ejiate",money:450,saleMoney:225,r:5,damage:1,hp:{cur:10,sum:10},targetNum:1,rate:200,speed:.16,bSize:{w:.4,h:.4},audioKey:"ejiate",img:j("ejiate.png"),bulletImg:j("bullet1.png"),cover:j("ejiate-cover.png")},jin:{name:"jin",money:800,saleMoney:400,r:6,damage:7,hp:{cur:10,sum:10},targetNum:1,rate:1200,speed:.2,bSize:{w:.4,h:.4},audioKey:"jin",img:j("jin.png"),bulletImg:j("bullet3.png"),cover:j("jin-cover.png")},ez:{name:"ez",money:600,saleMoney:300,r:4.5,damage:3,hp:{cur:10,sum:10},targetNum:1,rate:1200,speed:.16,bSize:{w:2,h:2},isThrough:!0,bulletInitDeg:170,audioKey:"ez",img:j("ez.png"),bulletImg:j("bullet-ez.png"),cover:j("ez-cover.png")},lanbo:{name:"lanbo",money:800,saleMoney:400,r:4,damage:2,hp:{cur:10,sum:10},targetNum:999,rate:1600,speed:.1,bSize:{w:1,h:1},audioKey:"lanbo",img:j("lanbo.png"),bulletImg:j("bullet-blisters.png"),cover:j("lanbo-cover.png")},aixi:{name:"aixi",money:700,saleMoney:350,r:4,damage:1,hp:{cur:10,sum:10},targetNum:9,rate:1200,speed:.12,slow:{num:2,time:5e3,type:"slow"},bSize:{w:.4,h:.4},bulletInitDeg:20,audioKey:"aixi",img:j("aixi.png"),bulletImg:j("bullet2.png"),cover:j("aixi-cover.png")},delaiwen:{name:"delaiwen",money:1200,saleMoney:600,r:4,damage:4,hp:{cur:10,sum:10},targetNum:2,rate:2e3,speed:.14,bSize:{w:1,h:1},isThrough:!0,isCharging:!1,bulletInitDeg:170,audioKey:"delaiwen",img:j("delaiwen.png"),bulletImg:j("bullet-delaiwen.png"),cover:j("delaiwen-cover.png")},huonan:{name:"huonan",money:900,saleMoney:450,r:4,damage:.1,hp:{cur:10,sum:10},targetNum:1,rate:100,speed:.14,bSize:{w:.1,h:.1},audioKey:"huonan",img:j("huonan.png"),bulletImg:j("bullet2.png"),cover:j("huonan-cover.png")},twitch:{name:"twitch",money:1e3,saleMoney:500,r:3,damage:1,addDamage:1,hp:{cur:10,sum:10},targetNum:1,rate:5e3,speed:.14,slow:{num:3,time:1500,type:"twitch"},poison:{damage:.5,time:5e3,bulletTime:6e3},bSize:{w:.5,h:.5},audioKey:"twitch",isSaveBullet:!0,img:j("twitch.png"),bulletImg:j("bullet-twitch.png"),cover:j("twitch-cover.png")}};var St=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(a,o){(function(){var i,f="4.17.21",g=200,m="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",_="Invalid `variable` option passed into `_.template`",b="__lodash_hash_undefined__",A=500,S="__lodash_placeholder__",I=1,C=2,O=4,G=1,V=2,ee=1,ze=2,ue=4,Ie=8,Ye=16,Ue=32,xn=64,E=128,W=256,F=512,le=30,_e="...",de=800,J=16,Le=1,xe=2,hn=3,Ee=1/0,Me=9007199254740991,Xe=17976931348623157e292,gn=0/0,Fe=4294967295,nr=Fe-1,hi=Fe>>>1,ql=[["ary",E],["bind",ee],["bindKey",ze],["curry",Ie],["curryRight",Ye],["flip",F],["partial",Ue],["partialRight",xn],["rearg",W]],lt="[object Arguments]",tr="[object Array]",Yl="[object AsyncFunction]",At="[object Boolean]",Et="[object Date]",Xl="[object DOMException]",rr="[object Error]",ir="[object Function]",ja="[object GeneratorFunction]",dn="[object Map]",Ct="[object Number]",Zl="[object Null]",En="[object Object]",eo="[object Promise]",Jl="[object Proxy]",Lt="[object RegExp]",mn="[object Set]",Mt="[object String]",ar="[object Symbol]",Ql="[object Undefined]",Rt="[object WeakMap]",Vl="[object WeakSet]",Dt="[object ArrayBuffer]",ft="[object DataView]",gi="[object Float32Array]",di="[object Float64Array]",mi="[object Int8Array]",pi="[object Int16Array]",vi="[object Int32Array]",_i="[object Uint8Array]",yi="[object Uint8ClampedArray]",wi="[object Uint16Array]",bi="[object Uint32Array]",jl=/\b__p \+= '';/g,ef=/\b(__p \+=) '' \+/g,nf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,no=/&(?:amp|lt|gt|quot|#39);/g,to=/[&<>"']/g,tf=RegExp(no.source),rf=RegExp(to.source),af=/<%-([\s\S]+?)%>/g,of=/<%([\s\S]+?)%>/g,ro=/<%=([\s\S]+?)%>/g,uf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sf=/^\w*$/,lf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xi=/[\\^$.*+?()[\]{}|]/g,ff=RegExp(xi.source),zi=/^\s+/,cf=/\s/,hf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gf=/\{\n\/\* \[wrapped with (.+)\] \*/,df=/,? & /,mf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pf=/[()=,{}\[\]\/\s]/,vf=/\\(\\)?/g,_f=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,io=/\w*$/,yf=/^[-+]0x[0-9a-f]+$/i,wf=/^0b[01]+$/i,bf=/^\[object .+?Constructor\]$/,xf=/^0o[0-7]+$/i,zf=/^(?:0|[1-9]\d*)$/,If=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,or=/($^)/,Sf=/['\n\r\u2028\u2029\\]/g,ur="\\ud800-\\udfff",Tf="\\u0300-\\u036f",Af="\\ufe20-\\ufe2f",Ef="\\u20d0-\\u20ff",ao=Tf+Af+Ef,oo="\\u2700-\\u27bf",uo="a-z\\xdf-\\xf6\\xf8-\\xff",Cf="\\xac\\xb1\\xd7\\xf7",Lf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Mf="\\u2000-\\u206f",Rf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",so="A-Z\\xc0-\\xd6\\xd8-\\xde",lo="\\ufe0e\\ufe0f",fo=Cf+Lf+Mf+Rf,Ii="['\u2019]",Df="["+ur+"]",co="["+fo+"]",sr="["+ao+"]",ho="\\d+",Of="["+oo+"]",go="["+uo+"]",mo="[^"+ur+fo+ho+oo+uo+so+"]",Si="\\ud83c[\\udffb-\\udfff]",Ff="(?:"+sr+"|"+Si+")",po="[^"+ur+"]",Ti="(?:\\ud83c[\\udde6-\\uddff]){2}",Ai="[\\ud800-\\udbff][\\udc00-\\udfff]",ct="["+so+"]",vo="\\u200d",_o="(?:"+go+"|"+mo+")",Bf="(?:"+ct+"|"+mo+")",yo="(?:"+Ii+"(?:d|ll|m|re|s|t|ve))?",wo="(?:"+Ii+"(?:D|LL|M|RE|S|T|VE))?",bo=Ff+"?",xo="["+lo+"]?",Pf="(?:"+vo+"(?:"+[po,Ti,Ai].join("|")+")"+xo+bo+")*",Nf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",zo=xo+bo+Pf,Wf="(?:"+[Of,Ti,Ai].join("|")+")"+zo,Uf="(?:"+[po+sr+"?",sr,Ti,Ai,Df].join("|")+")",Gf=RegExp(Ii,"g"),Kf=RegExp(sr,"g"),Ei=RegExp(Si+"(?="+Si+")|"+Uf+zo,"g"),$f=RegExp([ct+"?"+go+"+"+yo+"(?="+[co,ct,"$"].join("|")+")",Bf+"+"+wo+"(?="+[co,ct+_o,"$"].join("|")+")",ct+"?"+_o+"+"+yo,ct+"+"+wo,kf,Nf,ho,Wf].join("|"),"g"),Hf=RegExp("["+vo+ur+ao+lo+"]"),qf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xf=-1,se={};se[gi]=se[di]=se[mi]=se[pi]=se[vi]=se[_i]=se[yi]=se[wi]=se[bi]=!0,se[lt]=se[tr]=se[Dt]=se[At]=se[ft]=se[Et]=se[rr]=se[ir]=se[dn]=se[Ct]=se[En]=se[Lt]=se[mn]=se[Mt]=se[Rt]=!1;var oe={};oe[lt]=oe[tr]=oe[Dt]=oe[ft]=oe[At]=oe[Et]=oe[gi]=oe[di]=oe[mi]=oe[pi]=oe[vi]=oe[dn]=oe[Ct]=oe[En]=oe[Lt]=oe[mn]=oe[Mt]=oe[ar]=oe[_i]=oe[yi]=oe[wi]=oe[bi]=!0,oe[rr]=oe[ir]=oe[Rt]=!1;var Zf={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Jf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Vf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jf=parseFloat,ec=parseInt,Io=typeof St=="object"&&St&&St.Object===Object&&St,nc=typeof self=="object"&&self&&self.Object===Object&&self,Re=Io||nc||Function("return this")(),Ci=o&&!o.nodeType&&o,Qn=Ci&&!0&&a&&!a.nodeType&&a,So=Qn&&Qn.exports===Ci,Li=So&&Io.process,tn=function(){try{var p=Qn&&Qn.require&&Qn.require("util").types;return p||Li&&Li.binding&&Li.binding("util")}catch{}}(),To=tn&&tn.isArrayBuffer,Ao=tn&&tn.isDate,Eo=tn&&tn.isMap,Co=tn&&tn.isRegExp,Lo=tn&&tn.isSet,Mo=tn&&tn.isTypedArray;function Ze(p,w,y){switch(y.length){case 0:return p.call(w);case 1:return p.call(w,y[0]);case 2:return p.call(w,y[0],y[1]);case 3:return p.call(w,y[0],y[1],y[2])}return p.apply(w,y)}function tc(p,w,y,M){for(var U=-1,ne=p==null?0:p.length;++U<ne;){var Se=p[U];w(M,Se,y(Se),p)}return M}function rn(p,w){for(var y=-1,M=p==null?0:p.length;++y<M&&w(p[y],y,p)!==!1;);return p}function rc(p,w){for(var y=p==null?0:p.length;y--&&w(p[y],y,p)!==!1;);return p}function Ro(p,w){for(var y=-1,M=p==null?0:p.length;++y<M;)if(!w(p[y],y,p))return!1;return!0}function kn(p,w){for(var y=-1,M=p==null?0:p.length,U=0,ne=[];++y<M;){var Se=p[y];w(Se,y,p)&&(ne[U++]=Se)}return ne}function lr(p,w){var y=p==null?0:p.length;return!!y&&ht(p,w,0)>-1}function Mi(p,w,y){for(var M=-1,U=p==null?0:p.length;++M<U;)if(y(w,p[M]))return!0;return!1}function fe(p,w){for(var y=-1,M=p==null?0:p.length,U=Array(M);++y<M;)U[y]=w(p[y],y,p);return U}function Wn(p,w){for(var y=-1,M=w.length,U=p.length;++y<M;)p[U+y]=w[y];return p}function Ri(p,w,y,M){var U=-1,ne=p==null?0:p.length;for(M&&ne&&(y=p[++U]);++U<ne;)y=w(y,p[U],U,p);return y}function ic(p,w,y,M){var U=p==null?0:p.length;for(M&&U&&(y=p[--U]);U--;)y=w(y,p[U],U,p);return y}function Di(p,w){for(var y=-1,M=p==null?0:p.length;++y<M;)if(w(p[y],y,p))return!0;return!1}var ac=Oi("length");function oc(p){return p.split("")}function uc(p){return p.match(mf)||[]}function Do(p,w,y){var M;return y(p,function(U,ne,Se){if(w(U,ne,Se))return M=ne,!1}),M}function fr(p,w,y,M){for(var U=p.length,ne=y+(M?1:-1);M?ne--:++ne<U;)if(w(p[ne],ne,p))return ne;return-1}function ht(p,w,y){return w===w?yc(p,w,y):fr(p,Oo,y)}function sc(p,w,y,M){for(var U=y-1,ne=p.length;++U<ne;)if(M(p[U],w))return U;return-1}function Oo(p){return p!==p}function Fo(p,w){var y=p==null?0:p.length;return y?Bi(p,w)/y:gn}function Oi(p){return function(w){return w==null?i:w[p]}}function Fi(p){return function(w){return p==null?i:p[w]}}function Bo(p,w,y,M,U){return U(p,function(ne,Se,ie){y=M?(M=!1,ne):w(y,ne,Se,ie)}),y}function lc(p,w){var y=p.length;for(p.sort(w);y--;)p[y]=p[y].value;return p}function Bi(p,w){for(var y,M=-1,U=p.length;++M<U;){var ne=w(p[M]);ne!==i&&(y=y===i?ne:y+ne)}return y}function Pi(p,w){for(var y=-1,M=Array(p);++y<p;)M[y]=w(y);return M}function fc(p,w){return fe(w,function(y){return[y,p[y]]})}function Po(p){return p&&p.slice(0,Uo(p)+1).replace(zi,"")}function Je(p){return function(w){return p(w)}}function Ni(p,w){return fe(w,function(y){return p[y]})}function Ot(p,w){return p.has(w)}function No(p,w){for(var y=-1,M=p.length;++y<M&&ht(w,p[y],0)>-1;);return y}function ko(p,w){for(var y=p.length;y--&&ht(w,p[y],0)>-1;);return y}function cc(p,w){for(var y=p.length,M=0;y--;)p[y]===w&&++M;return M}var hc=Fi(Zf),gc=Fi(Jf);function dc(p){return"\\"+Vf[p]}function mc(p,w){return p==null?i:p[w]}function gt(p){return Hf.test(p)}function pc(p){return qf.test(p)}function vc(p){for(var w,y=[];!(w=p.next()).done;)y.push(w.value);return y}function ki(p){var w=-1,y=Array(p.size);return p.forEach(function(M,U){y[++w]=[U,M]}),y}function Wo(p,w){return function(y){return p(w(y))}}function Un(p,w){for(var y=-1,M=p.length,U=0,ne=[];++y<M;){var Se=p[y];(Se===w||Se===S)&&(p[y]=S,ne[U++]=y)}return ne}function cr(p){var w=-1,y=Array(p.size);return p.forEach(function(M){y[++w]=M}),y}function _c(p){var w=-1,y=Array(p.size);return p.forEach(function(M){y[++w]=[M,M]}),y}function yc(p,w,y){for(var M=y-1,U=p.length;++M<U;)if(p[M]===w)return M;return-1}function wc(p,w,y){for(var M=y+1;M--;)if(p[M]===w)return M;return M}function dt(p){return gt(p)?xc(p):ac(p)}function pn(p){return gt(p)?zc(p):oc(p)}function Uo(p){for(var w=p.length;w--&&cf.test(p.charAt(w)););return w}var bc=Fi(Qf);function xc(p){for(var w=Ei.lastIndex=0;Ei.test(p);)++w;return w}function zc(p){return p.match(Ei)||[]}function Ic(p){return p.match($f)||[]}var Sc=function p(w){w=w==null?Re:mt.defaults(Re.Object(),w,mt.pick(Re,Yf));var y=w.Array,M=w.Date,U=w.Error,ne=w.Function,Se=w.Math,ie=w.Object,Wi=w.RegExp,Tc=w.String,an=w.TypeError,hr=y.prototype,Ac=ne.prototype,pt=ie.prototype,gr=w["__core-js_shared__"],dr=Ac.toString,re=pt.hasOwnProperty,Ec=0,Go=function(){var e=/[^.]+$/.exec(gr&&gr.keys&&gr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),mr=pt.toString,Cc=dr.call(ie),Lc=Re._,Mc=Wi("^"+dr.call(re).replace(xi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pr=So?w.Buffer:i,Gn=w.Symbol,vr=w.Uint8Array,Ko=pr?pr.allocUnsafe:i,_r=Wo(ie.getPrototypeOf,ie),$o=ie.create,Ho=pt.propertyIsEnumerable,yr=hr.splice,qo=Gn?Gn.isConcatSpreadable:i,Ft=Gn?Gn.iterator:i,Vn=Gn?Gn.toStringTag:i,wr=function(){try{var e=rt(ie,"defineProperty");return e({},"",{}),e}catch{}}(),Rc=w.clearTimeout!==Re.clearTimeout&&w.clearTimeout,Dc=M&&M.now!==Re.Date.now&&M.now,Oc=w.setTimeout!==Re.setTimeout&&w.setTimeout,br=Se.ceil,xr=Se.floor,Ui=ie.getOwnPropertySymbols,Fc=pr?pr.isBuffer:i,Yo=w.isFinite,Bc=hr.join,Pc=Wo(ie.keys,ie),Te=Se.max,Be=Se.min,Nc=M.now,kc=w.parseInt,Xo=Se.random,Wc=hr.reverse,Gi=rt(w,"DataView"),Bt=rt(w,"Map"),Ki=rt(w,"Promise"),vt=rt(w,"Set"),Pt=rt(w,"WeakMap"),Nt=rt(ie,"create"),zr=Pt&&new Pt,_t={},Uc=it(Gi),Gc=it(Bt),Kc=it(Ki),$c=it(vt),Hc=it(Pt),Ir=Gn?Gn.prototype:i,kt=Ir?Ir.valueOf:i,Zo=Ir?Ir.toString:i;function s(e){if(me(e)&&!K(e)&&!(e instanceof X)){if(e instanceof on)return e;if(re.call(e,"__wrapped__"))return Ju(e)}return new on(e)}var yt=function(){function e(){}return function(n){if(!he(n))return{};if($o)return $o(n);e.prototype=n;var t=new e;return e.prototype=i,t}}();function Sr(){}function on(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=i}s.templateSettings={escape:af,evaluate:of,interpolate:ro,variable:"",imports:{_:s}},s.prototype=Sr.prototype,s.prototype.constructor=s,on.prototype=yt(Sr.prototype),on.prototype.constructor=on;function X(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Fe,this.__views__=[]}function qc(){var e=new X(this.__wrapped__);return e.__actions__=Ge(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ge(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ge(this.__views__),e}function Yc(){if(this.__filtered__){var e=new X(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Xc(){var e=this.__wrapped__.value(),n=this.__dir__,t=K(e),r=n<0,u=t?e.length:0,l=og(0,u,this.__views__),h=l.start,d=l.end,v=d-h,x=r?d:h-1,z=this.__iteratees__,T=z.length,L=0,R=Be(v,this.__takeCount__);if(!t||!r&&u==v&&R==v)return yu(e,this.__actions__);var P=[];e:for(;v--&&L<R;){x+=n;for(var H=-1,N=e[x];++H<T;){var Y=z[H],Z=Y.iteratee,je=Y.type,We=Z(N);if(je==xe)N=We;else if(!We){if(je==Le)continue e;break e}}P[L++]=N}return P}X.prototype=yt(Sr.prototype),X.prototype.constructor=X;function jn(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Zc(){this.__data__=Nt?Nt(null):{},this.size=0}function Jc(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function Qc(e){var n=this.__data__;if(Nt){var t=n[e];return t===b?i:t}return re.call(n,e)?n[e]:i}function Vc(e){var n=this.__data__;return Nt?n[e]!==i:re.call(n,e)}function jc(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Nt&&n===i?b:n,this}jn.prototype.clear=Zc,jn.prototype.delete=Jc,jn.prototype.get=Qc,jn.prototype.has=Vc,jn.prototype.set=jc;function Cn(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function eh(){this.__data__=[],this.size=0}function nh(e){var n=this.__data__,t=Tr(n,e);if(t<0)return!1;var r=n.length-1;return t==r?n.pop():yr.call(n,t,1),--this.size,!0}function th(e){var n=this.__data__,t=Tr(n,e);return t<0?i:n[t][1]}function rh(e){return Tr(this.__data__,e)>-1}function ih(e,n){var t=this.__data__,r=Tr(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this}Cn.prototype.clear=eh,Cn.prototype.delete=nh,Cn.prototype.get=th,Cn.prototype.has=rh,Cn.prototype.set=ih;function Ln(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function ah(){this.size=0,this.__data__={hash:new jn,map:new(Bt||Cn),string:new jn}}function oh(e){var n=Nr(this,e).delete(e);return this.size-=n?1:0,n}function uh(e){return Nr(this,e).get(e)}function sh(e){return Nr(this,e).has(e)}function lh(e,n){var t=Nr(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this}Ln.prototype.clear=ah,Ln.prototype.delete=oh,Ln.prototype.get=uh,Ln.prototype.has=sh,Ln.prototype.set=lh;function et(e){var n=-1,t=e==null?0:e.length;for(this.__data__=new Ln;++n<t;)this.add(e[n])}function fh(e){return this.__data__.set(e,b),this}function ch(e){return this.__data__.has(e)}et.prototype.add=et.prototype.push=fh,et.prototype.has=ch;function vn(e){var n=this.__data__=new Cn(e);this.size=n.size}function hh(){this.__data__=new Cn,this.size=0}function gh(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}function dh(e){return this.__data__.get(e)}function mh(e){return this.__data__.has(e)}function ph(e,n){var t=this.__data__;if(t instanceof Cn){var r=t.__data__;if(!Bt||r.length<g-1)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new Ln(r)}return t.set(e,n),this.size=t.size,this}vn.prototype.clear=hh,vn.prototype.delete=gh,vn.prototype.get=dh,vn.prototype.has=mh,vn.prototype.set=ph;function Jo(e,n){var t=K(e),r=!t&&at(e),u=!t&&!r&&Yn(e),l=!t&&!r&&!u&&zt(e),h=t||r||u||l,d=h?Pi(e.length,Tc):[],v=d.length;for(var x in e)(n||re.call(e,x))&&!(h&&(x=="length"||u&&(x=="offset"||x=="parent")||l&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||On(x,v)))&&d.push(x);return d}function Qo(e){var n=e.length;return n?e[ea(0,n-1)]:i}function vh(e,n){return kr(Ge(e),nt(n,0,e.length))}function _h(e){return kr(Ge(e))}function $i(e,n,t){(t!==i&&!_n(e[n],t)||t===i&&!(n in e))&&Mn(e,n,t)}function Wt(e,n,t){var r=e[n];(!(re.call(e,n)&&_n(r,t))||t===i&&!(n in e))&&Mn(e,n,t)}function Tr(e,n){for(var t=e.length;t--;)if(_n(e[t][0],n))return t;return-1}function yh(e,n,t,r){return Kn(e,function(u,l,h){n(r,u,t(u),h)}),r}function Vo(e,n){return e&&In(n,Ce(n),e)}function wh(e,n){return e&&In(n,$e(n),e)}function Mn(e,n,t){n=="__proto__"&&wr?wr(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function Hi(e,n){for(var t=-1,r=n.length,u=y(r),l=e==null;++t<r;)u[t]=l?i:Sa(e,n[t]);return u}function nt(e,n,t){return e===e&&(t!==i&&(e=e<=t?e:t),n!==i&&(e=e>=n?e:n)),e}function un(e,n,t,r,u,l){var h,d=n&I,v=n&C,x=n&O;if(t&&(h=u?t(e,r,u,l):t(e)),h!==i)return h;if(!he(e))return e;var z=K(e);if(z){if(h=sg(e),!d)return Ge(e,h)}else{var T=Pe(e),L=T==ir||T==ja;if(Yn(e))return xu(e,d);if(T==En||T==lt||L&&!u){if(h=v||L?{}:Uu(e),!d)return v?Qh(e,wh(h,e)):Jh(e,Vo(h,e))}else{if(!oe[T])return u?e:{};h=lg(e,T,d)}}l||(l=new vn);var R=l.get(e);if(R)return R;l.set(e,h),ps(e)?e.forEach(function(N){h.add(un(N,n,t,N,e,l))}):ds(e)&&e.forEach(function(N,Y){h.set(Y,un(N,n,t,Y,e,l))});var P=x?v?ca:fa:v?$e:Ce,H=z?i:P(e);return rn(H||e,function(N,Y){H&&(Y=N,N=e[Y]),Wt(h,Y,un(N,n,t,Y,e,l))}),h}function bh(e){var n=Ce(e);return function(t){return jo(t,e,n)}}function jo(e,n,t){var r=t.length;if(e==null)return!r;for(e=ie(e);r--;){var u=t[r],l=n[u],h=e[u];if(h===i&&!(u in e)||!l(h))return!1}return!0}function eu(e,n,t){if(typeof e!="function")throw new an(c);return Yt(function(){e.apply(i,t)},n)}function Ut(e,n,t,r){var u=-1,l=lr,h=!0,d=e.length,v=[],x=n.length;if(!d)return v;t&&(n=fe(n,Je(t))),r?(l=Mi,h=!1):n.length>=g&&(l=Ot,h=!1,n=new et(n));e:for(;++u<d;){var z=e[u],T=t==null?z:t(z);if(z=r||z!==0?z:0,h&&T===T){for(var L=x;L--;)if(n[L]===T)continue e;v.push(z)}else l(n,T,r)||v.push(z)}return v}var Kn=Au(zn),nu=Au(Yi,!0);function xh(e,n){var t=!0;return Kn(e,function(r,u,l){return t=!!n(r,u,l),t}),t}function Ar(e,n,t){for(var r=-1,u=e.length;++r<u;){var l=e[r],h=n(l);if(h!=null&&(d===i?h===h&&!Ve(h):t(h,d)))var d=h,v=l}return v}function zh(e,n,t,r){var u=e.length;for(t=$(t),t<0&&(t=-t>u?0:u+t),r=r===i||r>u?u:$(r),r<0&&(r+=u),r=t>r?0:_s(r);t<r;)e[t++]=n;return e}function tu(e,n){var t=[];return Kn(e,function(r,u,l){n(r,u,l)&&t.push(r)}),t}function De(e,n,t,r,u){var l=-1,h=e.length;for(t||(t=cg),u||(u=[]);++l<h;){var d=e[l];n>0&&t(d)?n>1?De(d,n-1,t,r,u):Wn(u,d):r||(u[u.length]=d)}return u}var qi=Eu(),ru=Eu(!0);function zn(e,n){return e&&qi(e,n,Ce)}function Yi(e,n){return e&&ru(e,n,Ce)}function Er(e,n){return kn(n,function(t){return Fn(e[t])})}function tt(e,n){n=Hn(n,e);for(var t=0,r=n.length;e!=null&&t<r;)e=e[Sn(n[t++])];return t&&t==r?e:i}function iu(e,n,t){var r=n(e);return K(e)?r:Wn(r,t(e))}function Ne(e){return e==null?e===i?Ql:Zl:Vn&&Vn in ie(e)?ag(e):_g(e)}function Xi(e,n){return e>n}function Ih(e,n){return e!=null&&re.call(e,n)}function Sh(e,n){return e!=null&&n in ie(e)}function Th(e,n,t){return e>=Be(n,t)&&e<Te(n,t)}function Zi(e,n,t){for(var r=t?Mi:lr,u=e[0].length,l=e.length,h=l,d=y(l),v=1/0,x=[];h--;){var z=e[h];h&&n&&(z=fe(z,Je(n))),v=Be(z.length,v),d[h]=!t&&(n||u>=120&&z.length>=120)?new et(h&&z):i}z=e[0];var T=-1,L=d[0];e:for(;++T<u&&x.length<v;){var R=z[T],P=n?n(R):R;if(R=t||R!==0?R:0,!(L?Ot(L,P):r(x,P,t))){for(h=l;--h;){var H=d[h];if(!(H?Ot(H,P):r(e[h],P,t)))continue e}L&&L.push(P),x.push(R)}}return x}function Ah(e,n,t,r){return zn(e,function(u,l,h){n(r,t(u),l,h)}),r}function Gt(e,n,t){n=Hn(n,e),e=Hu(e,n);var r=e==null?e:e[Sn(ln(n))];return r==null?i:Ze(r,e,t)}function au(e){return me(e)&&Ne(e)==lt}function Eh(e){return me(e)&&Ne(e)==Dt}function Ch(e){return me(e)&&Ne(e)==Et}function Kt(e,n,t,r,u){return e===n?!0:e==null||n==null||!me(e)&&!me(n)?e!==e&&n!==n:Lh(e,n,t,r,Kt,u)}function Lh(e,n,t,r,u,l){var h=K(e),d=K(n),v=h?tr:Pe(e),x=d?tr:Pe(n);v=v==lt?En:v,x=x==lt?En:x;var z=v==En,T=x==En,L=v==x;if(L&&Yn(e)){if(!Yn(n))return!1;h=!0,z=!1}if(L&&!z)return l||(l=new vn),h||zt(e)?Nu(e,n,t,r,u,l):rg(e,n,v,t,r,u,l);if(!(t&G)){var R=z&&re.call(e,"__wrapped__"),P=T&&re.call(n,"__wrapped__");if(R||P){var H=R?e.value():e,N=P?n.value():n;return l||(l=new vn),u(H,N,t,r,l)}}return L?(l||(l=new vn),ig(e,n,t,r,u,l)):!1}function Mh(e){return me(e)&&Pe(e)==dn}function Ji(e,n,t,r){var u=t.length,l=u,h=!r;if(e==null)return!l;for(e=ie(e);u--;){var d=t[u];if(h&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++u<l;){d=t[u];var v=d[0],x=e[v],z=d[1];if(h&&d[2]){if(x===i&&!(v in e))return!1}else{var T=new vn;if(r)var L=r(x,z,v,e,n,T);if(!(L===i?Kt(z,x,G|V,r,T):L))return!1}}return!0}function ou(e){if(!he(e)||gg(e))return!1;var n=Fn(e)?Mc:bf;return n.test(it(e))}function Rh(e){return me(e)&&Ne(e)==Lt}function Dh(e){return me(e)&&Pe(e)==mn}function Oh(e){return me(e)&&Hr(e.length)&&!!se[Ne(e)]}function uu(e){return typeof e=="function"?e:e==null?He:typeof e=="object"?K(e)?fu(e[0],e[1]):lu(e):Cs(e)}function Qi(e){if(!qt(e))return Pc(e);var n=[];for(var t in ie(e))re.call(e,t)&&t!="constructor"&&n.push(t);return n}function Fh(e){if(!he(e))return vg(e);var n=qt(e),t=[];for(var r in e)r=="constructor"&&(n||!re.call(e,r))||t.push(r);return t}function Vi(e,n){return e<n}function su(e,n){var t=-1,r=Ke(e)?y(e.length):[];return Kn(e,function(u,l,h){r[++t]=n(u,l,h)}),r}function lu(e){var n=ga(e);return n.length==1&&n[0][2]?Ku(n[0][0],n[0][1]):function(t){return t===e||Ji(t,e,n)}}function fu(e,n){return ma(e)&&Gu(n)?Ku(Sn(e),n):function(t){var r=Sa(t,e);return r===i&&r===n?Ta(t,e):Kt(n,r,G|V)}}function Cr(e,n,t,r,u){e!==n&&qi(n,function(l,h){if(u||(u=new vn),he(l))Bh(e,n,h,t,Cr,r,u);else{var d=r?r(va(e,h),l,h+"",e,n,u):i;d===i&&(d=l),$i(e,h,d)}},$e)}function Bh(e,n,t,r,u,l,h){var d=va(e,t),v=va(n,t),x=h.get(v);if(x){$i(e,t,x);return}var z=l?l(d,v,t+"",e,n,h):i,T=z===i;if(T){var L=K(v),R=!L&&Yn(v),P=!L&&!R&&zt(v);z=v,L||R||P?K(d)?z=d:ye(d)?z=Ge(d):R?(T=!1,z=xu(v,!0)):P?(T=!1,z=zu(v,!0)):z=[]:Xt(v)||at(v)?(z=d,at(d)?z=ys(d):(!he(d)||Fn(d))&&(z=Uu(v))):T=!1}T&&(h.set(v,z),u(z,v,r,l,h),h.delete(v)),$i(e,t,z)}function cu(e,n){var t=e.length;if(!!t)return n+=n<0?t:0,On(n,t)?e[n]:i}function hu(e,n,t){n.length?n=fe(n,function(l){return K(l)?function(h){return tt(h,l.length===1?l[0]:l)}:l}):n=[He];var r=-1;n=fe(n,Je(B()));var u=su(e,function(l,h,d){var v=fe(n,function(x){return x(l)});return{criteria:v,index:++r,value:l}});return lc(u,function(l,h){return Zh(l,h,t)})}function Ph(e,n){return gu(e,n,function(t,r){return Ta(e,r)})}function gu(e,n,t){for(var r=-1,u=n.length,l={};++r<u;){var h=n[r],d=tt(e,h);t(d,h)&&$t(l,Hn(h,e),d)}return l}function Nh(e){return function(n){return tt(n,e)}}function ji(e,n,t,r){var u=r?sc:ht,l=-1,h=n.length,d=e;for(e===n&&(n=Ge(n)),t&&(d=fe(e,Je(t)));++l<h;)for(var v=0,x=n[l],z=t?t(x):x;(v=u(d,z,v,r))>-1;)d!==e&&yr.call(d,v,1),yr.call(e,v,1);return e}function du(e,n){for(var t=e?n.length:0,r=t-1;t--;){var u=n[t];if(t==r||u!==l){var l=u;On(u)?yr.call(e,u,1):ra(e,u)}}return e}function ea(e,n){return e+xr(Xo()*(n-e+1))}function kh(e,n,t,r){for(var u=-1,l=Te(br((n-e)/(t||1)),0),h=y(l);l--;)h[r?l:++u]=e,e+=t;return h}function na(e,n){var t="";if(!e||n<1||n>Me)return t;do n%2&&(t+=e),n=xr(n/2),n&&(e+=e);while(n);return t}function q(e,n){return _a($u(e,n,He),e+"")}function Wh(e){return Qo(It(e))}function Uh(e,n){var t=It(e);return kr(t,nt(n,0,t.length))}function $t(e,n,t,r){if(!he(e))return e;n=Hn(n,e);for(var u=-1,l=n.length,h=l-1,d=e;d!=null&&++u<l;){var v=Sn(n[u]),x=t;if(v==="__proto__"||v==="constructor"||v==="prototype")return e;if(u!=h){var z=d[v];x=r?r(z,v,d):i,x===i&&(x=he(z)?z:On(n[u+1])?[]:{})}Wt(d,v,x),d=d[v]}return e}var mu=zr?function(e,n){return zr.set(e,n),e}:He,Gh=wr?function(e,n){return wr(e,"toString",{configurable:!0,enumerable:!1,value:Ea(n),writable:!0})}:He;function Kh(e){return kr(It(e))}function sn(e,n,t){var r=-1,u=e.length;n<0&&(n=-n>u?0:u+n),t=t>u?u:t,t<0&&(t+=u),u=n>t?0:t-n>>>0,n>>>=0;for(var l=y(u);++r<u;)l[r]=e[r+n];return l}function $h(e,n){var t;return Kn(e,function(r,u,l){return t=n(r,u,l),!t}),!!t}function Lr(e,n,t){var r=0,u=e==null?r:e.length;if(typeof n=="number"&&n===n&&u<=hi){for(;r<u;){var l=r+u>>>1,h=e[l];h!==null&&!Ve(h)&&(t?h<=n:h<n)?r=l+1:u=l}return u}return ta(e,n,He,t)}function ta(e,n,t,r){var u=0,l=e==null?0:e.length;if(l===0)return 0;n=t(n);for(var h=n!==n,d=n===null,v=Ve(n),x=n===i;u<l;){var z=xr((u+l)/2),T=t(e[z]),L=T!==i,R=T===null,P=T===T,H=Ve(T);if(h)var N=r||P;else x?N=P&&(r||L):d?N=P&&L&&(r||!R):v?N=P&&L&&!R&&(r||!H):R||H?N=!1:N=r?T<=n:T<n;N?u=z+1:l=z}return Be(l,nr)}function pu(e,n){for(var t=-1,r=e.length,u=0,l=[];++t<r;){var h=e[t],d=n?n(h):h;if(!t||!_n(d,v)){var v=d;l[u++]=h===0?0:h}}return l}function vu(e){return typeof e=="number"?e:Ve(e)?gn:+e}function Qe(e){if(typeof e=="string")return e;if(K(e))return fe(e,Qe)+"";if(Ve(e))return Zo?Zo.call(e):"";var n=e+"";return n=="0"&&1/e==-Ee?"-0":n}function $n(e,n,t){var r=-1,u=lr,l=e.length,h=!0,d=[],v=d;if(t)h=!1,u=Mi;else if(l>=g){var x=n?null:ng(e);if(x)return cr(x);h=!1,u=Ot,v=new et}else v=n?[]:d;e:for(;++r<l;){var z=e[r],T=n?n(z):z;if(z=t||z!==0?z:0,h&&T===T){for(var L=v.length;L--;)if(v[L]===T)continue e;n&&v.push(T),d.push(z)}else u(v,T,t)||(v!==d&&v.push(T),d.push(z))}return d}function ra(e,n){return n=Hn(n,e),e=Hu(e,n),e==null||delete e[Sn(ln(n))]}function _u(e,n,t,r){return $t(e,n,t(tt(e,n)),r)}function Mr(e,n,t,r){for(var u=e.length,l=r?u:-1;(r?l--:++l<u)&&n(e[l],l,e););return t?sn(e,r?0:l,r?l+1:u):sn(e,r?l+1:0,r?u:l)}function yu(e,n){var t=e;return t instanceof X&&(t=t.value()),Ri(n,function(r,u){return u.func.apply(u.thisArg,Wn([r],u.args))},t)}function ia(e,n,t){var r=e.length;if(r<2)return r?$n(e[0]):[];for(var u=-1,l=y(r);++u<r;)for(var h=e[u],d=-1;++d<r;)d!=u&&(l[u]=Ut(l[u]||h,e[d],n,t));return $n(De(l,1),n,t)}function wu(e,n,t){for(var r=-1,u=e.length,l=n.length,h={};++r<u;){var d=r<l?n[r]:i;t(h,e[r],d)}return h}function aa(e){return ye(e)?e:[]}function oa(e){return typeof e=="function"?e:He}function Hn(e,n){return K(e)?e:ma(e,n)?[e]:Zu(te(e))}var Hh=q;function qn(e,n,t){var r=e.length;return t=t===i?r:t,!n&&t>=r?e:sn(e,n,t)}var bu=Rc||function(e){return Re.clearTimeout(e)};function xu(e,n){if(n)return e.slice();var t=e.length,r=Ko?Ko(t):new e.constructor(t);return e.copy(r),r}function ua(e){var n=new e.constructor(e.byteLength);return new vr(n).set(new vr(e)),n}function qh(e,n){var t=n?ua(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}function Yh(e){var n=new e.constructor(e.source,io.exec(e));return n.lastIndex=e.lastIndex,n}function Xh(e){return kt?ie(kt.call(e)):{}}function zu(e,n){var t=n?ua(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function Iu(e,n){if(e!==n){var t=e!==i,r=e===null,u=e===e,l=Ve(e),h=n!==i,d=n===null,v=n===n,x=Ve(n);if(!d&&!x&&!l&&e>n||l&&h&&v&&!d&&!x||r&&h&&v||!t&&v||!u)return 1;if(!r&&!l&&!x&&e<n||x&&t&&u&&!r&&!l||d&&t&&u||!h&&u||!v)return-1}return 0}function Zh(e,n,t){for(var r=-1,u=e.criteria,l=n.criteria,h=u.length,d=t.length;++r<h;){var v=Iu(u[r],l[r]);if(v){if(r>=d)return v;var x=t[r];return v*(x=="desc"?-1:1)}}return e.index-n.index}function Su(e,n,t,r){for(var u=-1,l=e.length,h=t.length,d=-1,v=n.length,x=Te(l-h,0),z=y(v+x),T=!r;++d<v;)z[d]=n[d];for(;++u<h;)(T||u<l)&&(z[t[u]]=e[u]);for(;x--;)z[d++]=e[u++];return z}function Tu(e,n,t,r){for(var u=-1,l=e.length,h=-1,d=t.length,v=-1,x=n.length,z=Te(l-d,0),T=y(z+x),L=!r;++u<z;)T[u]=e[u];for(var R=u;++v<x;)T[R+v]=n[v];for(;++h<d;)(L||u<l)&&(T[R+t[h]]=e[u++]);return T}function Ge(e,n){var t=-1,r=e.length;for(n||(n=y(r));++t<r;)n[t]=e[t];return n}function In(e,n,t,r){var u=!t;t||(t={});for(var l=-1,h=n.length;++l<h;){var d=n[l],v=r?r(t[d],e[d],d,t,e):i;v===i&&(v=e[d]),u?Mn(t,d,v):Wt(t,d,v)}return t}function Jh(e,n){return In(e,da(e),n)}function Qh(e,n){return In(e,ku(e),n)}function Rr(e,n){return function(t,r){var u=K(t)?tc:yh,l=n?n():{};return u(t,e,B(r,2),l)}}function wt(e){return q(function(n,t){var r=-1,u=t.length,l=u>1?t[u-1]:i,h=u>2?t[2]:i;for(l=e.length>3&&typeof l=="function"?(u--,l):i,h&&ke(t[0],t[1],h)&&(l=u<3?i:l,u=1),n=ie(n);++r<u;){var d=t[r];d&&e(n,d,r,l)}return n})}function Au(e,n){return function(t,r){if(t==null)return t;if(!Ke(t))return e(t,r);for(var u=t.length,l=n?u:-1,h=ie(t);(n?l--:++l<u)&&r(h[l],l,h)!==!1;);return t}}function Eu(e){return function(n,t,r){for(var u=-1,l=ie(n),h=r(n),d=h.length;d--;){var v=h[e?d:++u];if(t(l[v],v,l)===!1)break}return n}}function Vh(e,n,t){var r=n&ee,u=Ht(e);function l(){var h=this&&this!==Re&&this instanceof l?u:e;return h.apply(r?t:this,arguments)}return l}function Cu(e){return function(n){n=te(n);var t=gt(n)?pn(n):i,r=t?t[0]:n.charAt(0),u=t?qn(t,1).join(""):n.slice(1);return r[e]()+u}}function bt(e){return function(n){return Ri(As(Ts(n).replace(Gf,"")),e,"")}}function Ht(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=yt(e.prototype),r=e.apply(t,n);return he(r)?r:t}}function jh(e,n,t){var r=Ht(e);function u(){for(var l=arguments.length,h=y(l),d=l,v=xt(u);d--;)h[d]=arguments[d];var x=l<3&&h[0]!==v&&h[l-1]!==v?[]:Un(h,v);if(l-=x.length,l<t)return Ou(e,n,Dr,u.placeholder,i,h,x,i,i,t-l);var z=this&&this!==Re&&this instanceof u?r:e;return Ze(z,this,h)}return u}function Lu(e){return function(n,t,r){var u=ie(n);if(!Ke(n)){var l=B(t,3);n=Ce(n),t=function(d){return l(u[d],d,u)}}var h=e(n,t,r);return h>-1?u[l?n[h]:h]:i}}function Mu(e){return Dn(function(n){var t=n.length,r=t,u=on.prototype.thru;for(e&&n.reverse();r--;){var l=n[r];if(typeof l!="function")throw new an(c);if(u&&!h&&Pr(l)=="wrapper")var h=new on([],!0)}for(r=h?r:t;++r<t;){l=n[r];var d=Pr(l),v=d=="wrapper"?ha(l):i;v&&pa(v[0])&&v[1]==(E|Ie|Ue|W)&&!v[4].length&&v[9]==1?h=h[Pr(v[0])].apply(h,v[3]):h=l.length==1&&pa(l)?h[d]():h.thru(l)}return function(){var x=arguments,z=x[0];if(h&&x.length==1&&K(z))return h.plant(z).value();for(var T=0,L=t?n[T].apply(this,x):z;++T<t;)L=n[T].call(this,L);return L}})}function Dr(e,n,t,r,u,l,h,d,v,x){var z=n&E,T=n&ee,L=n&ze,R=n&(Ie|Ye),P=n&F,H=L?i:Ht(e);function N(){for(var Y=arguments.length,Z=y(Y),je=Y;je--;)Z[je]=arguments[je];if(R)var We=xt(N),en=cc(Z,We);if(r&&(Z=Su(Z,r,u,R)),l&&(Z=Tu(Z,l,h,R)),Y-=en,R&&Y<x){var we=Un(Z,We);return Ou(e,n,Dr,N.placeholder,t,Z,we,d,v,x-Y)}var yn=T?t:this,Pn=L?yn[e]:e;return Y=Z.length,d?Z=yg(Z,d):P&&Y>1&&Z.reverse(),z&&v<Y&&(Z.length=v),this&&this!==Re&&this instanceof N&&(Pn=H||Ht(Pn)),Pn.apply(yn,Z)}return N}function Ru(e,n){return function(t,r){return Ah(t,e,n(r),{})}}function Or(e,n){return function(t,r){var u;if(t===i&&r===i)return n;if(t!==i&&(u=t),r!==i){if(u===i)return r;typeof t=="string"||typeof r=="string"?(t=Qe(t),r=Qe(r)):(t=vu(t),r=vu(r)),u=e(t,r)}return u}}function sa(e){return Dn(function(n){return n=fe(n,Je(B())),q(function(t){var r=this;return e(n,function(u){return Ze(u,r,t)})})})}function Fr(e,n){n=n===i?" ":Qe(n);var t=n.length;if(t<2)return t?na(n,e):n;var r=na(n,br(e/dt(n)));return gt(n)?qn(pn(r),0,e).join(""):r.slice(0,e)}function eg(e,n,t,r){var u=n&ee,l=Ht(e);function h(){for(var d=-1,v=arguments.length,x=-1,z=r.length,T=y(z+v),L=this&&this!==Re&&this instanceof h?l:e;++x<z;)T[x]=r[x];for(;v--;)T[x++]=arguments[++d];return Ze(L,u?t:this,T)}return h}function Du(e){return function(n,t,r){return r&&typeof r!="number"&&ke(n,t,r)&&(t=r=i),n=Bn(n),t===i?(t=n,n=0):t=Bn(t),r=r===i?n<t?1:-1:Bn(r),kh(n,t,r,e)}}function Br(e){return function(n,t){return typeof n=="string"&&typeof t=="string"||(n=fn(n),t=fn(t)),e(n,t)}}function Ou(e,n,t,r,u,l,h,d,v,x){var z=n&Ie,T=z?h:i,L=z?i:h,R=z?l:i,P=z?i:l;n|=z?Ue:xn,n&=~(z?xn:Ue),n&ue||(n&=~(ee|ze));var H=[e,n,u,R,T,P,L,d,v,x],N=t.apply(i,H);return pa(e)&&qu(N,H),N.placeholder=r,Yu(N,e,n)}function la(e){var n=Se[e];return function(t,r){if(t=fn(t),r=r==null?0:Be($(r),292),r&&Yo(t)){var u=(te(t)+"e").split("e"),l=n(u[0]+"e"+(+u[1]+r));return u=(te(l)+"e").split("e"),+(u[0]+"e"+(+u[1]-r))}return n(t)}}var ng=vt&&1/cr(new vt([,-0]))[1]==Ee?function(e){return new vt(e)}:Ma;function Fu(e){return function(n){var t=Pe(n);return t==dn?ki(n):t==mn?_c(n):fc(n,e(n))}}function Rn(e,n,t,r,u,l,h,d){var v=n&ze;if(!v&&typeof e!="function")throw new an(c);var x=r?r.length:0;if(x||(n&=~(Ue|xn),r=u=i),h=h===i?h:Te($(h),0),d=d===i?d:$(d),x-=u?u.length:0,n&xn){var z=r,T=u;r=u=i}var L=v?i:ha(e),R=[e,n,t,r,u,z,T,l,h,d];if(L&&pg(R,L),e=R[0],n=R[1],t=R[2],r=R[3],u=R[4],d=R[9]=R[9]===i?v?0:e.length:Te(R[9]-x,0),!d&&n&(Ie|Ye)&&(n&=~(Ie|Ye)),!n||n==ee)var P=Vh(e,n,t);else n==Ie||n==Ye?P=jh(e,n,d):(n==Ue||n==(ee|Ue))&&!u.length?P=eg(e,n,t,r):P=Dr.apply(i,R);var H=L?mu:qu;return Yu(H(P,R),e,n)}function Bu(e,n,t,r){return e===i||_n(e,pt[t])&&!re.call(r,t)?n:e}function Pu(e,n,t,r,u,l){return he(e)&&he(n)&&(l.set(n,e),Cr(e,n,i,Pu,l),l.delete(n)),e}function tg(e){return Xt(e)?i:e}function Nu(e,n,t,r,u,l){var h=t&G,d=e.length,v=n.length;if(d!=v&&!(h&&v>d))return!1;var x=l.get(e),z=l.get(n);if(x&&z)return x==n&&z==e;var T=-1,L=!0,R=t&V?new et:i;for(l.set(e,n),l.set(n,e);++T<d;){var P=e[T],H=n[T];if(r)var N=h?r(H,P,T,n,e,l):r(P,H,T,e,n,l);if(N!==i){if(N)continue;L=!1;break}if(R){if(!Di(n,function(Y,Z){if(!Ot(R,Z)&&(P===Y||u(P,Y,t,r,l)))return R.push(Z)})){L=!1;break}}else if(!(P===H||u(P,H,t,r,l))){L=!1;break}}return l.delete(e),l.delete(n),L}function rg(e,n,t,r,u,l,h){switch(t){case ft:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case Dt:return!(e.byteLength!=n.byteLength||!l(new vr(e),new vr(n)));case At:case Et:case Ct:return _n(+e,+n);case rr:return e.name==n.name&&e.message==n.message;case Lt:case Mt:return e==n+"";case dn:var d=ki;case mn:var v=r&G;if(d||(d=cr),e.size!=n.size&&!v)return!1;var x=h.get(e);if(x)return x==n;r|=V,h.set(e,n);var z=Nu(d(e),d(n),r,u,l,h);return h.delete(e),z;case ar:if(kt)return kt.call(e)==kt.call(n)}return!1}function ig(e,n,t,r,u,l){var h=t&G,d=fa(e),v=d.length,x=fa(n),z=x.length;if(v!=z&&!h)return!1;for(var T=v;T--;){var L=d[T];if(!(h?L in n:re.call(n,L)))return!1}var R=l.get(e),P=l.get(n);if(R&&P)return R==n&&P==e;var H=!0;l.set(e,n),l.set(n,e);for(var N=h;++T<v;){L=d[T];var Y=e[L],Z=n[L];if(r)var je=h?r(Z,Y,L,n,e,l):r(Y,Z,L,e,n,l);if(!(je===i?Y===Z||u(Y,Z,t,r,l):je)){H=!1;break}N||(N=L=="constructor")}if(H&&!N){var We=e.constructor,en=n.constructor;We!=en&&"constructor"in e&&"constructor"in n&&!(typeof We=="function"&&We instanceof We&&typeof en=="function"&&en instanceof en)&&(H=!1)}return l.delete(e),l.delete(n),H}function Dn(e){return _a($u(e,i,ju),e+"")}function fa(e){return iu(e,Ce,da)}function ca(e){return iu(e,$e,ku)}var ha=zr?function(e){return zr.get(e)}:Ma;function Pr(e){for(var n=e.name+"",t=_t[n],r=re.call(_t,n)?t.length:0;r--;){var u=t[r],l=u.func;if(l==null||l==e)return u.name}return n}function xt(e){var n=re.call(s,"placeholder")?s:e;return n.placeholder}function B(){var e=s.iteratee||Ca;return e=e===Ca?uu:e,arguments.length?e(arguments[0],arguments[1]):e}function Nr(e,n){var t=e.__data__;return hg(n)?t[typeof n=="string"?"string":"hash"]:t.map}function ga(e){for(var n=Ce(e),t=n.length;t--;){var r=n[t],u=e[r];n[t]=[r,u,Gu(u)]}return n}function rt(e,n){var t=mc(e,n);return ou(t)?t:i}function ag(e){var n=re.call(e,Vn),t=e[Vn];try{e[Vn]=i;var r=!0}catch{}var u=mr.call(e);return r&&(n?e[Vn]=t:delete e[Vn]),u}var da=Ui?function(e){return e==null?[]:(e=ie(e),kn(Ui(e),function(n){return Ho.call(e,n)}))}:Ra,ku=Ui?function(e){for(var n=[];e;)Wn(n,da(e)),e=_r(e);return n}:Ra,Pe=Ne;(Gi&&Pe(new Gi(new ArrayBuffer(1)))!=ft||Bt&&Pe(new Bt)!=dn||Ki&&Pe(Ki.resolve())!=eo||vt&&Pe(new vt)!=mn||Pt&&Pe(new Pt)!=Rt)&&(Pe=function(e){var n=Ne(e),t=n==En?e.constructor:i,r=t?it(t):"";if(r)switch(r){case Uc:return ft;case Gc:return dn;case Kc:return eo;case $c:return mn;case Hc:return Rt}return n});function og(e,n,t){for(var r=-1,u=t.length;++r<u;){var l=t[r],h=l.size;switch(l.type){case"drop":e+=h;break;case"dropRight":n-=h;break;case"take":n=Be(n,e+h);break;case"takeRight":e=Te(e,n-h);break}}return{start:e,end:n}}function ug(e){var n=e.match(gf);return n?n[1].split(df):[]}function Wu(e,n,t){n=Hn(n,e);for(var r=-1,u=n.length,l=!1;++r<u;){var h=Sn(n[r]);if(!(l=e!=null&&t(e,h)))break;e=e[h]}return l||++r!=u?l:(u=e==null?0:e.length,!!u&&Hr(u)&&On(h,u)&&(K(e)||at(e)))}function sg(e){var n=e.length,t=new e.constructor(n);return n&&typeof e[0]=="string"&&re.call(e,"index")&&(t.index=e.index,t.input=e.input),t}function Uu(e){return typeof e.constructor=="function"&&!qt(e)?yt(_r(e)):{}}function lg(e,n,t){var r=e.constructor;switch(n){case Dt:return ua(e);case At:case Et:return new r(+e);case ft:return qh(e,t);case gi:case di:case mi:case pi:case vi:case _i:case yi:case wi:case bi:return zu(e,t);case dn:return new r;case Ct:case Mt:return new r(e);case Lt:return Yh(e);case mn:return new r;case ar:return Xh(e)}}function fg(e,n){var t=n.length;if(!t)return e;var r=t-1;return n[r]=(t>1?"& ":"")+n[r],n=n.join(t>2?", ":" "),e.replace(hf,`{
/* [wrapped with `+n+`] */
`)}function cg(e){return K(e)||at(e)||!!(qo&&e&&e[qo])}function On(e,n){var t=typeof e;return n=n==null?Me:n,!!n&&(t=="number"||t!="symbol"&&zf.test(e))&&e>-1&&e%1==0&&e<n}function ke(e,n,t){if(!he(t))return!1;var r=typeof n;return(r=="number"?Ke(t)&&On(n,t.length):r=="string"&&n in t)?_n(t[n],e):!1}function ma(e,n){if(K(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||Ve(e)?!0:sf.test(e)||!uf.test(e)||n!=null&&e in ie(n)}function hg(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function pa(e){var n=Pr(e),t=s[n];if(typeof t!="function"||!(n in X.prototype))return!1;if(e===t)return!0;var r=ha(t);return!!r&&e===r[0]}function gg(e){return!!Go&&Go in e}var dg=gr?Fn:Da;function qt(e){var n=e&&e.constructor,t=typeof n=="function"&&n.prototype||pt;return e===t}function Gu(e){return e===e&&!he(e)}function Ku(e,n){return function(t){return t==null?!1:t[e]===n&&(n!==i||e in ie(t))}}function mg(e){var n=Kr(e,function(r){return t.size===A&&t.clear(),r}),t=n.cache;return n}function pg(e,n){var t=e[1],r=n[1],u=t|r,l=u<(ee|ze|E),h=r==E&&t==Ie||r==E&&t==W&&e[7].length<=n[8]||r==(E|W)&&n[7].length<=n[8]&&t==Ie;if(!(l||h))return e;r&ee&&(e[2]=n[2],u|=t&ee?0:ue);var d=n[3];if(d){var v=e[3];e[3]=v?Su(v,d,n[4]):d,e[4]=v?Un(e[3],S):n[4]}return d=n[5],d&&(v=e[5],e[5]=v?Tu(v,d,n[6]):d,e[6]=v?Un(e[5],S):n[6]),d=n[7],d&&(e[7]=d),r&E&&(e[8]=e[8]==null?n[8]:Be(e[8],n[8])),e[9]==null&&(e[9]=n[9]),e[0]=n[0],e[1]=u,e}function vg(e){var n=[];if(e!=null)for(var t in ie(e))n.push(t);return n}function _g(e){return mr.call(e)}function $u(e,n,t){return n=Te(n===i?e.length-1:n,0),function(){for(var r=arguments,u=-1,l=Te(r.length-n,0),h=y(l);++u<l;)h[u]=r[n+u];u=-1;for(var d=y(n+1);++u<n;)d[u]=r[u];return d[n]=t(h),Ze(e,this,d)}}function Hu(e,n){return n.length<2?e:tt(e,sn(n,0,-1))}function yg(e,n){for(var t=e.length,r=Be(n.length,t),u=Ge(e);r--;){var l=n[r];e[r]=On(l,t)?u[l]:i}return e}function va(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}var qu=Xu(mu),Yt=Oc||function(e,n){return Re.setTimeout(e,n)},_a=Xu(Gh);function Yu(e,n,t){var r=n+"";return _a(e,fg(r,wg(ug(r),t)))}function Xu(e){var n=0,t=0;return function(){var r=Nc(),u=J-(r-t);if(t=r,u>0){if(++n>=de)return arguments[0]}else n=0;return e.apply(i,arguments)}}function kr(e,n){var t=-1,r=e.length,u=r-1;for(n=n===i?r:n;++t<n;){var l=ea(t,u),h=e[l];e[l]=e[t],e[t]=h}return e.length=n,e}var Zu=mg(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(lf,function(t,r,u,l){n.push(u?l.replace(vf,"$1"):r||t)}),n});function Sn(e){if(typeof e=="string"||Ve(e))return e;var n=e+"";return n=="0"&&1/e==-Ee?"-0":n}function it(e){if(e!=null){try{return dr.call(e)}catch{}try{return e+""}catch{}}return""}function wg(e,n){return rn(ql,function(t){var r="_."+t[0];n&t[1]&&!lr(e,r)&&e.push(r)}),e.sort()}function Ju(e){if(e instanceof X)return e.clone();var n=new on(e.__wrapped__,e.__chain__);return n.__actions__=Ge(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}function bg(e,n,t){(t?ke(e,n,t):n===i)?n=1:n=Te($(n),0);var r=e==null?0:e.length;if(!r||n<1)return[];for(var u=0,l=0,h=y(br(r/n));u<r;)h[l++]=sn(e,u,u+=n);return h}function xg(e){for(var n=-1,t=e==null?0:e.length,r=0,u=[];++n<t;){var l=e[n];l&&(u[r++]=l)}return u}function zg(){var e=arguments.length;if(!e)return[];for(var n=y(e-1),t=arguments[0],r=e;r--;)n[r-1]=arguments[r];return Wn(K(t)?Ge(t):[t],De(n,1))}var Ig=q(function(e,n){return ye(e)?Ut(e,De(n,1,ye,!0)):[]}),Sg=q(function(e,n){var t=ln(n);return ye(t)&&(t=i),ye(e)?Ut(e,De(n,1,ye,!0),B(t,2)):[]}),Tg=q(function(e,n){var t=ln(n);return ye(t)&&(t=i),ye(e)?Ut(e,De(n,1,ye,!0),i,t):[]});function Ag(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===i?1:$(n),sn(e,n<0?0:n,r)):[]}function Eg(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===i?1:$(n),n=r-n,sn(e,0,n<0?0:n)):[]}function Cg(e,n){return e&&e.length?Mr(e,B(n,3),!0,!0):[]}function Lg(e,n){return e&&e.length?Mr(e,B(n,3),!0):[]}function Mg(e,n,t,r){var u=e==null?0:e.length;return u?(t&&typeof t!="number"&&ke(e,n,t)&&(t=0,r=u),zh(e,n,t,r)):[]}function Qu(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var u=t==null?0:$(t);return u<0&&(u=Te(r+u,0)),fr(e,B(n,3),u)}function Vu(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var u=r-1;return t!==i&&(u=$(t),u=t<0?Te(r+u,0):Be(u,r-1)),fr(e,B(n,3),u,!0)}function ju(e){var n=e==null?0:e.length;return n?De(e,1):[]}function Rg(e){var n=e==null?0:e.length;return n?De(e,Ee):[]}function Dg(e,n){var t=e==null?0:e.length;return t?(n=n===i?1:$(n),De(e,n)):[]}function Og(e){for(var n=-1,t=e==null?0:e.length,r={};++n<t;){var u=e[n];r[u[0]]=u[1]}return r}function es(e){return e&&e.length?e[0]:i}function Fg(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var u=t==null?0:$(t);return u<0&&(u=Te(r+u,0)),ht(e,n,u)}function Bg(e){var n=e==null?0:e.length;return n?sn(e,0,-1):[]}var Pg=q(function(e){var n=fe(e,aa);return n.length&&n[0]===e[0]?Zi(n):[]}),Ng=q(function(e){var n=ln(e),t=fe(e,aa);return n===ln(t)?n=i:t.pop(),t.length&&t[0]===e[0]?Zi(t,B(n,2)):[]}),kg=q(function(e){var n=ln(e),t=fe(e,aa);return n=typeof n=="function"?n:i,n&&t.pop(),t.length&&t[0]===e[0]?Zi(t,i,n):[]});function Wg(e,n){return e==null?"":Bc.call(e,n)}function ln(e){var n=e==null?0:e.length;return n?e[n-1]:i}function Ug(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var u=r;return t!==i&&(u=$(t),u=u<0?Te(r+u,0):Be(u,r-1)),n===n?wc(e,n,u):fr(e,Oo,u,!0)}function Gg(e,n){return e&&e.length?cu(e,$(n)):i}var Kg=q(ns);function ns(e,n){return e&&e.length&&n&&n.length?ji(e,n):e}function $g(e,n,t){return e&&e.length&&n&&n.length?ji(e,n,B(t,2)):e}function Hg(e,n,t){return e&&e.length&&n&&n.length?ji(e,n,i,t):e}var qg=Dn(function(e,n){var t=e==null?0:e.length,r=Hi(e,n);return du(e,fe(n,function(u){return On(u,t)?+u:u}).sort(Iu)),r});function Yg(e,n){var t=[];if(!(e&&e.length))return t;var r=-1,u=[],l=e.length;for(n=B(n,3);++r<l;){var h=e[r];n(h,r,e)&&(t.push(h),u.push(r))}return du(e,u),t}function ya(e){return e==null?e:Wc.call(e)}function Xg(e,n,t){var r=e==null?0:e.length;return r?(t&&typeof t!="number"&&ke(e,n,t)?(n=0,t=r):(n=n==null?0:$(n),t=t===i?r:$(t)),sn(e,n,t)):[]}function Zg(e,n){return Lr(e,n)}function Jg(e,n,t){return ta(e,n,B(t,2))}function Qg(e,n){var t=e==null?0:e.length;if(t){var r=Lr(e,n);if(r<t&&_n(e[r],n))return r}return-1}function Vg(e,n){return Lr(e,n,!0)}function jg(e,n,t){return ta(e,n,B(t,2),!0)}function ed(e,n){var t=e==null?0:e.length;if(t){var r=Lr(e,n,!0)-1;if(_n(e[r],n))return r}return-1}function nd(e){return e&&e.length?pu(e):[]}function td(e,n){return e&&e.length?pu(e,B(n,2)):[]}function rd(e){var n=e==null?0:e.length;return n?sn(e,1,n):[]}function id(e,n,t){return e&&e.length?(n=t||n===i?1:$(n),sn(e,0,n<0?0:n)):[]}function ad(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===i?1:$(n),n=r-n,sn(e,n<0?0:n,r)):[]}function od(e,n){return e&&e.length?Mr(e,B(n,3),!1,!0):[]}function ud(e,n){return e&&e.length?Mr(e,B(n,3)):[]}var sd=q(function(e){return $n(De(e,1,ye,!0))}),ld=q(function(e){var n=ln(e);return ye(n)&&(n=i),$n(De(e,1,ye,!0),B(n,2))}),fd=q(function(e){var n=ln(e);return n=typeof n=="function"?n:i,$n(De(e,1,ye,!0),i,n)});function cd(e){return e&&e.length?$n(e):[]}function hd(e,n){return e&&e.length?$n(e,B(n,2)):[]}function gd(e,n){return n=typeof n=="function"?n:i,e&&e.length?$n(e,i,n):[]}function wa(e){if(!(e&&e.length))return[];var n=0;return e=kn(e,function(t){if(ye(t))return n=Te(t.length,n),!0}),Pi(n,function(t){return fe(e,Oi(t))})}function ts(e,n){if(!(e&&e.length))return[];var t=wa(e);return n==null?t:fe(t,function(r){return Ze(n,i,r)})}var dd=q(function(e,n){return ye(e)?Ut(e,n):[]}),md=q(function(e){return ia(kn(e,ye))}),pd=q(function(e){var n=ln(e);return ye(n)&&(n=i),ia(kn(e,ye),B(n,2))}),vd=q(function(e){var n=ln(e);return n=typeof n=="function"?n:i,ia(kn(e,ye),i,n)}),_d=q(wa);function yd(e,n){return wu(e||[],n||[],Wt)}function wd(e,n){return wu(e||[],n||[],$t)}var bd=q(function(e){var n=e.length,t=n>1?e[n-1]:i;return t=typeof t=="function"?(e.pop(),t):i,ts(e,t)});function rs(e){var n=s(e);return n.__chain__=!0,n}function xd(e,n){return n(e),e}function Wr(e,n){return n(e)}var zd=Dn(function(e){var n=e.length,t=n?e[0]:0,r=this.__wrapped__,u=function(l){return Hi(l,e)};return n>1||this.__actions__.length||!(r instanceof X)||!On(t)?this.thru(u):(r=r.slice(t,+t+(n?1:0)),r.__actions__.push({func:Wr,args:[u],thisArg:i}),new on(r,this.__chain__).thru(function(l){return n&&!l.length&&l.push(i),l}))});function Id(){return rs(this)}function Sd(){return new on(this.value(),this.__chain__)}function Td(){this.__values__===i&&(this.__values__=vs(this.value()));var e=this.__index__>=this.__values__.length,n=e?i:this.__values__[this.__index__++];return{done:e,value:n}}function Ad(){return this}function Ed(e){for(var n,t=this;t instanceof Sr;){var r=Ju(t);r.__index__=0,r.__values__=i,n?u.__wrapped__=r:n=r;var u=r;t=t.__wrapped__}return u.__wrapped__=e,n}function Cd(){var e=this.__wrapped__;if(e instanceof X){var n=e;return this.__actions__.length&&(n=new X(this)),n=n.reverse(),n.__actions__.push({func:Wr,args:[ya],thisArg:i}),new on(n,this.__chain__)}return this.thru(ya)}function Ld(){return yu(this.__wrapped__,this.__actions__)}var Md=Rr(function(e,n,t){re.call(e,t)?++e[t]:Mn(e,t,1)});function Rd(e,n,t){var r=K(e)?Ro:xh;return t&&ke(e,n,t)&&(n=i),r(e,B(n,3))}function Dd(e,n){var t=K(e)?kn:tu;return t(e,B(n,3))}var Od=Lu(Qu),Fd=Lu(Vu);function Bd(e,n){return De(Ur(e,n),1)}function Pd(e,n){return De(Ur(e,n),Ee)}function Nd(e,n,t){return t=t===i?1:$(t),De(Ur(e,n),t)}function is(e,n){var t=K(e)?rn:Kn;return t(e,B(n,3))}function as(e,n){var t=K(e)?rc:nu;return t(e,B(n,3))}var kd=Rr(function(e,n,t){re.call(e,t)?e[t].push(n):Mn(e,t,[n])});function Wd(e,n,t,r){e=Ke(e)?e:It(e),t=t&&!r?$(t):0;var u=e.length;return t<0&&(t=Te(u+t,0)),qr(e)?t<=u&&e.indexOf(n,t)>-1:!!u&&ht(e,n,t)>-1}var Ud=q(function(e,n,t){var r=-1,u=typeof n=="function",l=Ke(e)?y(e.length):[];return Kn(e,function(h){l[++r]=u?Ze(n,h,t):Gt(h,n,t)}),l}),Gd=Rr(function(e,n,t){Mn(e,t,n)});function Ur(e,n){var t=K(e)?fe:su;return t(e,B(n,3))}function Kd(e,n,t,r){return e==null?[]:(K(n)||(n=n==null?[]:[n]),t=r?i:t,K(t)||(t=t==null?[]:[t]),hu(e,n,t))}var $d=Rr(function(e,n,t){e[t?0:1].push(n)},function(){return[[],[]]});function Hd(e,n,t){var r=K(e)?Ri:Bo,u=arguments.length<3;return r(e,B(n,4),t,u,Kn)}function qd(e,n,t){var r=K(e)?ic:Bo,u=arguments.length<3;return r(e,B(n,4),t,u,nu)}function Yd(e,n){var t=K(e)?kn:tu;return t(e,$r(B(n,3)))}function Xd(e){var n=K(e)?Qo:Wh;return n(e)}function Zd(e,n,t){(t?ke(e,n,t):n===i)?n=1:n=$(n);var r=K(e)?vh:Uh;return r(e,n)}function Jd(e){var n=K(e)?_h:Kh;return n(e)}function Qd(e){if(e==null)return 0;if(Ke(e))return qr(e)?dt(e):e.length;var n=Pe(e);return n==dn||n==mn?e.size:Qi(e).length}function Vd(e,n,t){var r=K(e)?Di:$h;return t&&ke(e,n,t)&&(n=i),r(e,B(n,3))}var jd=q(function(e,n){if(e==null)return[];var t=n.length;return t>1&&ke(e,n[0],n[1])?n=[]:t>2&&ke(n[0],n[1],n[2])&&(n=[n[0]]),hu(e,De(n,1),[])}),Gr=Dc||function(){return Re.Date.now()};function e1(e,n){if(typeof n!="function")throw new an(c);return e=$(e),function(){if(--e<1)return n.apply(this,arguments)}}function os(e,n,t){return n=t?i:n,n=e&&n==null?e.length:n,Rn(e,E,i,i,i,i,n)}function us(e,n){var t;if(typeof n!="function")throw new an(c);return e=$(e),function(){return--e>0&&(t=n.apply(this,arguments)),e<=1&&(n=i),t}}var ba=q(function(e,n,t){var r=ee;if(t.length){var u=Un(t,xt(ba));r|=Ue}return Rn(e,r,n,t,u)}),ss=q(function(e,n,t){var r=ee|ze;if(t.length){var u=Un(t,xt(ss));r|=Ue}return Rn(n,r,e,t,u)});function ls(e,n,t){n=t?i:n;var r=Rn(e,Ie,i,i,i,i,i,n);return r.placeholder=ls.placeholder,r}function fs(e,n,t){n=t?i:n;var r=Rn(e,Ye,i,i,i,i,i,n);return r.placeholder=fs.placeholder,r}function cs(e,n,t){var r,u,l,h,d,v,x=0,z=!1,T=!1,L=!0;if(typeof e!="function")throw new an(c);n=fn(n)||0,he(t)&&(z=!!t.leading,T="maxWait"in t,l=T?Te(fn(t.maxWait)||0,n):l,L="trailing"in t?!!t.trailing:L);function R(we){var yn=r,Pn=u;return r=u=i,x=we,h=e.apply(Pn,yn),h}function P(we){return x=we,d=Yt(Y,n),z?R(we):h}function H(we){var yn=we-v,Pn=we-x,Ls=n-yn;return T?Be(Ls,l-Pn):Ls}function N(we){var yn=we-v,Pn=we-x;return v===i||yn>=n||yn<0||T&&Pn>=l}function Y(){var we=Gr();if(N(we))return Z(we);d=Yt(Y,H(we))}function Z(we){return d=i,L&&r?R(we):(r=u=i,h)}function je(){d!==i&&bu(d),x=0,r=v=u=d=i}function We(){return d===i?h:Z(Gr())}function en(){var we=Gr(),yn=N(we);if(r=arguments,u=this,v=we,yn){if(d===i)return P(v);if(T)return bu(d),d=Yt(Y,n),R(v)}return d===i&&(d=Yt(Y,n)),h}return en.cancel=je,en.flush=We,en}var n1=q(function(e,n){return eu(e,1,n)}),t1=q(function(e,n,t){return eu(e,fn(n)||0,t)});function r1(e){return Rn(e,F)}function Kr(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new an(c);var t=function(){var r=arguments,u=n?n.apply(this,r):r[0],l=t.cache;if(l.has(u))return l.get(u);var h=e.apply(this,r);return t.cache=l.set(u,h)||l,h};return t.cache=new(Kr.Cache||Ln),t}Kr.Cache=Ln;function $r(e){if(typeof e!="function")throw new an(c);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}function i1(e){return us(2,e)}var a1=Hh(function(e,n){n=n.length==1&&K(n[0])?fe(n[0],Je(B())):fe(De(n,1),Je(B()));var t=n.length;return q(function(r){for(var u=-1,l=Be(r.length,t);++u<l;)r[u]=n[u].call(this,r[u]);return Ze(e,this,r)})}),xa=q(function(e,n){var t=Un(n,xt(xa));return Rn(e,Ue,i,n,t)}),hs=q(function(e,n){var t=Un(n,xt(hs));return Rn(e,xn,i,n,t)}),o1=Dn(function(e,n){return Rn(e,W,i,i,i,n)});function u1(e,n){if(typeof e!="function")throw new an(c);return n=n===i?n:$(n),q(e,n)}function s1(e,n){if(typeof e!="function")throw new an(c);return n=n==null?0:Te($(n),0),q(function(t){var r=t[n],u=qn(t,0,n);return r&&Wn(u,r),Ze(e,this,u)})}function l1(e,n,t){var r=!0,u=!0;if(typeof e!="function")throw new an(c);return he(t)&&(r="leading"in t?!!t.leading:r,u="trailing"in t?!!t.trailing:u),cs(e,n,{leading:r,maxWait:n,trailing:u})}function f1(e){return os(e,1)}function c1(e,n){return xa(oa(n),e)}function h1(){if(!arguments.length)return[];var e=arguments[0];return K(e)?e:[e]}function g1(e){return un(e,O)}function d1(e,n){return n=typeof n=="function"?n:i,un(e,O,n)}function m1(e){return un(e,I|O)}function p1(e,n){return n=typeof n=="function"?n:i,un(e,I|O,n)}function v1(e,n){return n==null||jo(e,n,Ce(n))}function _n(e,n){return e===n||e!==e&&n!==n}var _1=Br(Xi),y1=Br(function(e,n){return e>=n}),at=au(function(){return arguments}())?au:function(e){return me(e)&&re.call(e,"callee")&&!Ho.call(e,"callee")},K=y.isArray,w1=To?Je(To):Eh;function Ke(e){return e!=null&&Hr(e.length)&&!Fn(e)}function ye(e){return me(e)&&Ke(e)}function b1(e){return e===!0||e===!1||me(e)&&Ne(e)==At}var Yn=Fc||Da,x1=Ao?Je(Ao):Ch;function z1(e){return me(e)&&e.nodeType===1&&!Xt(e)}function I1(e){if(e==null)return!0;if(Ke(e)&&(K(e)||typeof e=="string"||typeof e.splice=="function"||Yn(e)||zt(e)||at(e)))return!e.length;var n=Pe(e);if(n==dn||n==mn)return!e.size;if(qt(e))return!Qi(e).length;for(var t in e)if(re.call(e,t))return!1;return!0}function S1(e,n){return Kt(e,n)}function T1(e,n,t){t=typeof t=="function"?t:i;var r=t?t(e,n):i;return r===i?Kt(e,n,i,t):!!r}function za(e){if(!me(e))return!1;var n=Ne(e);return n==rr||n==Xl||typeof e.message=="string"&&typeof e.name=="string"&&!Xt(e)}function A1(e){return typeof e=="number"&&Yo(e)}function Fn(e){if(!he(e))return!1;var n=Ne(e);return n==ir||n==ja||n==Yl||n==Jl}function gs(e){return typeof e=="number"&&e==$(e)}function Hr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Me}function he(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function me(e){return e!=null&&typeof e=="object"}var ds=Eo?Je(Eo):Mh;function E1(e,n){return e===n||Ji(e,n,ga(n))}function C1(e,n,t){return t=typeof t=="function"?t:i,Ji(e,n,ga(n),t)}function L1(e){return ms(e)&&e!=+e}function M1(e){if(dg(e))throw new U(m);return ou(e)}function R1(e){return e===null}function D1(e){return e==null}function ms(e){return typeof e=="number"||me(e)&&Ne(e)==Ct}function Xt(e){if(!me(e)||Ne(e)!=En)return!1;var n=_r(e);if(n===null)return!0;var t=re.call(n,"constructor")&&n.constructor;return typeof t=="function"&&t instanceof t&&dr.call(t)==Cc}var Ia=Co?Je(Co):Rh;function O1(e){return gs(e)&&e>=-Me&&e<=Me}var ps=Lo?Je(Lo):Dh;function qr(e){return typeof e=="string"||!K(e)&&me(e)&&Ne(e)==Mt}function Ve(e){return typeof e=="symbol"||me(e)&&Ne(e)==ar}var zt=Mo?Je(Mo):Oh;function F1(e){return e===i}function B1(e){return me(e)&&Pe(e)==Rt}function P1(e){return me(e)&&Ne(e)==Vl}var N1=Br(Vi),k1=Br(function(e,n){return e<=n});function vs(e){if(!e)return[];if(Ke(e))return qr(e)?pn(e):Ge(e);if(Ft&&e[Ft])return vc(e[Ft]());var n=Pe(e),t=n==dn?ki:n==mn?cr:It;return t(e)}function Bn(e){if(!e)return e===0?e:0;if(e=fn(e),e===Ee||e===-Ee){var n=e<0?-1:1;return n*Xe}return e===e?e:0}function $(e){var n=Bn(e),t=n%1;return n===n?t?n-t:n:0}function _s(e){return e?nt($(e),0,Fe):0}function fn(e){if(typeof e=="number")return e;if(Ve(e))return gn;if(he(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=he(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Po(e);var t=wf.test(e);return t||xf.test(e)?ec(e.slice(2),t?2:8):yf.test(e)?gn:+e}function ys(e){return In(e,$e(e))}function W1(e){return e?nt($(e),-Me,Me):e===0?e:0}function te(e){return e==null?"":Qe(e)}var U1=wt(function(e,n){if(qt(n)||Ke(n)){In(n,Ce(n),e);return}for(var t in n)re.call(n,t)&&Wt(e,t,n[t])}),ws=wt(function(e,n){In(n,$e(n),e)}),Yr=wt(function(e,n,t,r){In(n,$e(n),e,r)}),G1=wt(function(e,n,t,r){In(n,Ce(n),e,r)}),K1=Dn(Hi);function $1(e,n){var t=yt(e);return n==null?t:Vo(t,n)}var H1=q(function(e,n){e=ie(e);var t=-1,r=n.length,u=r>2?n[2]:i;for(u&&ke(n[0],n[1],u)&&(r=1);++t<r;)for(var l=n[t],h=$e(l),d=-1,v=h.length;++d<v;){var x=h[d],z=e[x];(z===i||_n(z,pt[x])&&!re.call(e,x))&&(e[x]=l[x])}return e}),q1=q(function(e){return e.push(i,Pu),Ze(bs,i,e)});function Y1(e,n){return Do(e,B(n,3),zn)}function X1(e,n){return Do(e,B(n,3),Yi)}function Z1(e,n){return e==null?e:qi(e,B(n,3),$e)}function J1(e,n){return e==null?e:ru(e,B(n,3),$e)}function Q1(e,n){return e&&zn(e,B(n,3))}function V1(e,n){return e&&Yi(e,B(n,3))}function j1(e){return e==null?[]:Er(e,Ce(e))}function em(e){return e==null?[]:Er(e,$e(e))}function Sa(e,n,t){var r=e==null?i:tt(e,n);return r===i?t:r}function nm(e,n){return e!=null&&Wu(e,n,Ih)}function Ta(e,n){return e!=null&&Wu(e,n,Sh)}var tm=Ru(function(e,n,t){n!=null&&typeof n.toString!="function"&&(n=mr.call(n)),e[n]=t},Ea(He)),rm=Ru(function(e,n,t){n!=null&&typeof n.toString!="function"&&(n=mr.call(n)),re.call(e,n)?e[n].push(t):e[n]=[t]},B),im=q(Gt);function Ce(e){return Ke(e)?Jo(e):Qi(e)}function $e(e){return Ke(e)?Jo(e,!0):Fh(e)}function am(e,n){var t={};return n=B(n,3),zn(e,function(r,u,l){Mn(t,n(r,u,l),r)}),t}function om(e,n){var t={};return n=B(n,3),zn(e,function(r,u,l){Mn(t,u,n(r,u,l))}),t}var um=wt(function(e,n,t){Cr(e,n,t)}),bs=wt(function(e,n,t,r){Cr(e,n,t,r)}),sm=Dn(function(e,n){var t={};if(e==null)return t;var r=!1;n=fe(n,function(l){return l=Hn(l,e),r||(r=l.length>1),l}),In(e,ca(e),t),r&&(t=un(t,I|C|O,tg));for(var u=n.length;u--;)ra(t,n[u]);return t});function lm(e,n){return xs(e,$r(B(n)))}var fm=Dn(function(e,n){return e==null?{}:Ph(e,n)});function xs(e,n){if(e==null)return{};var t=fe(ca(e),function(r){return[r]});return n=B(n),gu(e,t,function(r,u){return n(r,u[0])})}function cm(e,n,t){n=Hn(n,e);var r=-1,u=n.length;for(u||(u=1,e=i);++r<u;){var l=e==null?i:e[Sn(n[r])];l===i&&(r=u,l=t),e=Fn(l)?l.call(e):l}return e}function hm(e,n,t){return e==null?e:$t(e,n,t)}function gm(e,n,t,r){return r=typeof r=="function"?r:i,e==null?e:$t(e,n,t,r)}var zs=Fu(Ce),Is=Fu($e);function dm(e,n,t){var r=K(e),u=r||Yn(e)||zt(e);if(n=B(n,4),t==null){var l=e&&e.constructor;u?t=r?new l:[]:he(e)?t=Fn(l)?yt(_r(e)):{}:t={}}return(u?rn:zn)(e,function(h,d,v){return n(t,h,d,v)}),t}function mm(e,n){return e==null?!0:ra(e,n)}function pm(e,n,t){return e==null?e:_u(e,n,oa(t))}function vm(e,n,t,r){return r=typeof r=="function"?r:i,e==null?e:_u(e,n,oa(t),r)}function It(e){return e==null?[]:Ni(e,Ce(e))}function _m(e){return e==null?[]:Ni(e,$e(e))}function ym(e,n,t){return t===i&&(t=n,n=i),t!==i&&(t=fn(t),t=t===t?t:0),n!==i&&(n=fn(n),n=n===n?n:0),nt(fn(e),n,t)}function wm(e,n,t){return n=Bn(n),t===i?(t=n,n=0):t=Bn(t),e=fn(e),Th(e,n,t)}function bm(e,n,t){if(t&&typeof t!="boolean"&&ke(e,n,t)&&(n=t=i),t===i&&(typeof n=="boolean"?(t=n,n=i):typeof e=="boolean"&&(t=e,e=i)),e===i&&n===i?(e=0,n=1):(e=Bn(e),n===i?(n=e,e=0):n=Bn(n)),e>n){var r=e;e=n,n=r}if(t||e%1||n%1){var u=Xo();return Be(e+u*(n-e+jf("1e-"+((u+"").length-1))),n)}return ea(e,n)}var xm=bt(function(e,n,t){return n=n.toLowerCase(),e+(t?Ss(n):n)});function Ss(e){return Aa(te(e).toLowerCase())}function Ts(e){return e=te(e),e&&e.replace(If,hc).replace(Kf,"")}function zm(e,n,t){e=te(e),n=Qe(n);var r=e.length;t=t===i?r:nt($(t),0,r);var u=t;return t-=n.length,t>=0&&e.slice(t,u)==n}function Im(e){return e=te(e),e&&rf.test(e)?e.replace(to,gc):e}function Sm(e){return e=te(e),e&&ff.test(e)?e.replace(xi,"\\$&"):e}var Tm=bt(function(e,n,t){return e+(t?"-":"")+n.toLowerCase()}),Am=bt(function(e,n,t){return e+(t?" ":"")+n.toLowerCase()}),Em=Cu("toLowerCase");function Cm(e,n,t){e=te(e),n=$(n);var r=n?dt(e):0;if(!n||r>=n)return e;var u=(n-r)/2;return Fr(xr(u),t)+e+Fr(br(u),t)}function Lm(e,n,t){e=te(e),n=$(n);var r=n?dt(e):0;return n&&r<n?e+Fr(n-r,t):e}function Mm(e,n,t){e=te(e),n=$(n);var r=n?dt(e):0;return n&&r<n?Fr(n-r,t)+e:e}function Rm(e,n,t){return t||n==null?n=0:n&&(n=+n),kc(te(e).replace(zi,""),n||0)}function Dm(e,n,t){return(t?ke(e,n,t):n===i)?n=1:n=$(n),na(te(e),n)}function Om(){var e=arguments,n=te(e[0]);return e.length<3?n:n.replace(e[1],e[2])}var Fm=bt(function(e,n,t){return e+(t?"_":"")+n.toLowerCase()});function Bm(e,n,t){return t&&typeof t!="number"&&ke(e,n,t)&&(n=t=i),t=t===i?Fe:t>>>0,t?(e=te(e),e&&(typeof n=="string"||n!=null&&!Ia(n))&&(n=Qe(n),!n&&gt(e))?qn(pn(e),0,t):e.split(n,t)):[]}var Pm=bt(function(e,n,t){return e+(t?" ":"")+Aa(n)});function Nm(e,n,t){return e=te(e),t=t==null?0:nt($(t),0,e.length),n=Qe(n),e.slice(t,t+n.length)==n}function km(e,n,t){var r=s.templateSettings;t&&ke(e,n,t)&&(n=i),e=te(e),n=Yr({},n,r,Bu);var u=Yr({},n.imports,r.imports,Bu),l=Ce(u),h=Ni(u,l),d,v,x=0,z=n.interpolate||or,T="__p += '",L=Wi((n.escape||or).source+"|"+z.source+"|"+(z===ro?_f:or).source+"|"+(n.evaluate||or).source+"|$","g"),R="//# sourceURL="+(re.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xf+"]")+`
`;e.replace(L,function(N,Y,Z,je,We,en){return Z||(Z=je),T+=e.slice(x,en).replace(Sf,dc),Y&&(d=!0,T+=`' +
__e(`+Y+`) +
'`),We&&(v=!0,T+=`';
`+We+`;
__p += '`),Z&&(T+=`' +
((__t = (`+Z+`)) == null ? '' : __t) +
'`),x=en+N.length,N}),T+=`';
`;var P=re.call(n,"variable")&&n.variable;if(!P)T=`with (obj) {
`+T+`
}
`;else if(pf.test(P))throw new U(_);T=(v?T.replace(jl,""):T).replace(ef,"$1").replace(nf,"$1;"),T="function("+(P||"obj")+`) {
`+(P?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(d?", __e = _.escape":"")+(v?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+T+`return __p
}`;var H=Es(function(){return ne(l,R+"return "+T).apply(i,h)});if(H.source=T,za(H))throw H;return H}function Wm(e){return te(e).toLowerCase()}function Um(e){return te(e).toUpperCase()}function Gm(e,n,t){if(e=te(e),e&&(t||n===i))return Po(e);if(!e||!(n=Qe(n)))return e;var r=pn(e),u=pn(n),l=No(r,u),h=ko(r,u)+1;return qn(r,l,h).join("")}function Km(e,n,t){if(e=te(e),e&&(t||n===i))return e.slice(0,Uo(e)+1);if(!e||!(n=Qe(n)))return e;var r=pn(e),u=ko(r,pn(n))+1;return qn(r,0,u).join("")}function $m(e,n,t){if(e=te(e),e&&(t||n===i))return e.replace(zi,"");if(!e||!(n=Qe(n)))return e;var r=pn(e),u=No(r,pn(n));return qn(r,u).join("")}function Hm(e,n){var t=le,r=_e;if(he(n)){var u="separator"in n?n.separator:u;t="length"in n?$(n.length):t,r="omission"in n?Qe(n.omission):r}e=te(e);var l=e.length;if(gt(e)){var h=pn(e);l=h.length}if(t>=l)return e;var d=t-dt(r);if(d<1)return r;var v=h?qn(h,0,d).join(""):e.slice(0,d);if(u===i)return v+r;if(h&&(d+=v.length-d),Ia(u)){if(e.slice(d).search(u)){var x,z=v;for(u.global||(u=Wi(u.source,te(io.exec(u))+"g")),u.lastIndex=0;x=u.exec(z);)var T=x.index;v=v.slice(0,T===i?d:T)}}else if(e.indexOf(Qe(u),d)!=d){var L=v.lastIndexOf(u);L>-1&&(v=v.slice(0,L))}return v+r}function qm(e){return e=te(e),e&&tf.test(e)?e.replace(no,bc):e}var Ym=bt(function(e,n,t){return e+(t?" ":"")+n.toUpperCase()}),Aa=Cu("toUpperCase");function As(e,n,t){return e=te(e),n=t?i:n,n===i?pc(e)?Ic(e):uc(e):e.match(n)||[]}var Es=q(function(e,n){try{return Ze(e,i,n)}catch(t){return za(t)?t:new U(t)}}),Xm=Dn(function(e,n){return rn(n,function(t){t=Sn(t),Mn(e,t,ba(e[t],e))}),e});function Zm(e){var n=e==null?0:e.length,t=B();return e=n?fe(e,function(r){if(typeof r[1]!="function")throw new an(c);return[t(r[0]),r[1]]}):[],q(function(r){for(var u=-1;++u<n;){var l=e[u];if(Ze(l[0],this,r))return Ze(l[1],this,r)}})}function Jm(e){return bh(un(e,I))}function Ea(e){return function(){return e}}function Qm(e,n){return e==null||e!==e?n:e}var Vm=Mu(),jm=Mu(!0);function He(e){return e}function Ca(e){return uu(typeof e=="function"?e:un(e,I))}function e0(e){return lu(un(e,I))}function n0(e,n){return fu(e,un(n,I))}var t0=q(function(e,n){return function(t){return Gt(t,e,n)}}),r0=q(function(e,n){return function(t){return Gt(e,t,n)}});function La(e,n,t){var r=Ce(n),u=Er(n,r);t==null&&!(he(n)&&(u.length||!r.length))&&(t=n,n=e,e=this,u=Er(n,Ce(n)));var l=!(he(t)&&"chain"in t)||!!t.chain,h=Fn(e);return rn(u,function(d){var v=n[d];e[d]=v,h&&(e.prototype[d]=function(){var x=this.__chain__;if(l||x){var z=e(this.__wrapped__),T=z.__actions__=Ge(this.__actions__);return T.push({func:v,args:arguments,thisArg:e}),z.__chain__=x,z}return v.apply(e,Wn([this.value()],arguments))})}),e}function i0(){return Re._===this&&(Re._=Lc),this}function Ma(){}function a0(e){return e=$(e),q(function(n){return cu(n,e)})}var o0=sa(fe),u0=sa(Ro),s0=sa(Di);function Cs(e){return ma(e)?Oi(Sn(e)):Nh(e)}function l0(e){return function(n){return e==null?i:tt(e,n)}}var f0=Du(),c0=Du(!0);function Ra(){return[]}function Da(){return!1}function h0(){return{}}function g0(){return""}function d0(){return!0}function m0(e,n){if(e=$(e),e<1||e>Me)return[];var t=Fe,r=Be(e,Fe);n=B(n),e-=Fe;for(var u=Pi(r,n);++t<e;)n(t);return u}function p0(e){return K(e)?fe(e,Sn):Ve(e)?[e]:Ge(Zu(te(e)))}function v0(e){var n=++Ec;return te(e)+n}var _0=Or(function(e,n){return e+n},0),y0=la("ceil"),w0=Or(function(e,n){return e/n},1),b0=la("floor");function x0(e){return e&&e.length?Ar(e,He,Xi):i}function z0(e,n){return e&&e.length?Ar(e,B(n,2),Xi):i}function I0(e){return Fo(e,He)}function S0(e,n){return Fo(e,B(n,2))}function T0(e){return e&&e.length?Ar(e,He,Vi):i}function A0(e,n){return e&&e.length?Ar(e,B(n,2),Vi):i}var E0=Or(function(e,n){return e*n},1),C0=la("round"),L0=Or(function(e,n){return e-n},0);function M0(e){return e&&e.length?Bi(e,He):0}function R0(e,n){return e&&e.length?Bi(e,B(n,2)):0}return s.after=e1,s.ary=os,s.assign=U1,s.assignIn=ws,s.assignInWith=Yr,s.assignWith=G1,s.at=K1,s.before=us,s.bind=ba,s.bindAll=Xm,s.bindKey=ss,s.castArray=h1,s.chain=rs,s.chunk=bg,s.compact=xg,s.concat=zg,s.cond=Zm,s.conforms=Jm,s.constant=Ea,s.countBy=Md,s.create=$1,s.curry=ls,s.curryRight=fs,s.debounce=cs,s.defaults=H1,s.defaultsDeep=q1,s.defer=n1,s.delay=t1,s.difference=Ig,s.differenceBy=Sg,s.differenceWith=Tg,s.drop=Ag,s.dropRight=Eg,s.dropRightWhile=Cg,s.dropWhile=Lg,s.fill=Mg,s.filter=Dd,s.flatMap=Bd,s.flatMapDeep=Pd,s.flatMapDepth=Nd,s.flatten=ju,s.flattenDeep=Rg,s.flattenDepth=Dg,s.flip=r1,s.flow=Vm,s.flowRight=jm,s.fromPairs=Og,s.functions=j1,s.functionsIn=em,s.groupBy=kd,s.initial=Bg,s.intersection=Pg,s.intersectionBy=Ng,s.intersectionWith=kg,s.invert=tm,s.invertBy=rm,s.invokeMap=Ud,s.iteratee=Ca,s.keyBy=Gd,s.keys=Ce,s.keysIn=$e,s.map=Ur,s.mapKeys=am,s.mapValues=om,s.matches=e0,s.matchesProperty=n0,s.memoize=Kr,s.merge=um,s.mergeWith=bs,s.method=t0,s.methodOf=r0,s.mixin=La,s.negate=$r,s.nthArg=a0,s.omit=sm,s.omitBy=lm,s.once=i1,s.orderBy=Kd,s.over=o0,s.overArgs=a1,s.overEvery=u0,s.overSome=s0,s.partial=xa,s.partialRight=hs,s.partition=$d,s.pick=fm,s.pickBy=xs,s.property=Cs,s.propertyOf=l0,s.pull=Kg,s.pullAll=ns,s.pullAllBy=$g,s.pullAllWith=Hg,s.pullAt=qg,s.range=f0,s.rangeRight=c0,s.rearg=o1,s.reject=Yd,s.remove=Yg,s.rest=u1,s.reverse=ya,s.sampleSize=Zd,s.set=hm,s.setWith=gm,s.shuffle=Jd,s.slice=Xg,s.sortBy=jd,s.sortedUniq=nd,s.sortedUniqBy=td,s.split=Bm,s.spread=s1,s.tail=rd,s.take=id,s.takeRight=ad,s.takeRightWhile=od,s.takeWhile=ud,s.tap=xd,s.throttle=l1,s.thru=Wr,s.toArray=vs,s.toPairs=zs,s.toPairsIn=Is,s.toPath=p0,s.toPlainObject=ys,s.transform=dm,s.unary=f1,s.union=sd,s.unionBy=ld,s.unionWith=fd,s.uniq=cd,s.uniqBy=hd,s.uniqWith=gd,s.unset=mm,s.unzip=wa,s.unzipWith=ts,s.update=pm,s.updateWith=vm,s.values=It,s.valuesIn=_m,s.without=dd,s.words=As,s.wrap=c1,s.xor=md,s.xorBy=pd,s.xorWith=vd,s.zip=_d,s.zipObject=yd,s.zipObjectDeep=wd,s.zipWith=bd,s.entries=zs,s.entriesIn=Is,s.extend=ws,s.extendWith=Yr,La(s,s),s.add=_0,s.attempt=Es,s.camelCase=xm,s.capitalize=Ss,s.ceil=y0,s.clamp=ym,s.clone=g1,s.cloneDeep=m1,s.cloneDeepWith=p1,s.cloneWith=d1,s.conformsTo=v1,s.deburr=Ts,s.defaultTo=Qm,s.divide=w0,s.endsWith=zm,s.eq=_n,s.escape=Im,s.escapeRegExp=Sm,s.every=Rd,s.find=Od,s.findIndex=Qu,s.findKey=Y1,s.findLast=Fd,s.findLastIndex=Vu,s.findLastKey=X1,s.floor=b0,s.forEach=is,s.forEachRight=as,s.forIn=Z1,s.forInRight=J1,s.forOwn=Q1,s.forOwnRight=V1,s.get=Sa,s.gt=_1,s.gte=y1,s.has=nm,s.hasIn=Ta,s.head=es,s.identity=He,s.includes=Wd,s.indexOf=Fg,s.inRange=wm,s.invoke=im,s.isArguments=at,s.isArray=K,s.isArrayBuffer=w1,s.isArrayLike=Ke,s.isArrayLikeObject=ye,s.isBoolean=b1,s.isBuffer=Yn,s.isDate=x1,s.isElement=z1,s.isEmpty=I1,s.isEqual=S1,s.isEqualWith=T1,s.isError=za,s.isFinite=A1,s.isFunction=Fn,s.isInteger=gs,s.isLength=Hr,s.isMap=ds,s.isMatch=E1,s.isMatchWith=C1,s.isNaN=L1,s.isNative=M1,s.isNil=D1,s.isNull=R1,s.isNumber=ms,s.isObject=he,s.isObjectLike=me,s.isPlainObject=Xt,s.isRegExp=Ia,s.isSafeInteger=O1,s.isSet=ps,s.isString=qr,s.isSymbol=Ve,s.isTypedArray=zt,s.isUndefined=F1,s.isWeakMap=B1,s.isWeakSet=P1,s.join=Wg,s.kebabCase=Tm,s.last=ln,s.lastIndexOf=Ug,s.lowerCase=Am,s.lowerFirst=Em,s.lt=N1,s.lte=k1,s.max=x0,s.maxBy=z0,s.mean=I0,s.meanBy=S0,s.min=T0,s.minBy=A0,s.stubArray=Ra,s.stubFalse=Da,s.stubObject=h0,s.stubString=g0,s.stubTrue=d0,s.multiply=E0,s.nth=Gg,s.noConflict=i0,s.noop=Ma,s.now=Gr,s.pad=Cm,s.padEnd=Lm,s.padStart=Mm,s.parseInt=Rm,s.random=bm,s.reduce=Hd,s.reduceRight=qd,s.repeat=Dm,s.replace=Om,s.result=cm,s.round=C0,s.runInContext=p,s.sample=Xd,s.size=Qd,s.snakeCase=Fm,s.some=Vd,s.sortedIndex=Zg,s.sortedIndexBy=Jg,s.sortedIndexOf=Qg,s.sortedLastIndex=Vg,s.sortedLastIndexBy=jg,s.sortedLastIndexOf=ed,s.startCase=Pm,s.startsWith=Nm,s.subtract=L0,s.sum=M0,s.sumBy=R0,s.template=km,s.times=m0,s.toFinite=Bn,s.toInteger=$,s.toLength=_s,s.toLower=Wm,s.toNumber=fn,s.toSafeInteger=W1,s.toString=te,s.toUpper=Um,s.trim=Gm,s.trimEnd=Km,s.trimStart=$m,s.truncate=Hm,s.unescape=qm,s.uniqueId=v0,s.upperCase=Ym,s.upperFirst=Aa,s.each=is,s.eachRight=as,s.first=es,La(s,function(){var e={};return zn(s,function(n,t){re.call(s.prototype,t)||(e[t]=n)}),e}(),{chain:!1}),s.VERSION=f,rn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){s[e].placeholder=s}),rn(["drop","take"],function(e,n){X.prototype[e]=function(t){t=t===i?1:Te($(t),0);var r=this.__filtered__&&!n?new X(this):this.clone();return r.__filtered__?r.__takeCount__=Be(t,r.__takeCount__):r.__views__.push({size:Be(t,Fe),type:e+(r.__dir__<0?"Right":"")}),r},X.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),rn(["filter","map","takeWhile"],function(e,n){var t=n+1,r=t==Le||t==hn;X.prototype[e]=function(u){var l=this.clone();return l.__iteratees__.push({iteratee:B(u,3),type:t}),l.__filtered__=l.__filtered__||r,l}}),rn(["head","last"],function(e,n){var t="take"+(n?"Right":"");X.prototype[e]=function(){return this[t](1).value()[0]}}),rn(["initial","tail"],function(e,n){var t="drop"+(n?"":"Right");X.prototype[e]=function(){return this.__filtered__?new X(this):this[t](1)}}),X.prototype.compact=function(){return this.filter(He)},X.prototype.find=function(e){return this.filter(e).head()},X.prototype.findLast=function(e){return this.reverse().find(e)},X.prototype.invokeMap=q(function(e,n){return typeof e=="function"?new X(this):this.map(function(t){return Gt(t,e,n)})}),X.prototype.reject=function(e){return this.filter($r(B(e)))},X.prototype.slice=function(e,n){e=$(e);var t=this;return t.__filtered__&&(e>0||n<0)?new X(t):(e<0?t=t.takeRight(-e):e&&(t=t.drop(e)),n!==i&&(n=$(n),t=n<0?t.dropRight(-n):t.take(n-e)),t)},X.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},X.prototype.toArray=function(){return this.take(Fe)},zn(X.prototype,function(e,n){var t=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),u=s[r?"take"+(n=="last"?"Right":""):n],l=r||/^find/.test(n);!u||(s.prototype[n]=function(){var h=this.__wrapped__,d=r?[1]:arguments,v=h instanceof X,x=d[0],z=v||K(h),T=function(Y){var Z=u.apply(s,Wn([Y],d));return r&&L?Z[0]:Z};z&&t&&typeof x=="function"&&x.length!=1&&(v=z=!1);var L=this.__chain__,R=!!this.__actions__.length,P=l&&!L,H=v&&!R;if(!l&&z){h=H?h:new X(this);var N=e.apply(h,d);return N.__actions__.push({func:Wr,args:[T],thisArg:i}),new on(N,L)}return P&&H?e.apply(this,d):(N=this.thru(T),P?r?N.value()[0]:N.value():N)})}),rn(["pop","push","shift","sort","splice","unshift"],function(e){var n=hr[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);s.prototype[e]=function(){var u=arguments;if(r&&!this.__chain__){var l=this.value();return n.apply(K(l)?l:[],u)}return this[t](function(h){return n.apply(K(h)?h:[],u)})}}),zn(X.prototype,function(e,n){var t=s[n];if(t){var r=t.name+"";re.call(_t,r)||(_t[r]=[]),_t[r].push({name:n,func:t})}}),_t[Dr(i,ze).name]=[{name:"wrapper",func:i}],X.prototype.clone=qc,X.prototype.reverse=Yc,X.prototype.value=Xc,s.prototype.at=zd,s.prototype.chain=Id,s.prototype.commit=Sd,s.prototype.next=Td,s.prototype.plant=Ed,s.prototype.reverse=Cd,s.prototype.toJSON=s.prototype.valueOf=s.prototype.value=Ld,s.prototype.first=s.prototype.head,Ft&&(s.prototype[Ft]=Ad),s},mt=Sc();Qn?((Qn.exports=mt)._=mt,Ci._=mt):Re._=mt}).call(St)})(Qr,Qr.exports);var ot=Qr.exports;const fi=class{constructor(){Zt(this,"state",{isGameInit:!1,isGameing:!1,enemySource:void 0,enemyImgSource:{},towerSource:void 0,othOnloadImg:{},mapLevel:0,isMobile:!1,ratio:1,progress:0})}static get instance(){return this._instance||(this._instance=new fi),this._instance}async loadingAllImg(o,i){return this.state.progress>=100?100:Promise.all([this.handleOtherImg().then(()=>{o(this.state.progress)}),this.handleEnemyImg(o,i==null?void 0:i.enemyNameList).then(()=>{o(this.state.progress)}),this.handleTowerImg(i==null?void 0:i.towerList).then(()=>{o(this.state.progress)})]).then(()=>(this.state.progress=100,o(this.state.progress),this.state.progress))}async handleEnemyImg(o,i){var c;const f=(c=i==null?void 0:i.reduce((_,b)=>({..._,[b]:Zr[b]}),{}))!=null?c:Zr,g=Object.keys(f);this.state.enemySource||(this.state.enemySource=ot.cloneDeep(f));const m=70/g.length;return Promise.all(g.map(async _=>{var S,I;const b=this.state.enemyImgSource[_],A=this.state.enemySource[_];if(!((S=b==null?void 0:b.imgList)!=null&&S.length)&&!(b!=null&&b.img)){if(A.imgType==="gif"){const C=await Xr(A.imgSource,!0);this.state.enemyImgSource[A.name]={imgList:C}}else{const C=await Jt(A.imgSource);this.state.enemyImgSource[A.name]={img:C}}if((I=A.skill)!=null&&I.img){const C=await Xr(A.skill.img,!0);this.state.enemyImgSource[A.name].skill={list:C,total:C.reduce((O,G)=>O+=G.delay,0)}}if(A.dieImg){const C=await Xr(A.dieImg,!0);A.name==="zombie-boom"&&(C.pop(),C.pop()),this.state.enemyImgSource[A.name].die={list:C,total:C.reduce((O,G)=>O+=G.delay,0)}}this.state.progress+=m,o(this.state.progress)}}))}async handleTowerImg(o){var m;const i=(m=o==null?void 0:o.reduce((c,_)=>{const b=JSON.parse(JSON.stringify(Jr[_.towerName]));return b.x=_.x,b.y=_.y,c[_.towerName]=b,c},{}))!=null?m:Jr,f=Object.keys(i);this.state.towerSource||(this.state.towerSource=ot.cloneDeep(i));const g=20/f.length/2;return Promise.all(f.map(async c=>{const _=this.state.towerSource[c];_.onloadImg||(_.onloadImg=await Jt(i[c].img),this.state.progress+=g),_.onloadbulletImg||(_.onloadbulletImg=await Jt(i[c].bulletImg),this.state.progress+=g)}))}async handleOtherImg(){const o=Object.keys(Fa),i=10/o.length;return Promise.all(o.map(f=>this.state.othOnloadImg[f]?"":Jt(Fa[f]).then(g=>{this.state.othOnloadImg[f]=g,this.state.progress+=i})))}};let Qt=fi;Zt(Qt,"_instance");var wn=Qt.instance;function An(a,o,i){return Math.min(Math.max(a,o),i)}function bn(a,o){return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}function Ba(a,o){return Math.floor(Math.random()*(o-a)+a)}function Rs(a){const o={"zombie-1":4,"zombie-2":5,"zombie-3":6,"iron-gate":7,rugby:7,newspaper:7,"zombie-dance":14,"pole-vault":10,"ice-car":14,afu:12,fulisha:14,kunkun:16,rabbish:12,"rabbish-2":15,godzilla:18,"zombie-boom":15},i=Math.sqrt(Math.sqrt(a));let f=0;for(const m in o){let c=o[m];c=Math.pow(c,i),f+=c}const g=Ba(1,f);for(const m in o)if(!!o[m]&&(f-=o[m],g>f))return m;return"zombie-1"}const Pa=a=>{const o=[],i=Math.pow(Math.sqrt(a),Math.sqrt(Math.sqrt(a))),f=5+Math.floor(i*Math.min(a,10)/a);for(let g=0;g<f;g++)o.push(Rs(a));return o};function Ds(a=1e3){return new Promise(o=>{setTimeout(()=>{o()},a)})}const qe={makeEnemy:"makeEnemy",startMoneyTimer:"startMoneyTimer",slow:"slow",skill:"skill",towerShoot:"towerShoot",twitch:"twitch",twitchDelete:"twitchDelete",poisonFun:"poisonFun",frozenTower:"frozenTower"},ci=class{constructor(){Zt(this,"timerMap",new Map)}static get instance(){return this._instance||(this._instance=new ci),this._instance}set(o,i,f=0,{isTimeOut:g=!1,isCover:m}={}){this.stopTime(o),(!this.timerMap.has(o)||m)&&i&&this.timerMap.set(o,{timeout:void 0,interval:void 0,cur:0,end:0,fn:i,intervalTime:f,remainTime:f,isTimeOut:g});const c=this.timerMap.get(o);f&&c.intervalTime!==f&&(c.intervalTime=f,c.remainTime=f),c.remainTime-=c.end-c.cur,c.cur=Date.now(),c.end=c.cur,c.timeout=setTimeout(()=>{c.cur=Date.now(),c.end=c.cur,c.remainTime=c.intervalTime,c.isTimeOut||(c.interval=setInterval(()=>{c.cur=Date.now(),c.end=c.cur,c.fn()},c.intervalTime)),c.fn(),c.isTimeOut&&this.delete(o)},c.remainTime)}pause(o){const i=this.timerMap.get(o);if(i)return i.end=Date.now(),this.stopTime(o),i.end-i.cur}allPause(o=!0){this.timerMap.forEach((i,f)=>{o?this.pause(f):this.set(f)})}delete(o){this.stopTime(o),this.timerMap.has(o)&&this.timerMap.delete(o)}clear(){this.timerMap&&(this.timerMap.forEach((o,i)=>{this.stopTime(i)}),this.timerMap.clear())}stopTime(o){const i=this.timerMap.get(o);i!=null&&i.timeout&&(clearTimeout(i.timeout),i.timeout=void 0),i!=null&&i.interval&&(clearInterval(i.interval),i.interval=void 0)}};let Vt=ci;Zt(Vt,"_instance");var be=Vt.instance;const jt=a=>`${a?a+"-":""}${Math.ceil(Math.random()*1e6).toString(36)}-${Date.now().toString(36)}`,Os=(a,o)=>{const i=o.x-a.x,f=o.y-a.y;return Math.atan(f/i)},Fs=(a,o)=>Math.cos(Os(a,o)),Na=(a,o)=>{const i=o.x-a.x,f=o.y-a.y,g=180*Math.acos(i/Math.sqrt(i*i+f*f))/Math.PI;return f<0?360-g:g};function ka({ctx:a,x:o,y:i,tx:f,ty:g,thickness:m,thicknessPre:c,linearGradient:_,globalAlpha:b=1}){const A=Na({x:o,y:i},{x:f,y:g}),S=bn(o-f,i-g);a.save(),a.translate(o,i),a.rotate(A*Math.PI/180),a.globalAlpha=b,a.translate(-o,-i);const I=i-(m-c)/2;if(a.createLinearGradient){const C=a.createLinearGradient(o,I,o,I+m);_.forEach(O=>{C.addColorStop(O.value,O.color)}),a.strokeStyle=C,a.fillStyle=C}else a.strokeStyle=_[0].color,a.fillStyle=_[2].color;a.beginPath(),a.roundRect?a.roundRect(o,I,S,m,m/2):(a.moveTo(o+m/2,I),a.arcTo(o+S,I,o+S,I+m,m/2),a.arcTo(o+S,I+m,o,I+m,m/2),a.arcTo(o,I+m,o,I,m/2),a.arcTo(o,I,o+S,I,m/2)),a.fill(),a.stroke(),a.restore()}const ut={twitch:[]};function Bs(a,o){for(const i of a){const f=ae.get(i);if(!f)break;const g=k.size/2,{x:m,y:c,w:_,h:b}=f,A=m+_/2,S=c+b/2,{x:I,y:C,speed:O,name:G,id:V,isThrough:ee,bulletInitDeg:ze}=o,ue={x:I+g,y:C+g},Ie={x:A-ue.x,y:S-ue.y},Ye=bn(Ie.x,Ie.y),Ue=O*Ie.x/Ye,xn=O*Ie.y/Ye,E={x:ue.x,y:ue.y,addX:Ue,addY:xn,xy:Ye,e_id:i};if(ee&&(E.attactIdSet=new Set),G==="delaiwen"&&(E.isRecycling=!1),ze!==void 0){const W=Na({x:ue.x,y:ue.y},{x:A,y:S});E.deg=-ze+W}o.bulletArr.push(E)}o.targetIdList=a,o.name==="lanbo"&&(o.isBulleting=!0)}function Vr({x:a,y:o,w:i,h:f,deg:g,img:m}){const c=k.ctx;c.save(),c.translate(a+i/2,o+f/2),c.rotate(g*Math.PI/180),c.translate(-(a+i/2),-(o+f/2)),c.drawImage(m,a,o,i,f),c.restore()}function Ps(){const a=[];Ae.forEach(o=>{var i;if(o.enemySkill)for(let f=o.bulletArr.length-1;f>=0;f--){const{w:g,h:m}=o.bSize,c=o.bulletArr[f];let{x:_,y:b,addX:A,addY:S,e_id:I}=c;const C=Ys(I,o,c.x,c.y);if(C){const{addX:O,addY:G,distance:V}=C;A=O,S=G,c.addX=O,c.addY=G,c.xy=V}else c.xy-=o.speed;if(c.x+=A,c.y+=S,o.isThrough){const O=Xs({x:_,y:b,w:g,h:m,attactIdSet:c.attactIdSet});O&&(c.e_id=O)}Ns(o,f,I,a),o.isThrough&&Zs({x:_,y:b,w:g,h:m})&&(o.name==="delaiwen"?c.isRecycling||(c.isRecycling=!0,(i=c.attactIdSet)==null||i.clear(),o.bulletArr[f].addX=-o.bulletArr[f].addX,o.bulletArr[f].addY=-o.bulletArr[f].addY):o.bulletArr.splice(f,1)),o.name==="delaiwen"&&c.isRecycling&&jr({x:_,y:b,w:g,h:m},o.id,!0)&&o.bulletArr.splice(f,1)}o.isBulleting&&Ws(o),o.name==="huonan"&&Us(o)}),a!=null&&a.length&&Tt(a)}function Ns(a,o,i,f){var b,A,S,I;const g=a.bulletArr[o],{w:m,h:c}=a.bSize;if(a.name!=="twitch"&&jr({x:g.x,y:g.y,w:m,h:c},i)&&!(a.isThrough&&((b=g.attactIdSet)==null?void 0:b.has(i))))a.isThrough?(A=g.attactIdSet)==null||A.add(i):a.bulletArr.splice(o,1),ks(i,a,f);else{a.isSaveBullet&&a.name==="twitch"&&g.xy<=0&&(Ks(a,g),a.bulletArr.splice(o,1)),!a.isThrough&&!a.isSaveBullet&&g.xy<=0&&a.bulletArr.splice(o,1);const C=k.ctx,O=g.x-m/2,G=g.y-c/2;a.name==="fengche"?(g.rotateDeg=((S=g.rotateDeg)!=null?S:0)+3,Vr({deg:g.rotateDeg,x:O,y:G,w:m,h:c,img:a.onloadbulletImg})):a.name==="delaiwen"?(g.rotateDeg=((I=g.rotateDeg)!=null?I:0)+20,Vr({deg:g.rotateDeg,x:O,y:G,w:m,h:c,img:a.onloadbulletImg})):["lanbo"].includes(a.name)||(g.deg?Vr({deg:g.deg,x:O,y:G,w:m,h:c,img:a.onloadbulletImg}):C.drawImage(a.onloadbulletImg,O,G,m,c))}}function ks(a,o,i){const f=ae.get(a);if(!f)return;let g=f.hp.cur-o.damage;if(o.name==="delaiwen"&&g*10<=f.hp.sum&&(g=0),f.hp.cur=Math.max(g,0),f.hp.cur<=0){if(Q.isTowerCover&&!f.id.includes("callenemy")){f.hp.cur=f.hp.sum;return}i.push(a),o.targetIdList.splice(o.targetIdList.findIndex(c=>c===a),1);let m=f.reward;o.name==="delaiwen"&&Math.floor(Math.random()*10)===9&&(m=f.reward*2),cn(m)}else o.slow&&st(a,o.slow)}function Ws(a){const{w:o,h:i}=a.bSize,f=k.ctx;if(a.name==="lanbo"){let{x:g,y:m,scale:c=1,r:_,addScale:b}=a;if(c*o/2<=_)c+=b!=null?b:.3;else{a.scale=1,a.isBulleting=!1;return}f.save(),f.translate((g+o/2)*(1-c),(m+i/2)*(1-c)),f.scale(c,c),f.drawImage(a.onloadbulletImg,g,m,o,i),f.restore(),a.scale=c}}function Us(a){var i;const o=ae.get(a.targetIdList[0]);!o||$a(a.enemySkill)||(oi(o,a.damage),a.damage<a.preDamage*3&&(a.thickness=Math.min(a.thickness+.025,k.size/2),a.damage+=.001),a.targetIdList[0]&&Gs(a,o),a.curTargetId!==a.targetIdList[0]&&(a.thickness=a.bSize.w,a.damage=(i=a.preDamage)!=null?i:1,a.curTargetId=a.targetIdList[0]))}function Gs(a,o){const{thickness:i=1,x:f,y:g}=a,m=k.size,{x:c,y:_,w:b,h:A}=o;ka({ctx:k.ctx,thickness:i,thicknessPre:a.bSize.w,x:f+m/2,y:g+m/2,tx:c+b/2,ty:_+A/2,linearGradient:[{value:0,color:"#de5332"},{value:.4,color:"#f3c105"},{value:.5,color:"#ffc800"},{value:.6,color:"#f3c105"},{value:1,color:"#de5332"}]})}function Ks(a,o){const i=a.bSize.w*5,f=a.bSize.h*5,g=jt("twitch-bid"),m={id:g,tId:a.id,x:o.x-i/2,y:o.y-f/2,w:i,h:f};ut.twitch.push(m),be.set(g,()=>{const c=ut.twitch.findIndex(_=>_.id===g);ut.twitch.splice(c,1)},a.poison.bulletTime,{isTimeOut:!0})}function $s(){if(!ut.twitch.length)return;const a=k.ctx,o=ge.towerSource.twitch.onloadbulletImg;a.save(),a.globalAlpha=.3,ut.twitch.forEach(i=>{a==null||a.drawImage(o,i.x,i.y,i.w,i.h)}),a.restore()}function Hs(a){const o=Jr.twitch;for(const i of a){const f=ae.get(i);if(!f)return;f.poison?f.poison.isToTimePoison&&(f.poison.isToTimePoison=!1,st(i,o.slow),qs(i,o),be.set(`${qe.poisonFun}-${i}`,()=>{f.poison.isToTimePoison=!0},1e3,{isTimeOut:!0})):f.poison={level:0,damage:o.damage,isToTimePoison:!0}}}function qs(a,o){const i=ae.get(a);if(i){const f=i.poison;f.level<5&&f.level++,oi(i,f.level*f.damage),be.set(`${qe.twitch}-${a}`,()=>{oi(i,f.level*f.damage)},1e3),be.set(`${qe.twitchDelete}-${a}`,()=>{be.delete(`${qe.twitch}-${a}`),i.poison=void 0},o.poison.time,{isTimeOut:!0})}}function Ys(a,o,i,f){if(o.isThrough||o.name==="twitch")return;const g=ae.get(a);if(!g)return;const m=k.size/2,{x:c,y:_,w:b,h:A}=g,S=c+b/2,I=_+A/2,{speed:C,x:O,y:G}=o,V={x:S-i,y:I-f},ee=bn(V.x,V.y);return{addX:C*V.x/ee,addY:C*V.y/ee,distance:bn(S-(O+m),I-(G+m))}}function Xs(a){const{x:o,y:i,w:f,h:g,attactIdSet:m}=a;for(const c of ae.values())if(!m.has(c.id)&&jr({x:o,y:i,w:f,h:g},c.id))return c.id;return!1}function Zs(a){let{x:o,y:i,w:f,h:g}=a;const m=Jn.offscreen.width,c=Jn.offscreen.height;return o=o-f/2,i=i-g/2,o+f<0||i+g<0||o>m||i>c}function jr({x:a,y:o,w:i,h:f},g,m){const c=m?Ae.get(g):ae.get(g);if(!c)return;const _=k.size,{x:b,y:A,w:S=_,h:I=_}=c,C=(O,G,V)=>V>O-G/2&&V<O+G/2;return C(a,i,b+S/2)&&C(o,f,A+I/2)}const ei=[[["zombie-flag","zombie-1","zombie-1","zombie-1","zombie-2","zombie-2","zombie-2","zombie-3","zombie-3","zombie-3"],["zombie-flag","zombie-3","zombie-3","zombie-1","zombie-1","zombie-1","zombie-2","zombie-2","zombie-3","zombie-3","iron-gate"],["zombie-flag","iron-gate","zombie-1","zombie-1","zombie-2","zombie-2","zombie-3","zombie-3","zombie-3","iron-gate","iron-gate"],["zombie-flag","iron-gate","zombie-2","zombie-1","zombie-1","zombie-2","zombie-3","iron-gate","rugby","pole-vault","pole-vault"],["zombie-flag","rugby","zombie-2","zombie-1","zombie-2","zombie-2","iron-gate","iron-gate","rugby","pole-vault","rugby","zombie-boom"],["zombie-flag","iron-gate","zombie-2","zombie-2","zombie-3","zombie-3","iron-gate","newspaper","iron-gate","iron-gate","newspaper","rugby"],["zombie-flag","newspaper","newspaper","pole-vault","pole-vault","pole-vault","newspaper","pole-vault","pole-vault","pole-vault","rugby","rugby"],["zombie-flag","rugby","rugby","rugby","rugby","rugby","rugby","rugby","rugby","zombie-boom","rugby","zombie-boom","rugby","zombie-boom","rugby"],["zombie-flag","zombie-2","zombie-3","iron-gate","pole-vault","newspaper","newspaper","pole-vault","rugby","rugby","zombie-dance"],["zombie-flag","iron-gate","iron-gate","iron-gate","iron-gate","zombie-boom","zombie-boom","iron-gate","rugby","rugby","rugby","zombie-dance"],["zombie-flag","zombie-flag","zombie-flag","zombie-flag","zombie-flag","zombie-flag","zombie-flag","zombie-flag","zombie-flag","zombie-flag"],["zombie-flag","zombie-3","zombie-3","zombie-3","zombie-3","godzilla","zombie-3","zombie-3","zombie-3","zombie-3"],["zombie-flag","zombie-3","zombie-dance","zombie-3","ice-car","iron-gate","iron-gate","rugby","rugby","rugby","zombie-dance"],["zombie-flag","zombie-3","zombie-2","zombie-1","rabbish","rabbish-2","rabbish","zombie-1","zombie-2","zombie-3"],["zombie-flag","zombie-2","zombie-3","pole-vault","iron-gate","rugby","pole-vault","zombie-dance","zombie-2","pole-vault","ice-car","ice-car"],["zombie-flag","ice-car","zombie-1","ice-car","zombie-2","ice-car","zombie-3","ice-car","zombie-2","ice-car","zombie-1","ice-car"],["zombie-flag","rabbish","zombie-dance","pole-vault","ice-car","zombie-dance","ice-car","pole-vault","rabbish","afu","rabbish"],["zombie-flag","zombie-3","zombie-3","zombie-dance","zombie-dance","godzilla","zombie-dance","zombie-dance","zombie-3","zombie-3"],["zombie-flag","rabbish","ice-car","zombie-dance","rabbish-2","rabbish-2","rabbish","zombie-dance","zombie-3","rabbish"],["zombie-flag","zombie-1","zombie-2","zombie-3","iron-gate","rugby","newspaper","zombie-dance","pole-vault","ice-car","afu","fulisha","kunkun","rabbish","rabbish-2","zombie-boom","godzilla"],["zombie-flag","iron-gate","rabbish","rabbish","rabbish-2","rabbish","rabbish","iron-gate"],["zombie-flag","afu","rabbish","pole-vault","rugby","godzilla","rabbish-2","fulisha","fulisha","iron-gate"],["zombie-flag","zombie-boom","zombie-boom","zombie-boom","zombie-boom","zombie-boom","zombie-boom","zombie-boom","zombie-boom","zombie-boom","zombie-boom"],["zombie-flag","ice-car","ice-car","ice-car","ice-car","ice-car","ice-car","ice-car","ice-car","ice-car"],["zombie-flag","godzilla","godzilla","godzilla","godzilla","godzilla","godzilla","godzilla","godzilla","godzilla"]]],Wa=[{start:[{x:0,y:5,x_y:3,num:73}],map:[{2:2,4:3,6:2,8:3,18:4,20:3,22:4,24:3,26:4,28:1,30:4,32:1,34:4,36:1,46:2,48:1,51:2,53:3,58:2,61:3,67:4,70:1}],enemyArr:[["ice-car"]]},{start:[{x:7,y:5,x_y:1,num:23},{x:11,y:5,x_y:3,num:23},{x:7,y:6,x_y:1,num:22},{x:11,y:6,x_y:3,num:22}],map:[{1:2,2:1,3:2,4:1,5:2,6:1,7:2,8:1,9:2,10:3,13:4,14:3,15:4,16:3,17:4,18:3,19:4,20:3,22:4},{1:2,2:3,3:2,4:3,5:2,6:3,7:2,8:3,9:2,10:1,13:4,14:1,15:4,16:1,17:4,18:1,19:4,20:1,22:4},{1:4,2:1,3:4,4:1,5:4,6:1,7:4,8:1,9:4,10:3,13:2,14:3,15:2,16:3,17:2,18:3,19:2,20:3,22:2},{1:4,2:3,3:4,4:3,5:4,6:3,7:4,8:3,9:4,10:1,13:2,14:1,15:2,16:1,17:2,18:1,19:2,20:1,22:2}],end:{x:9,y:6}},{start:[{x:1,y:1,x_y:4,num:26},{x:18,y:1,x_y:4,num:27},{x:1,y:10,x_y:2,num:27},{x:18,y:10,x_y:2,num:28}],map:[{3:3,8:2,9:1,10:2,11:1,12:2,13:1,14:2,16:3,18:4,19:3,20:4,21:3,22:4,23:3,24:4,25:3},{3:1,8:2,9:3,10:2,11:3,12:2,13:3,14:2,16:1,18:4,19:1,20:4,21:1,22:4,23:1,24:4,25:1},{3:3,8:4,9:1,10:4,11:1,12:4,13:1,14:4,16:3,18:2,19:3,20:2,21:3,22:2,23:3,24:2,25:3,26:2},{3:1,8:4,9:3,10:4,11:3,12:4,13:3,14:4,16:1,18:2,19:1,20:2,21:1,22:2,23:1,24:2,25:1,27:2}],end:{x:9,y:5}},{start:[{x:13,y:5,x_y:3,num:39},{x:13,y:6,x_y:3,num:38}],map:[{4:2,8:1,15:4,18:1,21:2,24:1,31:4,34:3,38:4},{4:4,8:1,15:2,18:1,21:4,24:1,31:2,34:3}],end:{x:5,y:6}},{start:[{x:1,y:5,x_y:3,num:34},{x:1,y:6,x_y:3,num:33}],map:[{2:2,4:3,5:4,6:3,7:4,8:3,10:2,13:3,14:4,15:3,16:4,17:3,18:4,19:3,21:2,25:3,26:4,27:3,28:4,29:3,30:4,31:3,32:4,33:3},{2:4,4:3,5:2,6:3,7:2,8:3,10:4,13:3,14:2,15:3,16:2,17:3,18:2,19:3,21:4,25:3,26:2,27:3,28:2,29:3,30:2,31:3}],end:{x:18,y:6}},{start:[{x:1,y:1,x_y:4,num:32},{x:17,y:1,x_y:4,num:32}],map:[{9:3,11:2,20:3,21:4,26:3,28:2,29:3,31:4},{9:1,11:2,20:1,21:4,26:1,28:2,29:1,31:4}],end:{x:9,y:7}},{start:[{x:1,y:1,x_y:4,num:36},{x:4,y:1,x_y:4,num:27}],map:[{1:3,2:4,3:3,4:4,5:3,6:4,7:3,8:4,9:3,10:4,11:3,12:4,13:3,14:4,15:3,16:4,17:3,19:2,20:3,21:2,22:3,23:2,24:3,25:2,26:3,27:2,28:3,29:2,30:3,31:2,32:3,33:2,34:3,35:2},{1:3,2:4,3:3,4:4,5:3,6:4,7:3,8:4,9:3,10:4,11:3,13:2,14:3,15:2,16:3,17:2,18:3,19:2,20:3,21:2,22:3,23:2,24:3,25:2,26:3}],end:{x:19,y:1}},{start:[{x:1,y:5,x_y:2,num:48},{x:9,y:1,x_y:3,num:36},{x:5,y:10,x_y:3,num:37}],map:[{3:3,5:4,8:3,23:4,26:1,41:4,44:1,46:2},{8:4,14:1,29:4,32:1,34:2},{12:2,15:1,30:4,33:1,35:2}],end:{x:1,y:7}},{start:[{x:9,y:1,x_y:4,num:49}],map:[{1:1,3:4,4:1,6:4,7:1,11:4,12:3,16:4,17:3,19:4,20:3,22:4,24:3,25:2,27:3,29:2,30:3,32:2,33:3,37:2,38:1,42:2,43:1,45:2,46:1,48:2}],end:{x:10,y:1}},{start:[{x:18,y:10,x_y:1,num:57}],map:[{16:2,18:3,19:2,21:3,22:2,24:3,25:2,27:3,28:2,29:3,31:4,32:3,33:4,35:3,36:4,38:3,39:4,41:3,42:4,43:3,44:2,45:3,46:2,48:3,49:2,51:3,52:2,53:3,54:2,55:3,56:2}],end:{x:18,y:1}},{start:[{x:3,y:3,x_y:4,num:38},{x:16,y:3,x_y:4,num:37}],map:[{1:3,2:4,3:3,5:2,6:3,7:2,8:3,9:2,10:3,11:2,13:1,21:4,30:3},{1:1,2:4,3:1,5:2,6:1,7:2,8:1,9:2,10:1,11:2,13:3,21:4,30:1}],end:{x:10,y:10}},{start:[{x:15,y:4,x_y:4,num:108}],map:[{1:1,15:1,45:1,87:1,105:1,3:2,21:2,63:2,93:2,107:2,6:3,28:3,72:3,98:3,10:4,36:4,80:4,102:4}]},{start:[{x:8,y:5,x_y:2,num:66}],map:[{2:1,4:2,5:1,7:2,8:1,12:4,16:3,17:4,19:3,21:4,23:3,25:4,26:3,28:4,29:3,30:4,31:3,34:2,35:3,36:2,37:3,39:2,40:3,42:2,44:3,46:2,48:3,49:2,53:1,57:4,58:1,60:4,61:1,63:4}]},{start:[{x:1,y:1,x_y:3,num:58}],map:[{5:4,9:1,14:4,19:3,34:2,35:1,40:2,44:3,49:2,53:1}]},{start:[{x:19,y:5,x_y:1,num:57}],map:[{13:1,20:1,8:2,44:2,30:3,42:3,48:3,15:4,28:4,38:4}]},{start:[{x:0,y:10,x_y:3,num:68}],map:[{2:2,3:3,4:2,5:3,6:2,7:3,8:2,9:3,10:2,11:3,12:2,13:3,14:2,15:3,16:2,17:3,18:2,19:3,20:2,21:3,23:4,24:3,25:4,26:3,27:4,28:3,29:4,30:3,31:4,32:3,33:4,34:3,35:4,37:1,40:2,41:1,42:2,43:1,44:2,45:1,46:2,47:1,49:4,50:1,51:4,52:1,53:4,54:1,55:4,56:1,58:4,60:3}]},{start:[{x:11,y:10,x_y:2,num:50}],map:[{3:3,10:2,12:1,14:2,15:1,17:2,18:1,20:2,21:1,22:2,23:1,26:4,27:1,28:4,29:1,31:4,32:1,34:4,35:1,37:4,39:3,46:4}]},{start:[{x:14,y:3,x_y:4,num:84}],map:[{1:1,2:4,4:3,7:2,8:3,9:2,10:3,12:2,14:1,16:2,17:1,19:2,20:1,22:4,23:1,24:4,25:1,26:4,28:1,29:4,30:1,32:2,35:1,36:2,37:1,38:2,39:1,44:4,46:1,47:4,52:3,53:4,57:3,59:2,63:3,65:4,69:3,71:2,75:3,79:4,81:3}]},{start:[{x:3,y:1,x_y:4,num:25},{x:7,y:1,x_y:4,num:23},{x:11,y:1,x_y:4,num:17},{x:15,y:1,x_y:4,num:13}],map:[{3:1,5:4,10:3},{5:1,8:4,11:3},{2:1,4:4,7:3,9:4,12:3},{3:1,5:4,10:3}],end:{x:17,y:10}}],ni={experience:[{start:[{x:1,y:1,x_y:4,num:39},{x:18,y:1,x_y:1,num:32},{x:18,y:9,x_y:4,num:28},{x:2,y:9,x_y:2,num:30}],map:[{3:3,5:2,9:3,11:4,15:3,17:2,21:3,23:4,31:3,33:2},{4:4,6:3,11:4,12:1,15:4,17:3,20:4,21:1,28:2},{1:1,3:2,5:1,7:4,9:1,16:2,17:3,19:2,20:3,22:2},{1:1,3:4,7:3,11:2,15:3,20:4,22:3,24:2}],end:{x:11,y:2},towerArr:[{tname:"aixi",x:4,y:6},{tname:"aixi",x:13,y:5},{tname:"aixi",x:13,y:9},{tname:"lanbo",x:3,y:8},{tname:"lanbo",x:3,y:9},{tname:"lanbo",x:4,y:3},{tname:"lanbo",x:4,y:4},{tname:"lanbo",x:14,y:4},{tname:"lanbo",x:14,y:5},{tname:"lanbo",x:14,y:8},{tname:"huonan",x:8,y:6},{tname:"huonan",x:8,y:5},{tname:"huonan",x:10,y:6},{tname:"huonan",x:10,y:5},{tname:"delaiwen",x:0,y:2},{tname:"delaiwen",x:0,y:6},{tname:"ez",x:19,y:11},{tname:"ez",x:17,y:0},{tname:"twitch",x:7,y:8},{tname:"twitch",x:13,y:4},{tname:"twitch",x:15,y:10},{tname:"jin",x:10,y:8},{tname:"jin",x:10,y:7},{tname:"delaiwen",x:6,y:10},{tname:"delaiwen",x:6,y:11},{tname:"huonan",x:14,y:2},{tname:"ejiate",x:15,y:2}],enemyArr:[["zombie-flag","godzilla","zombie-boom","godzilla","zombie-boom","rabbish-2","rabbish","rabbish-2","ice-car","ice-car","fulisha","fulisha","zombie-boom","kunkun","kunkun","zombie-dance","zombie-dance","afu","pole-vault","newspaper","rugby","iron-gate","zombie-3","zombie-2","zombie-1"],["zombie-flag","zombie-dance","rabbish-2","zombie-dance","rabbish-2","zombie-dance","rabbish-2","zombie-dance","rabbish-2","zombie-dance","rabbish-2","zombie-dance","rabbish-2"],["zombie-flag","fulisha","rabbish-2","fulisha","rabbish-2","fulisha","rabbish-2","fulisha","rabbish-2","fulisha","rabbish-2","fulisha","rabbish-2"],["zombie-flag","godzilla","godzilla","godzilla","godzilla","godzilla","godzilla","godzilla","godzilla","godzilla","godzilla"],["zombie-flag","kunkun","rabbish-2","kunkun","rabbish-2","kunkun","rabbish-2","kunkun","rabbish-2"],["zombie-flag","zombie-1","zombie-2","zombie-3","iron-gate","rugby","newspaper","zombie-dance","pole-vault","ice-car","afu","fulisha","kunkun","rabbish","rabbish-2","zombie-boom","godzilla"]]}],endless:[{start:[{x:0,y:5,x_y:3,num:74}],map:[{2:2,4:3,6:2,8:3,18:4,20:3,22:4,24:3,26:4,28:1,30:4,32:1,34:4,36:1,46:2,48:1,51:2,53:3,58:2,61:3,67:4,70:1}]}]},Ua={start:[{x:0,y:5,x_y:3,num:20}],map:[{6:2,10:1,16:4}]};var Zn=(a=>(a.Normal="Normal",a.Experience="Experience",a.Endless="Endless",a))(Zn||{});const nn=[{type:"Experience",typeIndex:0,...ni.experience[0]}];for(let a=nn.length,o=0;o<Wa.length;o++){const i={type:"Normal",enemyArr:ei[0],...Wa[o]};nn[a+o]=i}nn.push({type:"Endless",typeIndex:0,enemyArr:ei[0],start:ni.endless[0].start,map:ni.endless[0].map});const Ae=new Map;function Nn({x:a,y:o,tname:i},f=!0,g=!0){const{rate:m,money:c,onloadImg:_,onloadbulletImg:b,...A}=ot.cloneDeep(ge.towerSource[i]);if(g){if(D.money<c)return;cn(-c)}Q.isDevTestMode&&(A.damage/=10);const S=k.size,I={...A,x:a,y:o,id:jt(i),targetIdList:[],bulletArr:[],onloadImg:_,onloadbulletImg:b,rate:m,money:c};if(I.r*=S,I.speed*=S,I.bSize.w*=S,I.bSize.h*=S,I.hp.injuryTime=0,I.enemySkill={},I.name!=="huonan"&&(I.isToTimeShoot=!0),I.name==="lanbo"){I.scale=1;const{r:C,speed:O,bSize:{w:G,h:V}}=I,ee=bn(G/2,V/2);I.addScale=(C/ee-1)/((C-ee)/(O+1))}else I.name==="huonan"&&(I.thickness=I.bSize.w,I.preDamage=I.damage);Ae.set(I.id,I),Q.isTowerCover||(D.gridInfo.arr[Math.floor(o/S)][Math.floor(a/S)]="tower"),D.towersBuilt||(D.towersBuilt=0),D.towersBuilt++,D.coinsSpent||(D.coinsSpent=0),g&&(D.coinsSpent+=c),Ga(I),ve("buildTowerCallback",{towerId:I.id,audioKey:I.audioKey}),f&&ve("playDomAudio",{id:I.id})}function Js(){var a;(a=nn[ge.mapLevel].towerArr)==null||a.forEach(o=>{o.x*=k.size,o.y*=k.size,Nn(o,!1,!1)})}function Qs(){Ae.forEach(a=>{Ga(a)})}function Ga(a){const o=k.size,i=k.ctx;if(i.drawImage(a.onloadImg,a.x,a.y,o,o),a.hp.isShow&&a.hp.injuryTime+2e3>Date.now()){const{x:f,y:g,hp:m}=a,c=o/7;i.fillStyle="#0066a1",i.fillRect(f,g-c,o,c),i.fillStyle="#ff687b",i.fillRect(f,g-c,m.cur/m.sum*o,c),i.beginPath(),i.lineWidth=1,i.strokeStyle="#cff1d3",i.rect(f,g-c,o,c),i.stroke()}else a.hp.isShow=!1;for(const f in a.enemySkill)f==="frozen"&&a.enemySkill.frozen&&(i.save(),i.globalAlpha=.8,i.drawImage(wn.state.othOnloadImg.snow,a.x+o/4,a.y+o/4,o/2,o/2),i.restore())}function ti(a,o=1){a.hp.injuryTime=Date.now(),a.hp.cur-=o,a.hp.isShow=!0,a.hp.cur<=0&&(Q.isTowerCover?a.hp.cur=a.hp.sum:Ka(a.id,!1))}function Ka(a,o=!0){var b,A;const i=k.size,f=Ae.get(a);if(!f)return;const{x:g,y:m,saleMoney:c,id:_}=f;k.ctx.clearRect(g,m,i,i),D.gridInfo.arr[Math.floor(m/i)][Math.floor(g/i)]="",o&&cn(c),be.delete(`towerShoot-${_}`),(A=(b=f.enemySkill)==null?void 0:b.frozen)==null||A.ids.forEach(S=>{be.delete(S)}),Ae.delete(a),ve("removeAudio",_)}function $a(a){for(const o in a)if(o==="frozen"&&a.frozen)return!0}function Vs(){if(!!ae.size){Ae.forEach(a=>{if(!$a(a.enemySkill)){if(a.name==="huonan"){const o=ri(a);o?a.targetIdList=o:a.targetIdList.length&&(a.targetIdList=[])}else if(a.isToTimeShoot){const o=ri(a);o!=null&&o.length?(a.isToTimeShoot=!1,Bs(o,a),be.set(`${qe.towerShoot}-${a.id}`,()=>{a.isToTimeShoot=!0},a.rate,{isTimeOut:!0})):a.targetIdList.length&&(a.targetIdList=[])}}});for(const a of ut.twitch){const o=ri({x:a.x,y:a.y,r:a.w/2.5,size:a.w});o!=null&&o.length&&Hs(o)}}}function ri(a){const o=[];if(ae.forEach(i=>{!i.isDead&&si(i,a)&&o.push(i)}),!!o.length)return o.sort((i,f)=>{const g=i.endDistance-f.endDistance;return g===0?f.gridDistance-i.gridDistance:g}),a.targetNum?o.splice(0,a.targetNum).map(i=>i.id):o.map(i=>i.id)}function Ha(a,o,i){return Math.min(Math.max(a,o),i)}function js({x:a,y:o,tx:i,ty:f,endX:g,endY:m}){let c=0,_=0;a>i&&o>f?(c=0,_=0):a<i&&o>f?c=g:a<i&&o<f?(c=g,_=m):a>i&&o<f&&(_=m);const b=(o-_)/(a-c),A=(o-f)/(a-i),S=Math.abs(b),I=Math.abs(A);let C=0,O=0;return I>S?(O=o>f?0:m,C=An(a-(o-O)/A,0,g)):I<S&&(C=a>i?0:g,O=An(o-(a-C)*A,0,m)),{x:C,y:O}}const el=({k:a,b:o,points:i,line:f})=>{const{x1:g,y1:m,x2:c,y2:_}=i;if(nl(i,f))return!1;if(a===0)return m<=o&&o<=_;if(a===1/0)return g<=f.x1&&f.x1<=c;{const b=(m-o)/a,A=(_-o)/a,S=a*g+o,I=a*c+o;return g<=b&&b<=c||g<=A&&A<=c||m<=S&&S<=_||m<=I&&I<=_}};function nl(a,o){const i=(a.x1+a.x2)/2,f=(a.y1+a.y2)/2,g=bn(i-o.x1,f-o.y1),m=bn(i-o.x2,f-o.y2),c=bn(o.x2-o.x1,o.y2-o.y1);return g>c||m>c}function tl(){ae.forEach(a=>{var i;rl(a);const o=(i=a.skill)==null?void 0:i.animation;a.name==="godzilla"?o&&o.cur<o.sum&&fl(a):a.name==="ice-car"&&o&&o.cur<o.sum&&hl(a)})}function rl(a){var o;if(!((o=a.skill)!=null&&o.isTriggle))switch(a.name){case"zombie-boom":{a.hp.cur<a.hp.sum/2&&(ve("playDomAudio",{id:a.id,audioKey:a.skill.audioKeys[0]}),qa(a,dl));break}}}function il(a,o){const i=ae.get(o);if(!i.skill)return;let f;switch(a){case"zombie-dance":f=al;break;case"fulisha":f=ol;break;case"kunkun":f=ul;break;case"rabbish-2":f=sl;break;case"godzilla":f=ll;break;case"ice-car":f=cl;break}qa(i,f)}function qa(a,o){!o||(a.skill.isTriggle=!0,be.set(a.id,()=>{const i=ae.get(a.id);i&&(i.skill.count++,o(i))},a.skill.time))}function al(a){const{id:o,endDistance:i,movePathIndex:f}=a,g=D.mapItem.start[f].num-1;for(let m=0;m<4;m++){const c=ot.cloneDeep(ge.enemySource["dance-little"]);switch(c.movePathIndex=a.movePathIndex,c.level=a.level,m){case 0:c.endDistance=An(i-2,1,g);break;case 1:c.endDistance=An(i-1,1,g);break;case 2:c.endDistance=An(i+1,1,g);break;case 3:c.endDistance=An(i+2,1,g);break}const _=Ya(c,m);ae.set(_.id,_)}ve("playDomAudio",{id:o,volume:.6})}function ol(a){const{id:o,endDistance:i,movePathIndex:f}=a,g=D.mapItem.start[f].num-1;for(let m=0;m<2;m++){const c=ot.cloneDeep(ge.enemySource["zombie-little"]);switch(c.movePathIndex=a.movePathIndex,c.level=a.level,m){case 0:c.endDistance=An(i+2,1,g);break;case 1:c.endDistance=An(i+1,1,g);break}const _=Ya(c,m);ae.set(_.id,_)}ve("playDomAudio",{id:o,volume:.6})}function ul(a){const{id:o,hp:i}=a,f=i.cur+200;a.hp.cur=An(f,f,i.sum),ve("playDomAudio",{id:o})}function sl(a){ae.forEach(o=>{Math.abs(a.endDistance-o.endDistance)<=1&&(o.hp.cur=Math.min(o.hp.cur+o.hp.sum*.1,o.hp.sum))}),a.skill.animation.cur=0}function ll(a){if(!Ae.size)return;const o=k.size,i=a.x+a.w/2,f=a.y+a.h/2,g={distance:1/0,id:""};Ae.forEach(S=>{const I=bn(i-S.x+o/2,f-S.y+o/2);I<g.distance&&(g.distance=I,g.id=S.id)});const{x:m,y:c}=Ae.get(g.id),_=js({x:i,y:f,tx:m+o/2,ty:c+o/2,endX:Jn.offscreen.width,endY:Jn.offscreen.height}),b=(_.y-f)/(_.x-i),A=f-b*i;a.skill.direction={x:_.x,y:_.y,k:b,b:A},a.skill.towerIds=[],a.skill.animation.cur=0,Ae.forEach(S=>{const I=Fs({x:i,y:f},{x:S.x+o/2,y:S.y+o/2}),C=Math.abs(I*o)/2;[-C,0,C].some(G=>el({k:b,b:A+G,points:{x1:S.x,y1:S.y,x2:S.x+o,y2:S.y+o},line:{x1:i,y1:f+G,x2:_.x,y2:_.y+G}}))&&a.skill.towerIds.push(S.id)}),st(a.id,{num:0,time:1e3,type:"stop"}),ve("playDomAudio",{id:a.id})}function fl(a){Ae.forEach(o=>{var i;if((i=a.skill.towerIds)!=null&&i.includes(o.id)){const{cur:f,sum:g}=a.skill.animation;f>0&&!(f%Math.floor((g-1)/a.skill.damage))&&ti(o)}})}function cl(a){a.skill.animation.cur=0,st(a.id,{num:0,time:1e3,type:"stop"}),ve("playDomAudio",{id:a.id})}function hl(a){const o=k.size;Ae.forEach(i=>{var m,c,_;const f=`${qe.frozenTower}-${i.id}-${a.id}`;if((c=(m=i.enemySkill)==null?void 0:m.frozen)!=null&&c.ids.includes(f))return;const g=a.skill.r*o*(a.skill.animation.cur/a.skill.animation.sum);si({x:i.x,y:i.y,w:o,h:o},{x:a.x,y:a.y,r:g})&&((_=i.enemySkill)!=null&&_.frozen?i.enemySkill.frozen.ids.push(f):i.enemySkill.frozen={ids:[f]},be.set(f,()=>{var b;(b=i.enemySkill)!=null&&b.frozen&&(i.enemySkill.frozen=void 0)},a.skill.keepTime,{isTimeOut:!0}),ti(i))})}function gl(a){const o=k.size;Ae.forEach(i=>{const f=a.skill.r*o;si({x:i.x,y:i.y,w:o,h:o},{x:a.x,y:a.y,r:f})&&ti(i,a.skill.damage)})}function dl(a){a.skill.animation.cur=0;const o=wn.state.enemyImgSource[a.name].skill.total;a.skill.animation.sum=o,st(a.id,{num:0,time:o*1e3/60,type:"stop"}),ve("playDomAudio",{id:a.id,audioKey:a.skill.audioKeys[1]})}function Ya(a,o){const{endDistance:i,name:f,movePathIndex:g}=a,m=D.mapItem.start[g].num,{x:c,y:_}=Oe.movePath[g][m-i],b=jt(`callenemy-${o}`),A=k.size;return a.w*=A,a.h*=A,a.curSpeed*=A,a.speed*=A,a.hp.cur=a.hp.sum,a.hp.level=1,{...a,id:f+b,x:c-a.w/4,y:_-a.h/2,imgIndex:0,framesNum:0,gridDistance:0,isDead:!1}}function ml(a){var S;if(!((S=a.skill)!=null&&S.animation))return;const{name:o,skill:i,x:f,y:g,w:m,h:c}=a,_=wn.state.othOnloadImg,{cur:b,sum:A}=i.animation;switch(o){case"rabbish-2":{Xa(a,_.returnBlood);break}case"godzilla":{if(b===A)return;i.animation.cur++;const I=a.skill.direction,C=k.size,O=(b+A)/(A*2)*C,G=k.ctx;ka({ctx:G,thickness:O,thicknessPre:0,globalAlpha:.9,x:f+m/2,y:g+c/2,tx:I.x,ty:I.y,linearGradient:[{value:0,color:"#de5332"},{value:.4,color:"#f3c105"},{value:.5,color:"#ffc800"},{value:.6,color:"#f3c105"},{value:1,color:"#de5332"}]});break}case"ice-car":{Xa(a,_.frozen);break}case"zombie-boom":{i.count&&(b!==A&&i.animation.cur++,b===A&&(a.isDead?Tt([a.id]):(a.isDead=!0,i.animation.cur=0,a.skill.animation.sum=wn.state.enemyImgSource[a.name].die.total,ve("playDomAudio",{id:a.id,audioKey:a.skill.audioKeys[2]}),gl(a))));break}}}function Xa(a,o){const{skill:i,x:f,y:g,w:m,h:c}=a,{cur:_,sum:b}=i.animation;if(_===b)return;i.animation.cur++;const A=k.ctx;A.save(),A.globalAlpha=Math.min(.5,Math.min(_,b-_)/b);const S=i.r*(_/b)+.3;A.translate((f+m/2)*(1-S),(g+c/2)*(1-S)),A.scale(S,S),A.drawImage(o,f,g,m,m),A.restore()}const ae=new Map,Oe={levelEnemy:[],createdEnemyNum:0,movePath:[]},pl=()=>Ha(Math.ceil((D.level+1-(Za?20:5))/5),0,Ms);function ii(){const a=Q.isTowerCover?Q.enemyList.length:Oe.levelEnemy.length;return Oe.createdEnemyNum===a}function vl(){Q.isLevelLock||!ae.size&&ii()&&D.hp&&(D.level++,Q.isLevelLock=!0,Qa())}function ai(){ii()||be.set(qe.makeEnemy,()=>{ii()?be.delete(qe.makeEnemy):(wl(),Q.isLevelLock=!1)},D.intervalTime)}function _l(){ae.forEach(a=>{bl(a)||yl(a)})}function yl(a){xl(a),zl(a),Il(a),ml(a),a.hp.cur!==a.hp.sum&&(Sl(a),Tl(a))}function wl(){var V,ee;const a=(V=Q.enemyList)==null?void 0:V[Oe.createdEnemyNum],o=Q.isTowerCover?a.enemyName:Oe.levelEnemy[Oe.createdEnemyNum],i=ot.cloneDeep(ge.enemySource[o]),f=k.size;i.w*=f,i.h*=f,i.curSpeed*=f,i.speed*=f;const g=jt(o),m=(ee=a==null?void 0:a.level)!=null?ee:1+pl();i.hp.cur=i.hp.sum*(m+1)/2,i.hp.level=m,i.skill&&(i.skill.count=0),m>1&&(i.hp.sum*=(m+1)/2);const c=Math.floor(Math.random()*D.mapItem.start.length),_=D.mapItem.start[c],b={...i,id:g,level:m,imgIndex:0,endDistance:_.num,gridDistance:0,framesNum:0,movePathIndex:c,isDead:!1},{audioKey:A,name:S,w:I,h:C}=b,{x:O,y:G}=Q.isTowerCover?Ua.start[0]:_;b.x=O*f-I/4,b.y=G*f-C/2,ae.set(g,b),Oe.createdEnemyNum++,il(S,g),A&&ve("createAudio",{audioKey:A,id:g})}function oi(a,o){a.hp.cur=Math.max(a.hp.cur-o,0),D.damageDealt||(D.damageDealt=0),D.damageDealt+=o,a.hp.cur<=0&&(Q.isTowerCover&&!a.id.includes("callenemy")?a.hp.cur=a.hp.sum:(Tt([a.id]),cn(a.reward)))}function bl(a){if(a.isDead)return;const{curSpeed:o,speed:i,endDistance:f,isForward:g,movePathIndex:m,isFlip:c,id:_,w:b,h:A}=a;let S=f;const I=D.mapItem.start[m].num;if(Q.isTowerCover)S<0&&(S=I-1);else if(f<0)return D.damageTaken||(D.damageTaken=0),D.damageTaken+=1,Tt([_]),Cl(1),!0;const{x:C,y:O,x_y:G}=Oe.movePath[m][I-S];switch(G){case 1:{a.x-=o,g===c&&(a.isForward=!g);break}case 2:a.y-=o;break;case 3:{a.x+=o,!g===c&&(a.isForward=!g);break}case 4:a.y+=o;break}a.gridDistance+=o;const{x:V,y:ee}=a,ze=C-b/4,ue=O-A/2;ze-i<=V&&V<=ze+i&&ue-i<=ee&&ee<=ue+i&&(a.gridDistance=0,Q.isTowerCover?S===f?a.endDistance--:(a.endDistance=I-1,a.x-=o):a.endDistance--)}function Tt(a){var o,i;for(const f of a){const g=ae.get(f);g&&!D.isGameOver&&(D.enemiesKilled||(D.enemiesKilled=0),g.hp.cur<=0&&(D.enemiesKilled++,D.coinsEarned||(D.coinsEarned=0),D.coinsEarned+=g.reward||0)),be.delete(`${qe.slow}-${f}`),be.delete(`${qe.twitch}-${f}`),be.delete(`${qe.twitchDelete}-${f}`),be.delete(`${qe.poisonFun}-${f}`),(o=ae.get(f))!=null&&o.skill&&be.delete(f),Ae.forEach(m=>{var c;if(m.isThrough)for(const _ of m.bulletArr)(c=_.attactIdSet)==null||c.delete(f)}),(i=ae.get(f))!=null&&i.audioKey&&ve("removeAudio",f),ae.delete(f)}}function st(a,o,i){const f=ae.get(a),{speed:g,curSpeed:m}=f;if(m===0)return;const c=o.num?g/o.num:o.num;c<=m&&be.set(`${qe.slow}-${a}`,()=>{const _=ae.get(a);_&&(_.curSpeed=_.speed,_.slowType=void 0,i==null||i(_))},o.time,{isTimeOut:!0}),c<m&&(f.curSpeed=c,f.slowType=o.type)}function xl(a){var ee,ze;const{name:o,imgType:i,x:f,y:g,w:m,h:c,imgIndex:_,curSpeed:b,isForward:A,speed:S}=a,I=k.ctx,C=wn.state.enemyImgSource[o];let O=C.imgList,G=i==="gif"?O[_].img:C.img,V=!1;if(((ee=a.skill)==null?void 0:ee.animation)&&C.skill){const{cur:ue,sum:Ie}=a.skill.animation;ue!==Ie&&(ue||(a.imgIndex=0,a.framesNum=0),V=!0,a.isDead?C.die&&(G=C.die.list[a.imgIndex].img,O=C.die.list):(G=C.skill.list[a.imgIndex].img,O=C.skill.list))}if(I.save(),a.isDead){if((ze=a.skill)!=null&&ze.r){const ue=a.skill.r;I.translate((f+m/2)*(1-ue),(g+c/2)*(1-ue)),I.scale(ue,ue)}}else A||(I.translate(m+f*2,0),I.scale(-1,1));if(I.drawImage(G,f,g,m,c),I.restore(),i==="gif"){let ue=O[a.imgIndex].delay;b!==S&&(ue*=2-b/S),(b||V)&&(a.framesNum>=ue?(a.imgIndex++,a.framesNum=0):a.framesNum++),a.imgIndex===O.length&&(a.imgIndex=0)}}function zl(a){const{x:o,y:i,w:f,h:g,curSpeed:m,speed:c,slowType:_}=a,b=k.ctx,A=wn.state.othOnloadImg;if(m!==c){if(_==="stop")return;_==="twitch"?(b.save(),b.globalAlpha=.5,b.drawImage(A.snowPoison,o+f/4,i+g/3,f/2,f/2),b.restore()):m===0?(b.save(),b.globalAlpha=.9,b.drawImage(A.snowVertigo,o+f/4,i+g/3,f/2,f/2),b.restore()):(b.save(),b.globalAlpha=.9,b.drawImage(A.snow,o+f/4,i+g/3,f/3,f/3),b.restore())}}function Il(a){const{x:o,y:i,w:f,h:g,poison:m}=a;if(!m)return;const c=k.ctx,_=wn.state.othOnloadImg;c.save(),c.globalAlpha=.9;const b=g/10;if(m.level===5)c.drawImage(_.poison,o+f/4,i-b-f/2,f/2,f/2);else{let A=[3*f/8,f/4,f/8,0],S=o+A[m.level-1];for(let I=0;I<m.level;I++)c.drawImage(_.poison,S,i-b-f/4,f/4,f/4),S+=f/4}c.restore()}function Sl(a){const{x:o,y:i,w:f,h:g,hp:m}=a,c=k.ctx,_=g/10,b=f-_,A=m.sum/m.level,S=Math.ceil(m.cur/A);c.fillStyle=Oa[S-1],c.fillRect(o,i-_,b,_),c.fillStyle=Oa[S],c.fillRect(o,i-_,b*(m.cur-(S-1)*A)/A,_),c.beginPath(),c.lineWidth=1,c.strokeStyle="#cff1d3",c.rect(o,i-_,b,_),c.stroke()}function Tl(a){const{x:o,y:i,h:f,hp:g}=a,m=k.ctx,c=wn.state.othOnloadImg,_=f/10;if(g.level<10){const b=Math.floor(g.level/3),A=Math.floor(g.level%3);let S=o-_*2,I=i-_;if(A+b===1)m.drawImage(c[A?"star":"moon"],S,I,_,_);else if(A+b===2){S-=_;for(let C=0;C<2;C++)m.drawImage(c[b>C?"moon":"star"],S,I,_,_),S+=_}else if(A+b===3)for(let C=0;C<3;C++)C===0?(S-=_/2,I-=_/2):C===1?(S-=_/2,I+=_):C===2&&(S+=_),m.drawImage(c[b>C?"moon":"star"],S,I,_,_);else if(A+b===4)for(let C=0;C<4;C++)C===0?(S-=_,I-=_/2):C===1||C===3?S+=_:C===2&&(S-=_,I+=_),m.drawImage(c[b>C?"moon":"star"],S,I,_,_)}else m.drawImage(c.sun,o-_*2,i-_*3/2,_*2,_*2)}const ge=wn.state,Q={isHighRefreshScreen:!1,isLevelLock:!1,isDevTestMode:!1,isTowerCover:!1,enemyList:[],towerList:[]},D={mapItem:{},gridInfo:{x_num:20,y_num:12,arr:[]},level:0,hp:10,money:5e3,intervalTime:900,end:{x:0,y:0},enemiesKilled:0,towersBuilt:0,coinsSpent:0,coinsEarned:0,isGameOver:!1,damageDealt:0,damageTaken:0,maxCombo:0},k={size:50,animationFrame:0,ctx:null},Jn={offscreen:void 0};let Za=nn[ge.mapLevel].type===Zn.Normal,Ja=nn[ge.mapLevel].type===Zn.Experience,ui=nn[ge.mapLevel].type===Zn.Endless;const Al=()=>{Za=nn[ge.mapLevel].type===Zn.Normal,Ja=nn[ge.mapLevel].type===Zn.Experience,ui=nn[ge.mapLevel].type===Zn.Endless};function El(){const{x_num:a,y_num:o}=D.gridInfo,i=[];for(let f=0;f<o;f++){i.push([]);for(let g=0;g<a;g++)i[f][g]=""}D.gridInfo.arr=i}function Qa(){const a=D.level;setTimeout(()=>{var i,f;Oe.createdEnemyNum=0;const o=(f=(i=nn[ge.mapLevel])==null?void 0:i.enemyArr)!=null?f:ei[0];ui?Oe.levelEnemy=a?Pa(a+5):Object.keys(Zr):a<o.length?Oe.levelEnemy=o[a]:Oe.levelEnemy=Pa(a),a&&(cn((a+1)*(20+Math.ceil(Math.random()*Math.ceil(a/3)))),ai()),ve("onLevelChange",a)},500)}function si(a,o){const{x:i,y:f,w:g,h:m}=a;return[er(o,i,f),er(o,i+g,f),er(o,i+g,f+m),er(o,i,f+m)].some(_=>_<=o.r)}function er(a,o,i){const{x:f,y:g,size:m}=a,c=(m!=null?m:k.size)/2;return bn(f+c-o,g+c-i)}function Cl(a){D.hp=Math.max(0,D.hp-a),ve("onHpChange",D.hp),D.hp||Ll()}function Ll(){be.clear(),cancelAnimationFrame(k.animationFrame)}function cn(a){D.money+=a}function Ml(){ve("unifiedMoney",D.money)}function ve(a,o){postMessage({fnName:a,param:o})}const Rl=[{x:6,y:4,tname:"aixi"},{x:4,y:2,tname:"lanbo"},{x:4,y:1,tname:"delaiwen"},{x:5,y:5,tname:"lanbo"},{x:5,y:4,tname:"lanbo"},{x:4,y:4,tname:"lanbo"},{x:1,y:6,tname:"delaiwen"},{x:2,y:6,tname:"delaiwen"},{x:3,y:6,tname:"delaiwen"},{x:2,y:3,tname:"lanbo"},{x:8,y:5,tname:"jin"},{x:9,y:5,tname:"jin"},{x:10,y:5,tname:"jin"},{x:12,y:5,tname:"jin"},{x:11,y:5,tname:"jin"},{x:16,y:1,tname:"delaiwen"},{x:6,y:5,tname:"lanbo"},{x:7,y:3,tname:"ejiate"},{x:8,y:3,tname:"ejiate"},{x:9,y:3,tname:"ejiate"},{x:10,y:3,tname:"ejiate"},{x:11,y:3,tname:"ejiate"},{x:12,y:3,tname:"ejiate"},{x:16,y:6,tname:"aixi"},{x:15,y:6,tname:"lanbo"},{x:16,y:5,tname:"lanbo"},{x:15,y:5,tname:"lanbo"},{x:16,y:7,tname:"lanbo"},{x:15,y:7,tname:"lanbo"},{x:6,y:2,tname:"ez"},{x:7,y:2,tname:"ez"},{x:8,y:2,tname:"ez"},{x:7,y:8,tname:"jin"},{x:8,y:8,tname:"jin"},{x:9,y:8,tname:"jin"},{x:10,y:8,tname:"jin"},{x:11,y:8,tname:"jin"},{x:12,y:8,tname:"jin"},{x:8,y:9,tname:"huonan"},{x:9,y:9,tname:"twitch"},{x:10,y:9,tname:"twitch"},{x:11,y:9,tname:"huonan"}];function Dl(){if(!Q.isDevTestMode)return;cn(999999),Oe.levelEnemy=["zombie-dance","zombie-dance","fulisha","fulisha","rabbish-2","zombie-dance","zombie-dance","fulisha","fulisha","zombie-dance","zombie-dance","fulisha","fulisha","zombie-dance","zombie-dance","fulisha","fulisha"];const a=k.size;Rl.forEach(o=>{o.x*=a,o.y*=a,Nn({...o},!1,!1)});for(let o=0;o<20;o++)Nn({x:o*a,y:0,tname:"delaiwen"},!1,!1);for(let o=0;o<4;o++)Nn({x:o*a,y:a,tname:"delaiwen"},!1,!1);for(let o=0;o<4;o++)Nn({x:o*a,y:2*a,tname:"delaiwen"},!1,!1);for(let o=6;o<15;o++)Nn({x:o*a,y:2*a,tname:"delaiwen"},!1,!1)}var Ol=[{name:"\u70B8\u4ED6\u4E00\u6CE2",instructions:"\u5BF9\u573A\u4E0A\u6240\u6709\u654C\u4EBA\u9020\u6210100\u70B9\u4F24\u5BB3",icon:"icon-remen1",money:300,damage:100,cd:3e4,curTime:0,audioKey:"ma-zhata",isShow:!1,showTime:2e3},{name:"\u8089\u5F39\u51B2\u51FB",instructions:"\u7729\u6655\u573A\u4E0A\u6240\u6709\u654C\u4EBA6\u79D2\uFF0C\u5E76\u9020\u62101\u70B9\u4F24\u5BB3",icon:"icon-jianshen-daduzi-pijiudu",money:500,damage:1,cd:6e4,curTime:0,audioKey:"ma-roudan",isShow:!1,showTime:2e3},{name:"\u793C\u7269",instructions:"\u968F\u673A\u83B7\u5F971-100\u91D1\u5E01",icon:"icon-gift",money:0,damage:0,cd:3e4,curTime:0,audioKey:"skill-coin",isShow:!1,showTime:2e3}];const Fl={proMoney:{isShow:!1,interval:1e4,money:25},addMoney:{num:"",timer:null,time:1e3},skillList:JSON.parse(JSON.stringify(Ol))};function Bl(a){const{name:o,money:i,damage:f}=Fl.skillList[a];if(cn(-i),o!=="\u793C\u7269"){const g=[];ae.forEach(m=>{m.hp.cur-=f,m.hp.cur<=0&&(cn(m.reward),g.push(m.id),Ae.forEach(c=>{c.targetIdList.splice(c.targetIdList.findIndex(_=>_===m.id),1)})),o==="\u8089\u5F39\u51B2\u51FB"&&st(m.id,{num:0,time:6e3,type:"vertigo"})}),Tt(g)}else cn(Ba(1,100))}const Pl=[{addRow:0,addCol:-1},{addRow:-1,addCol:0},{addRow:0,addCol:1},{addRow:1,addCol:0}];function Nl(){var a,o;if(Q.isTowerCover){const i=(o=(a=Q.enemyList)==null?void 0:a.map(f=>f.enemyName))!=null?o:[];return i.includes("zombie-dance")&&!i.includes("dance-little")&&i.push("dance-little"),i.includes("fulisha")&&!i.includes("zombie-little")&&i.push("zombie-little"),{enemyNameList:i,towerList:Q.towerList}}}addEventListener("message",a=>{const{data:o}=a;if(o.init){const i=o.canvasInfo.offscreen;Jn.offscreen=i,k.ctx=i.getContext("2d"),k.size=o.canvasInfo.size,ge.isMobile=o.source.isMobile,ge.ratio=o.source.ratio,ge.mapLevel=o.source.mapLevel,Q.isHighRefreshScreen=o.setting.isHighRefreshScreen,o.isTowerCover&&(Q.isTowerCover=o.isTowerCover,Q.enemyList=o.enemyList,Q.towerList=o.towerList),kl()}switch(o.isPause!==void 0&&(be.allPause(o.isPause),o.isPause?cancelAnimationFrame(k.animationFrame):(ai(),Va())),o.fnName){case"getMouse":{Hl(o.event);break}case"buildTower":{Nn(o.event);break}case"saleTower":{Ka(o.event);break}case"handleSkill":{Bl(o.event);break}case"resetGameStats":{Wl();break}}o.isDevTestMode&&(Q.isDevTestMode=!0)});async function kl(){var a;await wn.loadingAllImg(o=>{ve("onProgress",Ha(o,0,100))},Nl()),ve("onProgress",100),Al(),El(),Ja?cn(1e4):ui&&cn(94999),Q.isTowerCover||Qa(),$l(),ge.isGameInit=!0,Q.isTowerCover?((a=Q.towerList)==null||a.forEach(o=>{Nn({tname:o.towerName,x:o.x*k.size,y:o.y*k.size},!1,!1)}),ai(),Va()):(await Ds(600),li(),Js(),Dl()),ve("onWorkerReady",D.end)}function Wl(){D.enemiesKilled=0,D.towersBuilt=0,D.coinsSpent=0,D.coinsEarned=0,D.damageDealt=0,D.damageTaken=0,D.maxCombo=0}function Va(){Q.isHighRefreshScreen?Ul():function a(){k.animationFrame=requestAnimationFrame(a),li()}()}function Ul(){let o=16.666666666666668,i=Date.now();(function f(){k.animationFrame=requestAnimationFrame(f);const g=Date.now(),m=g-i;m>o&&(li(),i=g-m%o)})()}function li(){k.ctx.clearRect(0,0,Jn.offscreen.width,Jn.offscreen.height),Q.isTowerCover||Gl(),Kl(),Qs(),_l(),Vs(),Ps(),$s(),vl(),tl(),Q.isTowerCover||Ml()}function Gl(){const a=k.size;D.mapItem.start.forEach(o=>{k.ctx.drawImage(ge.othOnloadImg.start,o.x*a,o.y*a,a,a),D.gridInfo.arr[o.y][o.x]="start"})}function Kl(){const a=k.size;Oe.movePath.forEach(o=>{o.forEach(i=>{k.ctx.drawImage(ge.othOnloadImg.floor,i.x,i.y,a,a)})})}function $l(){var o;const a=k.size;if(D.mapItem=Q.isTowerCover?Ua:nn[ge.mapLevel],D.mapItem.start.forEach((i,f)=>{const g=JSON.parse(JSON.stringify(i)),{addRow:m,addCol:c}=Pl[g.x_y-1];g.x=(g.x+c)*a,g.y=(g.y+m)*a;const _=g.num;delete g.num;const b=[JSON.parse(JSON.stringify(g))];let A=g.x_y;for(let S=0;S<_;S++){const I=D.mapItem.map[f][S];I&&(A=I),A%2?g.x+=A===3?a:-a:g.y+=A===4?a:-a,g.x_y=A,b.push(JSON.parse(JSON.stringify(g))),Q.isTowerCover||(D.gridInfo.arr[Math.floor(g.y/a)][Math.floor(g.x/a)]="floor")}Oe.movePath.push(b)}),!Q.isTowerCover){let i=D.mapItem.end;if(!i){const f=(o=Oe.movePath.at(-1))==null?void 0:o.at(-1);i={x:Math.floor(f.x/a),y:Math.floor(f.y/a)}}D.end=i,D.gridInfo.arr[i.y][i.x]="end"}}function Hl(a){const o=k.size,i=a.offsetX*ge.ratio,f=a.offsetY*ge.ratio,g=Math.floor(f/o),m=Math.floor(i/o),c=D.gridInfo.arr[g][m],_=m*o,b=g*o;if(c==="tower"){let A="";for(const I of Ae.values())I.x===_&&I.y===b&&(A=I.id);const S=Ae.get(A);S&&ve("handlerTower",{isShow:!0,left:_,top:b,r:S.r,towerId:A,saleMoney:S.saleMoney})}c||ve("showTowerBuilding",{left:_,top:b})}})();
